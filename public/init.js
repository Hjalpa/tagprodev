!function(t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():window.noUiSlider=t()}(function(){"use strict";var t="14.6.4";function e(t){t.parentElement.removeChild(t)}function n(t){return null!=t}function r(t){t.preventDefault()}function i(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function s(t,e,n){0<n&&(c(t,e),setTimeout(function(){u(t,e)},n))}function o(t){return Math.max(Math.min(t,100),0)}function a(t){return Array.isArray(t)?t:[t]}function l(t){var e=(t=String(t)).split(".");return 1<e.length?e[1].length:0}function c(t,e){t.classList&&!/\s/.test(e)?t.classList.add(e):t.className+=" "+e}function u(t,e){t.classList&&!/\s/.test(e)?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function d(t){var e=void 0!==window.pageXOffset,n="CSS1Compat"===(t.compatMode||"");return{x:e?window.pageXOffset:n?t.documentElement.scrollLeft:t.body.scrollLeft,y:e?window.pageYOffset:n?t.documentElement.scrollTop:t.body.scrollTop}}function p(t,e){return 100/(e-t)}function h(t,e,n){return 100*e/(t[n+1]-t[n])}function f(t,e){for(var n=1;t>=e[n];)n+=1;return n}function g(e,n,r){var s;if("number"==typeof n&&(n=[n]),!Array.isArray(n))throw new Error("noUiSlider ("+t+"): 'range' contains invalid value.");if(!i(s="min"===e?0:"max"===e?100:parseFloat(e))||!i(n[0]))throw new Error("noUiSlider ("+t+"): 'range' value isn't numeric.");r.xPct.push(s),r.xVal.push(n[0]),s?r.xSteps.push(!isNaN(n[1])&&n[1]):isNaN(n[1])||(r.xSteps[0]=n[1]),r.xHighestCompleteStep.push(0)}function m(t,e,n){if(e)if(n.xVal[t]!==n.xVal[t+1]){n.xSteps[t]=h([n.xVal[t],n.xVal[t+1]],e,0)/p(n.xPct[t],n.xPct[t+1]);var r=(n.xVal[t+1]-n.xVal[t])/n.xNumSteps[t],i=Math.ceil(Number(r.toFixed(3))-1),s=n.xVal[t]+n.xNumSteps[t]*i;n.xHighestCompleteStep[t]=s}else n.xSteps[t]=n.xHighestCompleteStep[t]=n.xVal[t]}function v(t,e,n){var r;this.xPct=[],this.xVal=[],this.xSteps=[n||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=e;var i=[];for(r in t)t.hasOwnProperty(r)&&i.push([t[r],r]);for(i.length&&"object"==typeof i[0][0]?i.sort(function(t,e){return t[0][0]-e[0][0]}):i.sort(function(t,e){return t[0]-e[0]}),r=0;r<i.length;r++)g(i[r][1],i[r][0],this);for(this.xNumSteps=this.xSteps.slice(0),r=0;r<this.xNumSteps.length;r++)m(r,this.xNumSteps[r],this)}v.prototype.getDistance=function(e){var n,r=[];for(n=0;n<this.xNumSteps.length-1;n++){var i=this.xNumSteps[n];if(i&&e/i%1!=0)throw new Error("noUiSlider ("+t+"): 'limit', 'margin' and 'padding' of "+this.xPct[n]+"% range must be divisible by step.");r[n]=h(this.xVal,e,n)}return r},v.prototype.getAbsoluteDistance=function(t,e,n){var r,i=0;if(t<this.xPct[this.xPct.length-1])for(;t>this.xPct[i+1];)i++;else t===this.xPct[this.xPct.length-1]&&(i=this.xPct.length-2);n||t!==this.xPct[i+1]||i++;var s=1,o=e[i],a=0,l=0,c=0,u=0;for(r=n?(t-this.xPct[i])/(this.xPct[i+1]-this.xPct[i]):(this.xPct[i+1]-t)/(this.xPct[i+1]-this.xPct[i]);0<o;)a=this.xPct[i+1+u]-this.xPct[i+u],100<e[i+u]*s+100-100*r?(l=a*r,s=(o-100*r)/e[i+u],r=1):(l=e[i+u]*a/100*s,s=0),n?(c-=l,1<=this.xPct.length+u&&u--):(c+=l,1<=this.xPct.length-u&&u++),o=e[i+u]*s;return t+c},v.prototype.toStepping=function(t){return function(t,e,n){if(n>=t.slice(-1)[0])return 100;var r,i,s=f(n,t),o=t[s-1],a=t[s],l=e[s-1],c=e[s];return l+(i=n,h(r=[o,a],r[0]<0?i+Math.abs(r[0]):i-r[0],0)/p(l,c))}(this.xVal,this.xPct,t)},v.prototype.fromStepping=function(t){return function(t,e,n){if(100<=n)return t.slice(-1)[0];var r,i=f(n,e),s=t[i-1],o=t[i],a=e[i-1];return r=[s,o],(n-a)*p(a,e[i])*(r[1]-r[0])/100+r[0]}(this.xVal,this.xPct,t)},v.prototype.getStep=function(t){return function(t,e,n,r){if(100===r)return r;var i,s,o=f(r,t),a=t[o-1],l=t[o];return n?(l-a)/2<r-a?l:a:e[o-1]?t[o-1]+(i=r-t[o-1],s=e[o-1],Math.round(i/s)*s):r}(this.xPct,this.xSteps,this.snap,t)},v.prototype.getDefaultStep=function(t,e,n){var r=f(t,this.xPct);return(100===t||e&&t===this.xPct[r-1])&&(r=Math.max(r-1,1)),(this.xVal[r]-this.xVal[r-1])/n},v.prototype.getNearbySteps=function(t){var e=f(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},v.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(l);return Math.max.apply(null,t)},v.prototype.convert=function(t){return this.getStep(this.toStepping(t))};var y={to:function(t){return void 0!==t&&t.toFixed(2)},from:Number},w={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},b={tooltips:".__tooltips",aria:".__aria"};function x(e){if("object"==typeof(n=e)&&"function"==typeof n.to&&"function"==typeof n.from)return!0;var n;throw new Error("noUiSlider ("+t+"): 'format' requires 'to' and 'from' methods.")}function S(e,n){if(!i(n))throw new Error("noUiSlider ("+t+"): 'step' is not numeric.");e.singleStep=n}function O(e,n){if(!i(n))throw new Error("noUiSlider ("+t+"): 'keyboardPageMultiplier' is not numeric.");e.keyboardPageMultiplier=n}function A(e,n){if(!i(n))throw new Error("noUiSlider ("+t+"): 'keyboardDefaultStep' is not numeric.");e.keyboardDefaultStep=n}function C(e,n){if("object"!=typeof n||Array.isArray(n))throw new Error("noUiSlider ("+t+"): 'range' is not an object.");if(void 0===n.min||void 0===n.max)throw new Error("noUiSlider ("+t+"): Missing 'min' or 'max' in 'range'.");if(n.min===n.max)throw new Error("noUiSlider ("+t+"): 'range' 'min' and 'max' cannot be equal.");e.spectrum=new v(n,e.snap,e.singleStep)}function k(e,n){if(n=a(n),!Array.isArray(n)||!n.length)throw new Error("noUiSlider ("+t+"): 'start' option is incorrect.");e.handles=n.length,e.start=n}function E(e,n){if("boolean"!=typeof(e.snap=n))throw new Error("noUiSlider ("+t+"): 'snap' option must be a boolean.")}function _(e,n){if("boolean"!=typeof(e.animate=n))throw new Error("noUiSlider ("+t+"): 'animate' option must be a boolean.")}function I(e,n){if("number"!=typeof(e.animationDuration=n))throw new Error("noUiSlider ("+t+"): 'animationDuration' option must be a number.")}function P(e,n){var r,i=[!1];if("lower"===n?n=[!0,!1]:"upper"===n&&(n=[!1,!0]),!0===n||!1===n){for(r=1;r<e.handles;r++)i.push(n);i.push(!1)}else{if(!Array.isArray(n)||!n.length||n.length!==e.handles+1)throw new Error("noUiSlider ("+t+"): 'connect' option doesn't match handle count.");i=n}e.connect=i}function F(e,n){switch(n){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider ("+t+"): 'orientation' option is invalid.")}}function L(e,n){if(!i(n))throw new Error("noUiSlider ("+t+"): 'margin' option must be numeric.");0!==n&&(e.margin=e.spectrum.getDistance(n))}function q(e,n){if(!i(n))throw new Error("noUiSlider ("+t+"): 'limit' option must be numeric.");if(e.limit=e.spectrum.getDistance(n),!e.limit||e.handles<2)throw new Error("noUiSlider ("+t+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}function N(e,n){var r;if(!i(n)&&!Array.isArray(n))throw new Error("noUiSlider ("+t+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(n)&&2!==n.length&&!i(n[0])&&!i(n[1]))throw new Error("noUiSlider ("+t+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==n){for(Array.isArray(n)||(n=[n,n]),e.padding=[e.spectrum.getDistance(n[0]),e.spectrum.getDistance(n[1])],r=0;r<e.spectrum.xNumSteps.length-1;r++)if(e.padding[0][r]<0||e.padding[1][r]<0)throw new Error("noUiSlider ("+t+"): 'padding' option must be a positive number(s).");var s=n[0]+n[1],o=e.spectrum.xVal[0];if(1<s/(e.spectrum.xVal[e.spectrum.xVal.length-1]-o))throw new Error("noUiSlider ("+t+"): 'padding' option must not exceed 100% of the range.")}}function T(e,n){switch(n){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider ("+t+"): 'direction' option was not recognized.")}}function V(e,n){if("string"!=typeof n)throw new Error("noUiSlider ("+t+"): 'behaviour' must be a string containing options.");var r=0<=n.indexOf("tap"),i=0<=n.indexOf("drag"),s=0<=n.indexOf("fixed"),o=0<=n.indexOf("snap"),a=0<=n.indexOf("hover"),l=0<=n.indexOf("unconstrained");if(s){if(2!==e.handles)throw new Error("noUiSlider ("+t+"): 'fixed' behaviour must be used with 2 handles");L(e,e.start[1]-e.start[0])}if(l&&(e.margin||e.limit))throw new Error("noUiSlider ("+t+"): 'unconstrained' behaviour cannot be used with margin or limit");e.events={tap:r||o,drag:i,fixed:s,snap:o,hover:a,unconstrained:l}}function D(e,n){if(!1!==n)if(!0===n){e.tooltips=[];for(var r=0;r<e.handles;r++)e.tooltips.push(!0)}else{if(e.tooltips=a(n),e.tooltips.length!==e.handles)throw new Error("noUiSlider ("+t+"): must pass a formatter for all handles.");e.tooltips.forEach(function(e){if("boolean"!=typeof e&&("object"!=typeof e||"function"!=typeof e.to))throw new Error("noUiSlider ("+t+"): 'tooltips' must be passed a formatter or 'false'.")})}}function M(t,e){x(t.ariaFormat=e)}function j(t,e){x(t.format=e)}function U(e,n){if("boolean"!=typeof(e.keyboardSupport=n))throw new Error("noUiSlider ("+t+"): 'keyboardSupport' option must be a boolean.")}function H(t,e){t.documentElement=e}function R(e,n){if("string"!=typeof n&&!1!==n)throw new Error("noUiSlider ("+t+"): 'cssPrefix' must be a string or `false`.");e.cssPrefix=n}function B(e,n){if("object"!=typeof n)throw new Error("noUiSlider ("+t+"): 'cssClasses' must be an object.");if("string"==typeof e.cssPrefix)for(var r in e.cssClasses={},n)n.hasOwnProperty(r)&&(e.cssClasses[r]=e.cssPrefix+n[r]);else e.cssClasses=n}function z(e){var r={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:y,format:y},i={step:{r:!1,t:S},keyboardPageMultiplier:{r:!1,t:O},keyboardDefaultStep:{r:!1,t:A},start:{r:!0,t:k},connect:{r:!0,t:P},direction:{r:!0,t:T},snap:{r:!1,t:E},animate:{r:!1,t:_},animationDuration:{r:!1,t:I},range:{r:!0,t:C},orientation:{r:!1,t:F},margin:{r:!1,t:L},limit:{r:!1,t:q},padding:{r:!1,t:N},behaviour:{r:!0,t:V},ariaFormat:{r:!1,t:M},format:{r:!1,t:j},tooltips:{r:!1,t:D},keyboardSupport:{r:!0,t:U},documentElement:{r:!1,t:H},cssPrefix:{r:!0,t:R},cssClasses:{r:!0,t:B}},s={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:w,keyboardPageMultiplier:5,keyboardDefaultStep:10};e.format&&!e.ariaFormat&&(e.ariaFormat=e.format),Object.keys(i).forEach(function(o){if(!n(e[o])&&void 0===s[o]){if(i[o].r)throw new Error("noUiSlider ("+t+"): '"+o+"' is required.");return!0}i[o].t(r,n(e[o])?e[o]:s[o])}),r.pips=e.pips;var o=document.createElement("div"),a=void 0!==o.style.msTransform,l=void 0!==o.style.transform;return r.transformRule=l?"transform":a?"msTransform":"webkitTransform",r.style=[["left","top"],["right","bottom"]][r.dir][r.ort],r}return{__spectrum:v,version:t,cssClasses:w,create:function(i,l){if(!i||!i.nodeName)throw new Error("noUiSlider ("+t+"): create requires a single element, got: "+i);if(i.noUiSlider)throw new Error("noUiSlider ("+t+"): Slider was already initialized.");var p=function(i,l,p){var h,f,g,m,v,y,w,x,S=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},O=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),A=i,C=l.spectrum,k=[],E=[],_=[],I=0,P={},F=i.ownerDocument,L=l.documentElement||F.documentElement,q=F.body,N=-1,T=0,V=1,D=2,M="rtl"===F.dir||1===l.ort?0:100;function j(t,e){var n=F.createElement("div");return e&&c(n,e),t.appendChild(n),n}function U(t,e){var n=j(t,l.cssClasses.origin),r=j(n,l.cssClasses.handle);return j(r,l.cssClasses.touchArea),r.setAttribute("data-handle",e),l.keyboardSupport&&(r.setAttribute("tabindex","0"),r.addEventListener("keydown",function(t){return function(t,e){if(B()||$(e))return!1;var n=["Left","Right"],r=["Down","Up"],i=["PageDown","PageUp"],s=["Home","End"];l.dir&&!l.ort?n.reverse():l.ort&&!l.dir&&(r.reverse(),i.reverse());var o,a=t.key.replace("Arrow",""),c=a===i[0],u=a===i[1],d=a===r[0]||a===n[0]||c,p=a===r[1]||a===n[1]||u,h=a===s[1];if(!(d||p||a===s[0]||h))return!0;if(t.preventDefault(),p||d){var f=l.keyboardPageMultiplier,g=d?0:1,m=vt(e)[g];if(null===m)return!1;!1===m&&(m=C.getDefaultStep(E[e],d,l.keyboardDefaultStep)),(u||c)&&(m*=f),m=Math.max(m,1e-7),m*=d?-1:1,o=k[e]+m}else o=h?l.spectrum.xVal[l.spectrum.xVal.length-1]:l.spectrum.xVal[0];return pt(e,C.toStepping(o),!0,!0),ot("slide",e),ot("update",e),ot("change",e),ot("set",e),!1}(t,e)})),r.setAttribute("role","slider"),r.setAttribute("aria-orientation",l.ort?"vertical":"horizontal"),0===e?c(r,l.cssClasses.handleLower):e===l.handles-1&&c(r,l.cssClasses.handleUpper),n}function H(t,e){return!!e&&j(t,l.cssClasses.connect)}function R(t,e){return!!l.tooltips[e]&&j(t.firstChild,l.cssClasses.tooltip)}function B(){return A.hasAttribute("disabled")}function $(t){return f[t].hasAttribute("disabled")}function W(){v&&(st("update"+b.tooltips),v.forEach(function(t){t&&e(t)}),v=null)}function K(){W(),v=f.map(R),it("update"+b.tooltips,function(t,e,n){if(v[e]){var r=t[e];!0!==l.tooltips[e]&&(r=l.tooltips[e].to(n[e])),v[e].innerHTML=r}})}function Q(t,e,n){var r=F.createElement("div"),i=[];i[T]=l.cssClasses.valueNormal,i[V]=l.cssClasses.valueLarge,i[D]=l.cssClasses.valueSub;var s=[];s[T]=l.cssClasses.markerNormal,s[V]=l.cssClasses.markerLarge,s[D]=l.cssClasses.markerSub;var o=[l.cssClasses.valueHorizontal,l.cssClasses.valueVertical],a=[l.cssClasses.markerHorizontal,l.cssClasses.markerVertical];function u(t,e){var n=e===l.cssClasses.value,r=n?i:s;return e+" "+(n?o:a)[l.ort]+" "+r[t]}return c(r,l.cssClasses.pips),c(r,0===l.ort?l.cssClasses.pipsHorizontal:l.cssClasses.pipsVertical),Object.keys(t).forEach(function(i){!function(t,i,s){if((s=e?e(i,s):s)!==N){var o=j(r,!1);o.className=u(s,l.cssClasses.marker),o.style[l.style]=t+"%",T<s&&((o=j(r,!1)).className=u(s,l.cssClasses.value),o.setAttribute("data-value",i),o.style[l.style]=t+"%",o.innerHTML=n.to(i))}}(i,t[i][0],t[i][1])}),r}function G(){m&&(e(m),m=null)}function X(e){G();var n,r,i,s,o,a,l,c,u,d=e.mode,p=e.density||1,h=e.filter||!1,f=function(e,n,r){if("range"===e||"steps"===e)return C.xVal;if("count"===e){if(n<2)throw new Error("noUiSlider ("+t+"): 'values' (>= 2) required for mode 'count'.");var i=n-1,s=100/i;for(n=[];i--;)n[i]=i*s;n.push(100),e="positions"}return"positions"===e?n.map(function(t){return C.fromStepping(r?C.getStep(t):t)}):"values"===e?r?n.map(function(t){return C.fromStepping(C.getStep(C.toStepping(t)))}):n:void 0}(d,e.values||!1,e.stepped||!1),g=(n=p,r=d,i=f,s={},o=C.xVal[0],a=C.xVal[C.xVal.length-1],c=l=!1,u=0,(i=i.slice().sort(function(t,e){return t-e}).filter(function(t){return!this[t]&&(this[t]=!0)},{}))[0]!==o&&(i.unshift(o),l=!0),i[i.length-1]!==a&&(i.push(a),c=!0),i.forEach(function(t,e){var o,a,d,p,h,f,g,m,v,y,w=t,b=i[e+1],x="steps"===r;if(x&&(o=C.xNumSteps[e]),o||(o=b-w),!1!==w)for(void 0===b&&(b=w),o=Math.max(o,1e-7),a=w;a<=b;a=(a+o).toFixed(7)/1){for(m=(h=(p=C.toStepping(a))-u)/n,y=h/(v=Math.round(m)),d=1;d<=v;d+=1)s[(f=u+d*y).toFixed(5)]=[C.fromStepping(f),0];g=-1<i.indexOf(a)?V:x?D:T,!e&&l&&a!==b&&(g=0),a===b&&c||(s[p.toFixed(5)]=[a,g]),u=p}}),s),v=e.format||{to:Math.round};return m=A.appendChild(Q(g,h,v))}function Y(){var t=h.getBoundingClientRect(),e="offset"+["Width","Height"][l.ort];return 0===l.ort?t.width||h[e]:t.height||h[e]}function J(t,e,n,r){var i=function(i){return!!(i=function(t,e,n){var r,i,s=0===t.type.indexOf("touch"),o=0===t.type.indexOf("mouse"),a=0===t.type.indexOf("pointer");if(0===t.type.indexOf("MSPointer")&&(a=!0),"mousedown"===t.type&&!t.buttons&&!t.touches)return!1;if(s){var l=function(t){return t.target===n||n.contains(t.target)||t.target.shadowRoot&&t.target.shadowRoot.contains(n)};if("touchstart"===t.type){var c=Array.prototype.filter.call(t.touches,l);if(1<c.length)return!1;r=c[0].pageX,i=c[0].pageY}else{var u=Array.prototype.find.call(t.changedTouches,l);if(!u)return!1;r=u.pageX,i=u.pageY}}return e=e||d(F),(o||a)&&(r=t.clientX+e.x,i=t.clientY+e.y),t.pageOffset=e,t.points=[r,i],t.cursor=o||a,t}(i,r.pageOffset,r.target||e))&&!(B()&&!r.doNotReject)&&(s=A,o=l.cssClasses.tap,!((s.classList?s.classList.contains(o):new RegExp("\\b"+o+"\\b").test(s.className))&&!r.doNotReject)&&!(t===S.start&&void 0!==i.buttons&&1<i.buttons)&&(!r.hover||!i.buttons)&&(O||i.preventDefault(),i.calcPoint=i.points[l.ort],void n(i,r)));var s,o},s=[];return t.split(" ").forEach(function(t){e.addEventListener(t,i,!!O&&{passive:!0}),s.push([t,i])}),s}function Z(t){var e,n,r,i,s,a,c=100*(t-(e=h,n=l.ort,r=e.getBoundingClientRect(),s=(i=e.ownerDocument).documentElement,a=d(i),/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(a.x=0),n?r.top+a.y-s.clientTop:r.left+a.x-s.clientLeft))/Y();return c=o(c),l.dir?100-c:c}function tt(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&nt(t,e)}function et(t,e){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===t.buttons&&0!==e.buttonsProperty)return nt(t,e);var n=(l.dir?-1:1)*(t.calcPoint-e.startCalcPoint);ct(0<n,100*n/e.baseSize,e.locations,e.handleNumbers)}function nt(t,e){e.handle&&(u(e.handle,l.cssClasses.active),I-=1),e.listeners.forEach(function(t){L.removeEventListener(t[0],t[1])}),0===I&&(u(A,l.cssClasses.drag),dt(),t.cursor&&(q.style.cursor="",q.removeEventListener("selectstart",r))),e.handleNumbers.forEach(function(t){ot("change",t),ot("set",t),ot("end",t)})}function rt(t,e){if(e.handleNumbers.some($))return!1;var n;1===e.handleNumbers.length&&(n=f[e.handleNumbers[0]].children[0],I+=1,c(n,l.cssClasses.active)),t.stopPropagation();var i=[],s=J(S.move,L,et,{target:t.target,handle:n,listeners:i,startCalcPoint:t.calcPoint,baseSize:Y(),pageOffset:t.pageOffset,handleNumbers:e.handleNumbers,buttonsProperty:t.buttons,locations:E.slice()}),o=J(S.end,L,nt,{target:t.target,handle:n,listeners:i,doNotReject:!0,handleNumbers:e.handleNumbers}),a=J("mouseout",L,tt,{target:t.target,handle:n,listeners:i,doNotReject:!0,handleNumbers:e.handleNumbers});i.push.apply(i,s.concat(o,a)),t.cursor&&(q.style.cursor=getComputedStyle(t.target).cursor,1<f.length&&c(A,l.cssClasses.drag),q.addEventListener("selectstart",r,!1)),e.handleNumbers.forEach(function(t){ot("start",t)})}function it(t,e){P[t]=P[t]||[],P[t].push(e),"update"===t.split(".")[0]&&f.forEach(function(t,e){ot("update",e)})}function st(t){var e=t&&t.split(".")[0],n=e?t.substring(e.length):t;Object.keys(P).forEach(function(t){var r,i=t.split(".")[0],s=t.substring(i.length);e&&e!==i||n&&n!==s||((r=s)!==b.aria&&r!==b.tooltips||n===s)&&delete P[t]})}function ot(t,e,n){Object.keys(P).forEach(function(r){var i=r.split(".")[0];t===i&&P[r].forEach(function(t){t.call(y,k.map(l.format.to),e,k.slice(),n||!1,E.slice(),y)})})}function at(t,e,n,r,i,s){var a;return 1<f.length&&!l.events.unconstrained&&(r&&0<e&&(a=C.getAbsoluteDistance(t[e-1],l.margin,0),n=Math.max(n,a)),i&&e<f.length-1&&(a=C.getAbsoluteDistance(t[e+1],l.margin,1),n=Math.min(n,a))),1<f.length&&l.limit&&(r&&0<e&&(a=C.getAbsoluteDistance(t[e-1],l.limit,0),n=Math.min(n,a)),i&&e<f.length-1&&(a=C.getAbsoluteDistance(t[e+1],l.limit,1),n=Math.max(n,a))),l.padding&&(0===e&&(a=C.getAbsoluteDistance(0,l.padding[0],0),n=Math.max(n,a)),e===f.length-1&&(a=C.getAbsoluteDistance(100,l.padding[1],1),n=Math.min(n,a))),!((n=o(n=C.getStep(n)))===t[e]&&!s)&&n}function lt(t,e){var n=l.ort;return(n?e:t)+", "+(n?t:e)}function ct(t,e,n,r){var i=n.slice(),s=[!t,t],o=[t,!t];r=r.slice(),t&&r.reverse(),1<r.length?r.forEach(function(t,n){var r=at(i,t,i[t]+e,s[n],o[n],!1);!1===r?e=0:(e=r-i[t],i[t]=r)}):s=o=[!0];var a=!1;r.forEach(function(t,r){a=pt(t,n[t]+e,s[r],o[r])||a}),a&&r.forEach(function(t){ot("update",t),ot("slide",t)})}function ut(t,e){return l.dir?100-t-e:t}function dt(){_.forEach(function(t){var e=50<E[t]?-1:1,n=3+(f.length+e*t);f[t].style.zIndex=n})}function pt(t,e,n,r,i){return i||(e=at(E,t,e,n,r,!1)),!1!==e&&(function(t,e){E[t]=e,k[t]=C.fromStepping(e);var n="translate("+lt(10*(ut(e,0)-M)+"%","0")+")";f[t].style[l.transformRule]=n,ht(t),ht(t+1)}(t,e),!0)}function ht(t){if(g[t]){var e=0,n=100;0!==t&&(e=E[t-1]),t!==g.length-1&&(n=E[t]);var r=n-e,i="translate("+lt(ut(e,r)+"%","0")+")",s="scale("+lt(r/100,"1")+")";g[t].style[l.transformRule]=i+" "+s}}function ft(t,e){return null===t||!1===t||void 0===t?E[e]:("number"==typeof t&&(t=String(t)),t=l.format.from(t),!1===(t=C.toStepping(t))||isNaN(t)?E[e]:t)}function gt(t,e,n){var r=a(t),i=void 0===E[0];e=void 0===e||!!e,l.animate&&!i&&s(A,l.cssClasses.tap,l.animationDuration),_.forEach(function(t){pt(t,ft(r[t],t),!0,!1,n)});for(var o=1===_.length?0:1;o<_.length;++o)_.forEach(function(t){pt(t,E[t],!0,!0,n)});dt(),_.forEach(function(t){ot("update",t),null!==r[t]&&e&&ot("set",t)})}function mt(){var t=k.map(l.format.to);return 1===t.length?t[0]:t}function vt(t){var e=E[t],n=C.getNearbySteps(e),r=k[t],i=n.thisStep.step,s=null;if(l.snap)return[r-n.stepBefore.startValue||null,n.stepAfter.startValue-r||null];!1!==i&&r+i>n.stepAfter.startValue&&(i=n.stepAfter.startValue-r),s=r>n.thisStep.startValue?n.thisStep.step:!1!==n.stepBefore.step&&r-n.stepBefore.highestStep,100===e?i=null:0===e&&(s=null);var o=C.countStepDecimals();return null!==i&&!1!==i&&(i=Number(i.toFixed(o))),null!==s&&!1!==s&&(s=Number(s.toFixed(o))),[s,i]}return c(w=A,l.cssClasses.target),0===l.dir?c(w,l.cssClasses.ltr):c(w,l.cssClasses.rtl),0===l.ort?c(w,l.cssClasses.horizontal):c(w,l.cssClasses.vertical),c(w,"rtl"===getComputedStyle(w).direction?l.cssClasses.textDirectionRtl:l.cssClasses.textDirectionLtr),h=j(w,l.cssClasses.base),function(t,e){var n=j(e,l.cssClasses.connects);f=[],(g=[]).push(H(n,t[0]));for(var r=0;r<l.handles;r++)f.push(U(e,r)),_[r]=r,g.push(H(n,t[r+1]))}(l.connect,h),(x=l.events).fixed||f.forEach(function(t,e){J(S.start,t.children[0],rt,{handleNumbers:[e]})}),x.tap&&J(S.start,h,function(t){t.stopPropagation();var e,n,r,i=Z(t.calcPoint),o=(e=i,r=!(n=100),f.forEach(function(t,i){if(!$(i)){var s=E[i],o=Math.abs(s-e);(o<n||o<=n&&s<e||100===o&&100===n)&&(r=i,n=o)}}),r);if(!1===o)return!1;l.events.snap||s(A,l.cssClasses.tap,l.animationDuration),pt(o,i,!0,!0),dt(),ot("slide",o,!0),ot("update",o,!0),ot("change",o,!0),ot("set",o,!0),l.events.snap&&rt(t,{handleNumbers:[o]})},{}),x.hover&&J(S.move,h,function(t){var e=Z(t.calcPoint),n=C.getStep(e),r=C.fromStepping(n);Object.keys(P).forEach(function(t){"hover"===t.split(".")[0]&&P[t].forEach(function(t){t.call(y,r)})})},{hover:!0}),x.drag&&g.forEach(function(t,e){if(!1!==t&&0!==e&&e!==g.length-1){var n=f[e-1],r=f[e],i=[t];c(t,l.cssClasses.draggable),x.fixed&&(i.push(n.children[0]),i.push(r.children[0])),i.forEach(function(t){J(S.start,t,rt,{handles:[n,r],handleNumbers:[e-1,e]})})}}),gt(l.start),l.pips&&X(l.pips),l.tooltips&&K(),st("update"+b.aria),it("update"+b.aria,function(t,e,n,r,i){_.forEach(function(t){var e=f[t],r=at(E,t,0,!0,!0,!0),s=at(E,t,100,!0,!0,!0),o=i[t],a=l.ariaFormat.to(n[t]);r=C.fromStepping(r).toFixed(1),s=C.fromStepping(s).toFixed(1),o=C.fromStepping(o).toFixed(1),e.children[0].setAttribute("aria-valuemin",r),e.children[0].setAttribute("aria-valuemax",s),e.children[0].setAttribute("aria-valuenow",o),e.children[0].setAttribute("aria-valuetext",a)})}),y={destroy:function(){for(var t in st(b.aria),st(b.tooltips),l.cssClasses)l.cssClasses.hasOwnProperty(t)&&u(A,l.cssClasses[t]);for(;A.firstChild;)A.removeChild(A.firstChild);delete A.noUiSlider},steps:function(){return _.map(vt)},on:it,off:st,get:mt,set:gt,setHandle:function(e,n,r,i){if(!(0<=(e=Number(e))&&e<_.length))throw new Error("noUiSlider ("+t+"): invalid handle number, got: "+e);pt(e,ft(n,e),!0,!0,i),ot("update",e),r&&ot("set",e)},reset:function(t){gt(l.start,t)},__moveHandles:function(t,e,n){ct(t,e,E,n)},options:p,updateOptions:function(t,e){var r=mt(),i=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];i.forEach(function(e){void 0!==t[e]&&(p[e]=t[e])});var s=z(p);i.forEach(function(e){void 0!==t[e]&&(l[e]=s[e])}),C=s.spectrum,l.margin=s.margin,l.limit=s.limit,l.padding=s.padding,l.pips?X(l.pips):G(),l.tooltips?K():W(),E=[],gt(n(t.start)?t.start:r,e)},target:A,removePips:G,removeTooltips:W,getTooltips:function(){return v},getOrigins:function(){return f},pips:X}}(i,z(l),l);return i.noUiSlider=p}}}),function(t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():window.wNumb=t()}(function(){"use strict";var t=["decimals","thousand","mark","prefix","suffix","encoder","decoder","negativeBefore","negative","edit","undo"];function e(t){return t.split("").reverse().join("")}function n(t,e){return t.substring(0,e.length)===e}function r(t,e,n){if((t[e]||t[n])&&t[e]===t[n])throw new Error(e)}function i(t){return"number"==typeof t&&isFinite(t)}function s(t,n,r,s,o,a,l,c,u,d,p,h){var f,g,m,v=h,y="",w="";return a&&(h=a(h)),!!i(h)&&(!1!==t&&0===parseFloat(h.toFixed(t))&&(h=0),h<0&&(f=!0,h=Math.abs(h)),!1!==t&&(h=function(t,e){return t=t.toString().split("e"),(+((t=(t=Math.round(+(t[0]+"e"+(t[1]?+t[1]+e:e)))).toString().split("e"))[0]+"e"+(t[1]?t[1]-e:-e))).toFixed(e)}(h,t)),-1!==(h=h.toString()).indexOf(".")?(m=(g=h.split("."))[0],r&&(y=r+g[1])):m=h,n&&(m=e((m=e(m).match(/.{1,3}/g)).join(e(n)))),f&&c&&(w+=c),s&&(w+=s),f&&u&&(w+=u),w+=m,w+=y,o&&(w+=o),d&&(w=d(w,v)),w)}function o(t,e,r,s,o,a,l,c,u,d,p,h){var f,g="";return p&&(h=p(h)),!(!h||"string"!=typeof h)&&(c&&n(h,c)&&(h=h.replace(c,""),f=!0),s&&n(h,s)&&(h=h.replace(s,"")),u&&n(h,u)&&(h=h.replace(u,""),f=!0),o&&function(t,e){return h.slice(-1*e.length)===e}(0,o)&&(h=h.slice(0,-1*o.length)),e&&(h=h.split(e).join("")),r&&(h=h.replace(r,".")),f&&(g+="-"),""!==(g=(g+=h).replace(/[^0-9\.\-.]/g,""))&&(g=Number(g),l&&(g=l(g)),!!i(g)&&g))}function a(e,n,r){var i,s=[];for(i=0;i<t.length;i+=1)s.push(e[t[i]]);return s.push(r),n.apply("",s)}return function e(n){if(!(this instanceof e))return new e(n);"object"==typeof n&&(n=function(e){var n,i,s,o={};for(void 0===e.suffix&&(e.suffix=e.postfix),n=0;n<t.length;n+=1)if(void 0===(s=e[i=t[n]]))"negative"!==i||o.negativeBefore?"mark"===i&&"."!==o.thousand?o[i]=".":o[i]=!1:o[i]="-";else if("decimals"===i){if(!(0<=s&&s<8))throw new Error(i);o[i]=s}else if("encoder"===i||"decoder"===i||"edit"===i||"undo"===i){if("function"!=typeof s)throw new Error(i);o[i]=s}else{if("string"!=typeof s)throw new Error(i);o[i]=s}return r(o,"mark","thousand"),r(o,"prefix","negative"),r(o,"prefix","negativeBefore"),o}(n),this.to=function(t){return a(n,s,t)},this.from=function(t){return a(n,o,t)})}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).TomSelect=e()}(this,function(){"use strict";function t(t,e){t.split(/\s+/).forEach(t=>{e(t)})}class e{constructor(){this._events={}}on(e,n){t(e,t=>{this._events[t]=this._events[t]||[],this._events[t].push(n)})}off(e,n){var r=arguments.length;0!==r?t(e,t=>{if(1===r)return delete this._events[t];t in this._events!=0&&this._events[t].splice(this._events[t].indexOf(n),1)}):this._events={}}trigger(e,...n){var r=this;t(e,t=>{if(t in r._events!=0)for(let e of r._events[t])e.apply(r,n)})}}var n=function(t,e){return"number"==typeof t&&"number"==typeof e?t>e?1:t<e?-1:0:(t=o(String(t||"")))>(e=o(String(e||"")))?1:e>t?-1:0},r=function(t,e,n){if(t&&e){if(!n)return t[e];for(var r=e.split(".");r.length&&(t=t[r.shift()]););return t}},i=function(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},s={a:"[aḀḁĂăÂâǍǎȺⱥȦȧẠạÄäÀàÁáĀāÃãÅåąĄÃąĄ]",b:"[b␢βΒB฿𐌁ᛒ]",c:"[cĆćĈĉČčĊċC̄c̄ÇçḈḉȻȼƇƈɕᴄＣｃ]",d:"[dĎďḊḋḐḑḌḍḒḓḎḏĐđD̦d̦ƉɖƊɗƋƌᵭᶁᶑȡᴅＤｄð]",e:"[eÉéÈèÊêḘḙĚěĔĕẼẽḚḛẺẻĖėËëĒēȨȩĘęᶒɆɇȄȅẾếỀềỄễỂểḜḝḖḗḔḕȆȇẸẹỆệⱸᴇＥｅɘǝƏƐε]",f:"[fƑƒḞḟ]",g:"[gɢ₲ǤǥĜĝĞğĢģƓɠĠġ]",h:"[hĤĥĦħḨḩẖẖḤḥḢḣɦʰǶƕ]",i:"[iÍíÌìĬĭÎîǏǐÏïḮḯĨĩĮįĪīỈỉȈȉȊȋỊịḬḭƗɨɨ̆ᵻᶖİiIıɪＩｉ]",j:"[jȷĴĵɈɉʝɟʲ]",k:"[kƘƙꝀꝁḰḱǨǩḲḳḴḵκϰ₭]",l:"[lŁłĽľĻļĹĺḶḷḸḹḼḽḺḻĿŀȽƚⱠⱡⱢɫɬᶅɭȴʟＬｌ]",n:"[nŃńǸǹŇňÑñṄṅŅņṆṇṊṋṈṉN̈n̈ƝɲȠƞᵰᶇɳȵɴＮｎŊŋ]",o:"[oØøÖöÓóÒòÔôǑǒŐőŎŏȮȯỌọƟɵƠơỎỏŌōÕõǪǫȌȍՕօ]",p:"[pṔṕṖṗⱣᵽƤƥᵱ]",q:"[qꝖꝗʠɊɋꝘꝙq̃]",r:"[rŔŕɌɍŘřŖŗṘṙȐȑȒȓṚṛⱤɽ]",s:"[sŚśṠṡṢṣꞨꞩŜŝŠšŞşȘșS̈s̈]",t:"[tŤťṪṫŢţṬṭƮʈȚțṰṱṮṯƬƭ]",u:"[uŬŭɄʉỤụÜüÚúÙùÛûǓǔŰűŬŭƯưỦủŪūŨũŲųȔȕ∪]",v:"[vṼṽṾṿƲʋꝞꝟⱱʋ]",w:"[wẂẃẀẁŴŵẄẅẆẇẈẉ]",x:"[xẌẍẊẋχ]",y:"[yÝýỲỳŶŷŸÿỸỹẎẏỴỵɎɏƳƴ]",z:"[zŹźẐẑŽžŻżẒẓẔẕƵƶ]"},o=function(){var t,e,n,r,i="",o={};for(n in s)if(s.hasOwnProperty(n))for(i+=r=s[n].substring(2,s[n].length-1),t=0,e=r.length;t<e;t++)o[r.charAt(t)]=n;var a=new RegExp("["+i+"]","g");return function(t){return t.replace(a,function(t){return o[t]}).toLowerCase()}}();class a{constructor(t,e){this.items=void 0,this.settings=void 0,this.items=t,this.settings=e||{diacritics:!0}}tokenize(t,e){if(!(t=String(t||"").toLowerCase().trim())||!t.length)return[];var n,r,o,a,l=[],c=t.split(/ +/);for(n=0,r=c.length;n<r;n++){if(o=i(c[n]),this.settings.diacritics)for(a in s)s.hasOwnProperty(a)&&(o=o.replace(new RegExp(a,"g"),s[a]));e&&(o="\\b"+o),l.push({string:c[n],regex:new RegExp(o,"i")})}return l}iterator(t,e){(Array.isArray(t)?Array.prototype.forEach||function(t){for(var e=0,n=this.length;e<n;e++)t(this[e],e,this)}:function(t){for(var e in this)this.hasOwnProperty(e)&&t(this[e],e,this)}).apply(t,[e])}getScoreFunction(t,e){var n,i,s,o,a;a=this.prepareSearch(t,e),i=a.tokens,n=a.options.fields,s=i.length,o=a.options.nesting;var l,c=function(t,e){var n,r;return t?-1===(r=(t=String(t||"")).search(e.regex))?0:(n=e.string.length/t.length,0===r&&(n+=.5),n):0},u=(l=n.length)?1===l?function(t,e){return c(r(e,n[0],o),t)}:function(t,e){for(var i=0,s=0;i<l;i++)s+=c(r(e,n[i],o),t);return s/l}:function(){return 0};return s?1===s?function(t){return u(i[0],t)}:"and"===a.options.conjunction?function(t){for(var e,n=0,r=0;n<s;n++){if((e=u(i[n],t))<=0)return 0;r+=e}return r/s}:function(t){for(var e=0,n=0;e<s;e++)n+=u(i[e],t);return n/s}:function(){return 0}}getSortFunction(t,e){var i,s,o,a,l,c,u,d,p,h,f;if(f=!(t=(o=this).prepareSearch(t,e)).query&&e.sort_empty||e.sort,p=function(t,n){return"$score"===t?n.score:r(o.items[n.id],t,e.nesting)},l=[],f)for(i=0,s=f.length;i<s;i++)(t.query||"$score"!==f[i].field)&&l.push(f[i]);if(t.query){for(h=!0,i=0,s=l.length;i<s;i++)if("$score"===l[i].field){h=!1;break}h&&l.unshift({field:"$score",direction:"desc"})}else for(i=0,s=l.length;i<s;i++)if("$score"===l[i].field){l.splice(i,1);break}for(d=[],i=0,s=l.length;i<s;i++)d.push("desc"===l[i].direction?-1:1);return(c=l.length)?1===c?(a=l[0].field,u=d[0],function(t,e){return u*n(p(a,t),p(a,e))}):function(t,e){var r,i,s;for(r=0;r<c;r++)if(s=l[r].field,i=d[r]*n(p(s,t),p(s,e)))return i;return 0}:null}prepareSearch(t,e){if("object"==typeof t)return t;var n=(e=Object.assign({},e)).fields,r=e.sort,i=e.sort_empty;return n&&!Array.isArray(n)&&(e.fields=[n]),r&&!Array.isArray(r)&&(e.sort=[r]),i&&!Array.isArray(i)&&(e.sort_empty=[i]),{options:e,query:String(t||"").toLowerCase(),tokens:this.tokenize(t,e.respect_word_boundaries),total:0,items:[]}}search(t,e){var n,r,i,s;return r=this.prepareSearch(t,e),e=r.options,t=r.query,s=e.score||this.getScoreFunction(r),t.length?this.iterator(this.items,function(t,i){n=s(t),(!1===e.filter||n>0)&&r.items.push({score:n,id:i})}):this.iterator(this.items,function(t,e){r.items.push({score:1,id:e})}),(i=this.getSortFunction(r,e))&&r.items.sort(i),r.total=r.items.length,"number"==typeof e.limit&&(r.items=r.items.slice(0,e.limit)),r}}function l(t,e){if("string"!=typeof e||e.length){var n="string"==typeof e?new RegExp(e,"i"):e;!function t(e){var r=0;if(3===e.nodeType){var i=e.data.search(n);if(i>=0&&e.data.length>0){var s=e.data.match(n),o=document.createElement("span");o.className="highlight";var a=e.splitText(i);a.splitText(s[0].length);var l=a.cloneNode(!0);o.appendChild(l),a.parentNode.replaceChild(o,a),r=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName)&&("highlight"!==e.className||"SPAN"!==e.tagName))for(var c=0;c<e.childNodes.length;++c)c+=t(e.childNodes[c]);return r}(t)}}const c=65,u=13,d=27,p=37,h=38,f=39,g=40,m=8,v=46,y=9,w="undefined"!=typeof navigator&&/Mac/.test(navigator.userAgent)?"metaKey":"ctrlKey";var b={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,closeAfterSelect:!1,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-control",inputClass:"ts-input",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:null,copyClassesToDropdown:!0,placeholder:null,hidePlaceholder:null,shouldLoad:function(t){return t.length>0},render:{}};function x(t){return null==t?null:"boolean"==typeof t?t?"1":"0":t+""}function S(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function O(t,e,n){var r,i=t.trigger,s={};for(r in t.trigger=function(){var n=arguments[0];if(-1===e.indexOf(n))return i.apply(t,arguments);s[n]=arguments},n.apply(t,[]),t.trigger=i,s)i.apply(t,s[r])}function A(t,e=!1){t&&(t.preventDefault(),e&&t.stopPropagation())}function C(t,e,n,r){t.addEventListener(e,n,r)}function k(t,e){return!!e&&!!e[t]&&1==(e.altKey?1:0)+(e.ctrlKey?1:0)+(e.shiftKey?1:0)+(e.metaKey?1:0)}function E(t,e){return t.getAttribute("id")||(t.setAttribute("id",e),e)}function _(t,e){var n=Object.assign({},b,e),r=n.dataAttr,i=n.labelField,s=n.valueField,o=n.disabledField,a=n.optgroupField,l=n.optgroupLabelField,c=n.optgroupValueField,u=t.tagName.toLowerCase(),d=t.getAttribute("placeholder")||t.getAttribute("data-placeholder");if(!d&&!n.allowEmptyOption){let e=t.querySelector('option[value=""]');e&&(d=e.textContent)}var p={placeholder:d,options:[],optgroups:[],items:[],maxItems:null};return"select"===u?(()=>{var e,u=p.options,d={},h=1,f=t=>{var e=Object.assign({},t.dataset),n=r&&e[r];return"string"==typeof n&&n.length&&(e=Object.assign(e,JSON.parse(n))),e},g=(t,e)=>{var r=x(t.value);if(r||n.allowEmptyOption)if(d.hasOwnProperty(r)){if(e){var l=d[r][a];l?Array.isArray(l)?l.push(e):d[r][a]=[l,e]:d[r][a]=e}}else{var c=f(t);c[i]=c[i]||t.textContent,c[s]=c[s]||r,c[o]=c[o]||t.disabled,c[a]=c[a]||e,c.$option=t,d[r]=c,u.push(c),t.selected&&p.items.push(r)}},m=t=>{var e,n;(n=f(t))[l]=n[l]||t.getAttribute("label")||"",n[c]=n[c]||h++,n[o]=n[o]||t.disabled,p.optgroups.push(n),e=n[c];for(const n of t.children)g(n,e)};p.maxItems=t.hasAttribute("multiple")?null:1;for(const n of t.children)"optgroup"===(e=n.tagName.toLowerCase())?m(n):"option"===e&&g(n)})():(()=>{var e,o,a=t.getAttribute(r);if(a){p.options=JSON.parse(a);for(const t of p.options)p.items.push(t[s])}else{var l=t.value.trim()||"";if(!n.allowEmptyOption&&!l.length)return;e=l.split(n.delimiter);for(const t of e)(o={})[i]=t,o[s]=t,p.options.push(o);p.items=e}})(),Object.assign({},b,p,e)}function I(t){if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(t.indexOf("<")>-1){let e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild}return document.querySelector(t)}function P(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!1),t.dispatchEvent(n)}function F(t,e){Object.assign(t.style,e)}function L(t,...e){var n=N(e);(t=T(t)).map(t=>{n.map(e=>{t.classList.add(e)})})}function q(t,...e){var n=N(e);(t=T(t)).map(t=>{n.map(e=>{t.classList.remove(e)})})}function N(t){var e=[];for(let n of t)"string"==typeof n&&(n=n.trim().split(/[\11\12\14\15\40]/)),Array.isArray(n)&&(e=e.concat(n));return e.filter(Boolean)}function T(t){return Array.isArray(t)||(t=[t]),t}function V(t,e,n){if(!n||n.contains(t))for(;t&&t.matches;){if(t.matches(e))return t;t=t.parentNode}}function D(t,e){return e>0?t[t.length-1]:t[0]}function M(t,e){if(!t)return-1;e=e||t.nodeName;for(var n=0;t=t.previousElementSibling;)t.matches(e)&&n++;return n}function j(t,e){for(const n in e)t.setAttribute(n,e[n])}var U=0;class H extends(function(t){return t.plugins={},class extends t{static define(e,n){t.plugins[e]={name:e,fn:n}}initializePlugins(t){var e,n,r,i=[];if(this.plugins={names:[],settings:{},requested:{},loaded:{}},Array.isArray(t))for(e=0,n=t.length;e<n;e++)"string"==typeof t[e]?i.push(t[e]):(this.plugins.settings[t[e].name]=t[e].options,i.push(t[e].name));else if(t)for(r in t)t.hasOwnProperty(r)&&(this.plugins.settings[r]=t[r],i.push(r));for(;i.length;)this.require(i.shift())}loadPlugin(e){var n=this.plugins,r=t.plugins[e];if(!t.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');n.requested[e]=!0,n.loaded[e]=r.fn.apply(this,[this.plugins.settings[e]||{}]),n.names.push(e)}require(t){var e=this.plugins;if(!this.plugins.loaded.hasOwnProperty(t)){if(e.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');this.loadPlugin(t)}return e.loaded[t]}}}(e)){constructor(t,e){var n;super(),this.control_input=void 0,this.wrapper=void 0,this.dropdown=void 0,this.control=void 0,this.dropdown_content=void 0,this.order=0,this.settings=void 0,this.input=void 0,this.tabIndex=void 0,this.is_select_tag=void 0,this.rtl=void 0,this.inputId=void 0,this._destroy=void 0,this.sifter=void 0,this.tab_key=!1,this.isOpen=!1,this.isDisabled=!1,this.isRequired=void 0,this.isInvalid=!1,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreBlur=!1,this.hasOptions=!1,this.currentResults=null,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.options_i=0,this.userOptions={},this.items=[],this.renderCache={item:{},option:{}},U++;var r,i,s,o=I(t);if(o.tomselect)throw new Error("Tom Select already initialized on this element");o.tomselect=this,n=(window.getComputedStyle&&window.getComputedStyle(o,null)).getPropertyValue("direction"),this.settings=_(o,e),this.input=o,this.tabIndex=o.tabIndex||0,this.is_select_tag="select"===o.tagName.toLowerCase(),this.rtl=/rtl/i.test(n),this.inputId=E(o,"tomselect-"+U),this.isRequired=o.required,this.settings.load&&this.settings.loadThrottle&&(this.settings.load=(r=this.settings.load,i=this.settings.loadThrottle,function(t,e){var n=this;s&&(n.loading=Math.max(n.loading-1,0)),clearTimeout(s),s=setTimeout(function(){s=null,n.loadedSearches[t]=!0,r.call(n,t,e)},i)})),this.sifter=new a(this.options,{diacritics:this.settings.diacritics}),this.setupOptions(this.settings.options,this.settings.optgroups),delete this.settings.optgroups,delete this.settings.options,this.settings.mode=this.settings.mode||(1===this.settings.maxItems?"single":"multi"),"boolean"!=typeof this.settings.hideSelected&&(this.settings.hideSelected="multi"===this.settings.mode),"boolean"!=typeof this.settings.hidePlaceholder&&(this.settings.hidePlaceholder="multi"!==this.settings.mode);var l=this.settings.createFilter;"function"!=typeof l&&("string"==typeof l&&(l=new RegExp(l)),l instanceof RegExp?this.settings.createFilter=(t=>l.test(t)):this.settings.createFilter=(()=>!0)),this.initializePlugins(this.settings.plugins),this.setupCallbacks(),this.setupTemplates(),this.setup()}setup(){var t,e,n,r,i,s,o,a,l,c=this,u=c.settings,d=c.input;const p={passive:!0},h=c.inputId+"-ts-dropdown";if(s=c.settings.mode,o=d.getAttribute("class")||"",L(t=I("<div>"),u.wrapperClass,o,s),L(e=I('<div class="items">'),u.inputClass),t.append(e),L(r=c.render("dropdown"),u.dropdownClass,s),L(i=I(`<div role="listbox" id="${h}" tabindex="-1">`),u.dropdownContentClass),r.append(i),I(u.dropdownParent||t).appendChild(r),u.controlInput)n=I(u.controlInput);else{n=I('<input type="text" autocomplete="off" size="1" />');for(const t of["autocorrect","autocapitalize","autocomplete"])d.getAttribute(t)&&j(n,{[t]:d.getAttribute(t)})}u.controlInput||(n.tabIndex=d.disabled?-1:c.tabIndex,e.appendChild(n)),j(n,{role:"combobox",haspopup:"listbox","aria-expanded":"false","aria-controls":h}),l=E(n,c.inputId+"-tomselected");let f="label[for='"+c.inputId.replace(/['"\\]/g,"\\$&")+"']",g=document.querySelector(f);if(g&&(j(g,{for:l}),j(i,{"aria-labelledby":E(g,c.inputId+"-ts-label")})),c.settings.copyClassesToDropdown&&L(r,o),t.style.width=d.style.width,c.plugins.names.length&&(a="plugin-"+c.plugins.names.join(" plugin-"),L([t,r],a)),(null===u.maxItems||u.maxItems>1)&&c.is_select_tag&&j(d,{multiple:"multiple"}),c.settings.placeholder&&j(n,{placeholder:u.placeholder}),!c.settings.splitOn&&c.settings.delimiter){var m=c.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");c.settings.splitOn=new RegExp("\\s*"+m+"+\\s*")}c.control=e,c.control_input=n,c.wrapper=t,c.dropdown=r,c.dropdown_content=i,c.control_input.type=d.type,C(r,"mouseenter",t=>{var e=V(t.target,"[data-selectable]",r);if(e)return c.onOptionHover(t,e)},{capture:!0}),C(e,"mousedown",t=>{if(t.target==n)return c.clearActiveItems(),t.stopPropagation(),void c.inputState();var r=V(t.target,"."+c.settings.itemClass,e);return r?c.onItemSelect(t,r):c.onMouseDown(t)}),C(e,"click",t=>c.onClick(t)),C(n,"keydown",t=>c.onKeyDown(t)),C(n,"keyup",t=>c.onKeyUp(t)),C(n,"keypress",t=>c.onKeyPress(t)),C(n,"resize",()=>c.positionDropdown(),p),C(n,"blur",t=>c.onBlur(t)),C(n,"focus",t=>{c.ignoreBlur=!1,c.onFocus(t)}),C(n,"paste",t=>c.onPaste(t));var v=t=>{var e=V(t.target,"[data-selectable]",c.dropdown);if(!e&&!c.wrapper.contains(t.target))return c.isFocused&&c.blur(),void c.inputState();A(t,!0),e&&c.onOptionSelect(t,e)},y=()=>{c.isOpen&&c.positionDropdown()};C(document,"mousedown",v),C(window,"sroll",y,p),C(window,"resize",y,p),c._destroy=(()=>{document.removeEventListener("mousedown",v),window.removeEventListener("sroll",y),window.removeEventListener("resize",y)}),this.revertSettings={innerHTML:d.innerHTML,tabIndex:d.tabIndex},d.tabIndex=-1,j(d,{hidden:"hidden"}),d.insertAdjacentElement("afterend",c.wrapper),c.setValue(u.items),delete u.items,C(d,"invalid",t=>{A(t),c.isInvalid||(c.isInvalid=!0,c.refreshState())}),c.updateOriginalInput(),c.refreshItems(),c.refreshState(),c.inputState(),c.isSetup=!0,d.disabled&&c.disable(),c.on("change",this.onChange),L(d,"tomselected"),c.trigger("initialize"),!0===u.preload&&c.load("")}setupOptions(t=[],e=[]){for(const e of t)this.registerOption(e);for(const t of e)this.registerOptionGroup(t)}setupTemplates(){var t=this.settings.labelField,e=this.settings.optgroupLabelField,n={optgroup:(t,e)=>{let n=document.createElement("div");return n.className="optgroup",n.appendChild(t.options),n},optgroup_header:(t,n)=>'<div class="optgroup-header">'+n(t[e])+"</div>",option:(e,n)=>"<div>"+n(e[t])+"</div>",item:(e,n)=>"<div>"+n(e[t])+"</div>",option_create:(t,e)=>'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>",no_results:(t,e)=>'<div class="no-results">No results found</div>',loading:(t,e)=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};this.settings.render=Object.assign({},n,this.settings.render)}setupCallbacks(){var t,e,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in n)(e=this.settings[n[t]])&&this.on(t,e)}onClick(t){this.isFocused&&this.isOpen||(this.focus(),A(t))}onMouseDown(t){var e=this;if(e.isFocused)return"single"!==e.settings.mode&&e.setActiveItem(),e.open(),!1;setTimeout(()=>e.focus(),0)}onChange(){P(this.input,"input"),P(this.input,"change")}onPaste(t){var e=this;e.isFull()||e.isInputHidden||e.isLocked?A(t):e.settings.splitOn&&setTimeout(()=>{var t=e.inputValue();if(t.match(e.settings.splitOn)){var n=t.trim().split(e.settings.splitOn);for(const t of n)e.createItem(t)}},0)}onKeyPress(t){if(!this.isLocked){var e=String.fromCharCode(t.keyCode||t.which);return this.settings.create&&"multi"===this.settings.mode&&e===this.settings.delimiter?(this.createItem(),void A(t)):void 0}A(t)}onKeyDown(t){if(this.isLocked)t.keyCode!==y&&A(t);else{switch(t.keyCode){case c:if(k(w,t))return void this.selectAll();break;case d:return this.isOpen&&(A(t,!0),this.close()),void this.clearActiveItems();case g:if(!this.isOpen&&this.hasOptions)this.open();else if(this.activeOption){let t=this.getAdjacent(this.activeOption,1);t&&this.setActiveOption(t)}return void A(t);case h:if(this.activeOption){let t=this.getAdjacent(this.activeOption,-1);t&&this.setActiveOption(t)}return void A(t);case u:return void(this.isOpen&&this.activeOption&&(this.onOptionSelect(t,this.activeOption),A(t)));case p:return void this.advanceSelection(-1,t);case f:return void this.advanceSelection(1,t);case y:return this.settings.selectOnTab&&this.isOpen&&this.activeOption&&(this.tab_key=!0,this.onOptionSelect(t,this.activeOption),A(t),this.tab_key=!1),void(this.settings.create&&this.createItem()&&A(t));case m:case v:return void this.deleteSelection(t)}this.isInputHidden&&!k(w,t)&&A(t)}}onKeyUp(t){if(this.isLocked)A(t);else{var e=this.inputValue();this.lastValue!==e&&(this.lastValue=e,this.settings.shouldLoad.call(this,e)&&this.load(e),this.refreshOptions(),this.trigger("type",e))}}onFocus(t){var e=this.isFocused;if(this.isDisabled)return this.blur(),void A(t);this.ignoreFocus||(this.isFocused=!0,"focus"===this.settings.preload&&this.load(""),e||this.trigger("focus"),this.activeItems.length||(this.showInput(),this.setActiveItem(),this.refreshOptions(!!this.settings.openOnFocus)),this.refreshState())}onBlur(t){var e=this;if(e.isFocused){if(e.isFocused=!1,e.ignoreFocus=!1,!e.ignoreBlur&&document.activeElement===e.dropdown_content)return e.ignoreBlur=!0,void e.onFocus(t);var n=()=>{e.close(),e.setActiveItem(),e.setCaret(e.items.length),e.trigger("blur")};e.settings.create&&e.settings.createOnBlur?e.createItem(null,!1,n):n()}}onOptionHover(t,e){}onOptionSelect(t,e){var n,r=this;e&&(e.parentElement&&e.parentElement.matches("[data-disabled]")||(e.classList.contains("create")?r.createItem(null,!0,()=>{r.settings.closeAfterSelect&&r.close()}):void 0!==(n=e.dataset.value)&&(r.lastQuery=null,r.addItem(n),r.settings.closeAfterSelect?r.close():!r.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&r.setActiveOption(r.getOption(n)))))}onItemSelect(t,e){this.isLocked||"multi"===this.settings.mode&&(A(t),this.setActiveItem(e,t))}load(t){var e=this,n=e.settings.load;n&&(e.loadedSearches.hasOwnProperty(t)||(L(e.wrapper,e.settings.loadingClass),e.loading++,n.call(e,t,function(t,n){e.loading=Math.max(e.loading-1,0),e.lastQuery=null,e.clearActiveOption(),e.setupOptions(t,n),e.refreshOptions(e.isFocused&&!e.isInputHidden),e.loading||q(e.wrapper,e.settings.loadingClass),e.trigger("load",t,n)})))}onSearchChange(t){this.load(t)}setTextboxValue(t=""){var e=this.control_input;e.value!==t&&(e.value=t,P(e,"update"),this.lastValue=t)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(t,e){O(this,e?[]:["change"],()=>{this.clear(e),this.addItems(t,e)})}setMaxItems(t){0===t&&(t=null),this.settings.maxItems=t,this.refreshState()}setActiveItem(t,e){var n,r,i,s,o,a;if("single"!==this.settings.mode){if(!t)return this.clearActiveItems(),void(this.isFocused&&this.showInput());if("mousedown"===(n=e&&e.type.toLowerCase())&&k("shiftKey",e)&&this.activeItems.length){for(a=this.getLastActive(),(i=Array.prototype.indexOf.call(this.control.children,a))>(s=Array.prototype.indexOf.call(this.control.children,t))&&(o=i,i=s,s=o),r=i;r<=s;r++)t=this.control.children[r],-1===this.activeItems.indexOf(t)&&this.setActiveItemClass(t);A(e)}else"mousedown"===n&&k(w,e)||"keydown"===n&&k("shiftKey",e)?t.classList.contains("active")?this.removeActiveItem(t):this.setActiveItemClass(t):(this.clearActiveItems(),this.setActiveItemClass(t));this.hideInput(),this.isFocused||this.focus()}}setActiveItemClass(t){var e=this.control.querySelector(".last-active");e&&q(e,"last-active"),L(t,"active last-active"),-1==this.activeItems.indexOf(t)&&this.activeItems.push(t)}removeActiveItem(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),q(t,"active")}clearActiveItems(){q(this.activeItems,"active"),this.activeItems=[]}setActiveOption(t){var e,n,r;if(t===this.activeOption)return;if(this.clearActiveOption(),!t)return;this.activeOption=t,j(this.control_input,{"aria-activedescendant":t.getAttribute("id")}),j(t,{"aria-selected":"true"}),L(t,"active"),e=this.dropdown_content.clientHeight;let i=this.dropdown_content.scrollTop||0;n=this.activeOption.offsetHeight,(r=this.activeOption.getBoundingClientRect().top-this.dropdown_content.getBoundingClientRect().top+i)+n>e+i?this.dropdown_content.scrollTop=r-e+n:r<i&&(this.dropdown_content.scrollTop=r)}clearActiveOption(){this.activeOption&&(q(this.activeOption,"active"),this.activeOption.removeAttribute("aria-selected")),this.activeOption=null,this.control_input.removeAttribute("aria-activedescendant")}selectAll(){"single"!==this.settings.mode&&(this.activeItems=this.controlChildren(),this.activeItems.length&&(L(this.activeItems,"active"),this.hideInput(),this.close()),this.focus())}inputState(){this.settings.controlInput||(this.activeItems.length>0||!this.isFocused&&this.settings.hidePlaceholder&&this.items.length>0?(this.setTextboxValue(),this.isInputHidden=!0,L(this.wrapper,"input-hidden")):(this.isInputHidden=!1,q(this.wrapper,"input-hidden")))}hideInput(){this.inputState()}showInput(){this.inputState()}inputValue(){return this.control_input.value.trim()}focus(){var t=this;t.isDisabled||(t.ignoreFocus=!0,t.control_input.focus(),setTimeout(()=>{t.ignoreFocus=!1,t.onFocus()},0))}blur(){this.control_input.blur(),this.onBlur(null)}getScoreFunction(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}getSearchOptions(){var t,e=this.settings;return"string"==typeof e.sortField&&(t=[{field:e.sortField}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting}}search(t){var e,n,r,i=this.settings,s=this.getSearchOptions();if(i.score&&"function"!=typeof(r=this.settings.score.call(this,t)))throw new Error('Tom Select "score" setting must be a function that returns a function');if(t!==this.lastQuery?(this.lastQuery=t,n=this.sifter.search(t,Object.assign(s,{score:r})),this.currentResults=n):n=Object.assign({},this.currentResults),i.hideSelected)for(e=n.items.length-1;e>=0;e--)-1!==this.items.indexOf(x(n.items[e].id))&&n.items.splice(e,1);return n}refreshOptions(t=!0){var e,n,r,i,s,o,a,c,u,d,p,h,f,g=this,m=g.inputValue(),v=g.search(m),y=g.activeOption&&x(g.activeOption.dataset.value),w=g.settings.shouldOpen||!1;for(i=v.items.length,"number"==typeof g.settings.maxOptions&&(i=Math.min(i,g.settings.maxOptions)),i>0&&(w=!0),h={},s=[],e=0;e<i;e++){let t=g.options[v.items[e].id],i=x(t[g.settings.valueField]),l=g.getOption(i);for(l||(l=g.render("option",t)),g.settings.hideSelected||l.classList.toggle("selected",g.items.includes(i)),o=t[g.settings.optgroupField]||"",n=0,r=(a=Array.isArray(o)?o:[o])&&a.length;n<r;n++)o=a[n],g.optgroups.hasOwnProperty(o)||(o=""),h.hasOwnProperty(o)||(h[o]=document.createDocumentFragment(),s.push(o)),n>0&&(q(l=l.cloneNode(!0),"active"),l.removeAttribute("aria-selected")),h[o].appendChild(l)}for(o of(this.settings.lockOptgroupOrder&&s.sort((t,e)=>(g.optgroups[t]&&g.optgroups[t].$order||0)-(g.optgroups[e]&&g.optgroups[e].$order||0)),c=document.createDocumentFragment(),s))if(g.optgroups.hasOwnProperty(o)&&h[o].children.length){let t=document.createDocumentFragment();t.appendChild(g.render("optgroup_header",g.optgroups[o])),t.appendChild(h[o]);let e=g.render("optgroup",{group:g.optgroups[o],options:t});c.appendChild(e)}else c.appendChild(h[o]);if(g.dropdown_content.innerHTML="",g.dropdown_content.appendChild(c),g.settings.highlight&&(g.dropdown_content,f=document.querySelectorAll("span.highlight"),Array.prototype.forEach.call(f,function(t,e){var n=t.parentNode;n.replaceChild(t.firstChild,t),n.normalize()}),v.query.length&&v.tokens.length))for(const t of v.tokens)l(g.dropdown_content,t.regex);var b=t=>{let e=g.render(t,{input:m});return e&&(w=!0,g.dropdown_content.insertBefore(e,g.dropdown_content.firstChild)),e};if(g.settings.shouldLoad.call(g,m)?g.loading?b("loading"):0===v.items.length&&b("no_results"):b("not_loading"),(u=g.canCreate(m))&&(p=b("option_create")),g.hasOptions=v.items.length>0||u,w){if(v.items.length>0){if(!(d=y&&g.getOption(y))||!g.dropdown_content.contains(d)){let t=0;p&&!g.settings.addPrecedence&&(t=1),d=g.selectable()[t]}}else d=p;g.setActiveOption(d),t&&!g.isOpen&&g.open()}else g.clearActiveOption(),t&&g.isOpen&&g.close()}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(t){var e;if(Array.isArray(t))for(const e of t)this.addOption(e);else(e=this.registerOption(t))&&(this.userOptions[e]=!0,this.lastQuery=null,this.trigger("option_add",e,t))}registerOption(t){var e=x(t[this.settings.valueField]);return null!==e&&!this.options.hasOwnProperty(e)&&(t.$order=t.$order||++this.order,t.$id=this.inputId+"-opt-"+this.options_i++,this.options[e]=t,e)}registerOptionGroup(t){var e=x(t[this.settings.optgroupValueField]);return null!==e&&(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)}addOptionGroup(t,e){var n;e[this.settings.optgroupValueField]=t,(n=this.registerOptionGroup(e))&&this.trigger("optgroup_add",n,e)}removeOptionGroup(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(t,e){var n,r,i,s,o,a,l;if(t=x(t),i=x(e[this.settings.valueField]),null!==t&&this.options.hasOwnProperty(t)){if("string"!=typeof i)throw new Error("Value must be set in option data");l=this.options[t].$order,i!==t&&(delete this.options[t],-1!==(s=this.items.indexOf(t))&&this.items.splice(s,1,i)),e.$order=e.$order||l,this.options[i]=e,o=this.renderCache.item,a=this.renderCache.option,o&&(delete o[t],delete o[i]),a&&(delete a[t],delete a[i]),-1!==this.items.indexOf(i)&&(n=this.getItem(t),r=this.render("item",e),n.classList.contains("active")&&L(r,"active"),n.parentNode.insertBefore(r,n),n.remove()),this.lastQuery=null,this.isOpen&&this.refreshOptions(!1)}}removeOption(t,e){t=x(t);var n=this.renderCache.item,r=this.renderCache.option;n&&delete n[t],r&&delete r[t],delete this.userOptions[t],delete this.options[t],this.lastQuery=null,this.trigger("option_remove",t),this.removeItem(t,e)}clearOptions(){this.loadedSearches={},this.userOptions={},this.clearCache();var t={};for(let e in this.options)this.options.hasOwnProperty(e)&&this.items.indexOf(e)>=0&&(t[e]=this.options[e]);this.options=this.sifter.items=t,this.lastQuery=null,this.trigger("option_clear")}getOption(t){return this.renderCache.option.hasOwnProperty(t)?this.renderCache.option[t]:this.getElementWithValue(t,this.selectable())}getAdjacent(t,e,n="option"){var r;if(t){r="item"==n?this.controlChildren():this.dropdown_content.querySelectorAll("[data-selectable]");for(let n=0;n<r.length;n++)if(r[n]==t)return e>0?r[n+1]:r[n-1]}}getElementWithValue(t,e){if(null!==(t=x(t)))for(const n of e){let e=n;if(e.getAttribute("data-value")===t)return e}}getItem(t){return this.getElementWithValue(t,this.control.children)}addItems(t,e){var n=this;n.buffer=document.createDocumentFragment();for(const t of n.control.children)n.buffer.appendChild(t);var r=Array.isArray(t)?t:[t];for(let t=0,i=(r=r.filter(t=>-1===n.items.indexOf(t))).length;t<i;t++)n.isPending=t<i-1,n.addItem(r[t],e);var i=n.control;i.insertBefore(n.buffer,i.firstChild),n.buffer=null}addItem(t,e){O(this,e?[]:["change"],()=>{var n,r,i=this.settings.mode;if(t=x(t),(-1===this.items.indexOf(t)||("single"===i&&this.close(),"single"!==i&&this.settings.duplicates))&&this.options.hasOwnProperty(t)&&("single"===i&&this.clear(e),"multi"!==i||!this.isFull())){if(n=this.render("item",this.options[t]),this.control.contains(n)&&(n=n.cloneNode(!0)),r=this.isFull(),this.items.splice(this.caretPos,0,t),this.insertAtCaret(n),this.isSetup){let r=this.selectable();if(!this.isPending){let e=this.getOption(t),n=this.getAdjacent(e,1);this.refreshOptions(this.isFocused&&"single"!==i),n&&this.setActiveOption(n)}!r.length||this.isFull()?this.close():this.isPending||this.positionDropdown(),this.trigger("item_add",t,n),this.isPending||this.updateOriginalInput({silent:e})}(!this.isPending||!r&&this.isFull())&&this.refreshState()}})}removeItem(t,e){var n,r,i=this.getItem(t);i&&(t=x(i.dataset.value),-1!==(n=this.items.indexOf(t))&&(i.remove(),i.classList.contains("active")&&(r=this.activeItems.indexOf(i),this.activeItems.splice(r,1),q(i,"active")),this.items.splice(n,1),this.lastQuery=null,!this.settings.persist&&this.userOptions.hasOwnProperty(t)&&this.removeOption(t,e),n<this.caretPos&&this.setCaret(this.caretPos-1),this.updateOriginalInput({silent:e}),this.refreshState(),this.positionDropdown(),this.trigger("item_remove",t,i)))}createItem(t,e=!0,n){var r,i=this,s=i.caretPos;if(t=t||i.inputValue(),"function"!=typeof n&&(n=(()=>{})),!i.canCreate(t))return n(),!1;i.lock();var o=!1,a=t=>{if(i.unlock(),!t||"object"!=typeof t)return n();var r=x(t[i.settings.valueField]);if("string"!=typeof r)return n();i.setTextboxValue(),i.addOption(t),i.setCaret(s),i.addItem(r),i.refreshOptions(e&&"single"!==i.settings.mode),n(t),o=!0};return r="function"==typeof i.settings.create?i.settings.create.call(this,t,a):{[i.settings.labelField]:t,[i.settings.valueField]:t},o||a(r),!0}refreshItems(){this.lastQuery=null,this.isSetup&&this.addItems(this.items),this.updateOriginalInput(),this.refreshState()}refreshState(){this.refreshValidityState();var t=this.isFull(),e=this.isLocked;this.wrapper.classList.toggle("rtl",this.rtl);var n,r=this.control.classList;r.toggle("focus",this.isFocused),r.toggle("disabled",this.isDisabled),r.toggle("required",this.isRequired),r.toggle("invalid",this.isInvalid),r.toggle("locked",e),r.toggle("full",t),r.toggle("not-full",!t),r.toggle("input-active",this.isFocused&&!this.isInputHidden),r.toggle("dropdown-active",this.isOpen),r.toggle("has-options",(n=this.options,0===Object.keys(n).length)),r.toggle("has-items",this.items.length>0)}refreshValidityState(){if(this.input.checkValidity){this.isRequired&&(this.input.required=!0);var t=!this.input.checkValidity();this.isInvalid=t,this.control_input.required=t,this.isRequired&&(this.input.required=!t)}}isFull(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems}updateOriginalInput(t={}){var e,n,r=this;if(r.is_select_tag)for(r.input.querySelectorAll("option[selected]").forEach(t=>{-1==r.items.indexOf(t.value)&&(t.selected=!1,t.removeAttribute("selected"))}),e=r.items.length-1;e>=0;e--){var i;if(n=r.items[e],!(i=r.options[n].$option)){const t=r.options[n][r.settings.labelField]||"";i=I('<option value="'+S(n)+'">'+S(t)+"</option>"),r.options[n].$option=i}i.selected=!0,j(i,{selected:"true"}),r.input.prepend(i)}else r.input.value=r.getValue();r.isSetup&&(t.silent||r.trigger("change",r.getValue()))}open(){this.isLocked||this.isOpen||"multi"===this.settings.mode&&this.isFull()||(this.isOpen=!0,j(this.control_input,{"aria-expanded":"true"}),this.refreshState(),F(this.dropdown,{visibility:"hidden",display:"block"}),this.positionDropdown(),F(this.dropdown,{visibility:"visible",display:"block"}),this.focus(),this.trigger("dropdown_open",this.dropdown))}close(){var t=this.isOpen;this.setTextboxValue(),"single"===this.settings.mode&&this.items.length&&(this.hideInput(),this.tab_key||this.blur()),this.isOpen=!1,j(this.control_input,{"aria-expanded":"false"}),F(this.dropdown,{display:"none"}),this.clearActiveOption(),this.refreshState(),t&&this.trigger("dropdown_close",this.dropdown)}positionDropdown(){if("body"===this.settings.dropdownParent){var t=this.control,e=t.getBoundingClientRect(),n=t.offsetHeight+e.top+window.scrollY,r=e.left+window.scrollX;F(this.dropdown,{width:e.width+"px",top:n+"px",left:r+"px"})}}clear(t){if(this.items.length){var e=this.controlChildren();for(const t of e)t.remove();this.items=[],this.lastQuery=null,this.setCaret(0),this.setActiveItem(),this.updateOriginalInput({silent:t}),this.refreshState(),this.showInput(),this.trigger("clear")}}insertAtCaret(t){var e=Math.min(this.caretPos,this.items.length),n=this.buffer||this.control;0===e?n.insertBefore(t,n.firstChild):n.insertBefore(t,n.children[e]),this.setCaret(e+1)}deleteSelection(t){var e,n,r,i,s;if(e=t&&t.keyCode===m?-1:1,n={start:(s=this.control_input).selectionStart,length:s.selectionEnd-s.selectionStart},r=[],this.activeItems.length){i=M(D(this.activeItems,e)),e>0&&i++;for(const t of this.activeItems)r.push(t.dataset.value)}else(this.isFocused||"single"===this.settings.mode)&&this.items.length&&(e<0&&0===n.start&&0===n.length?r.push(this.items[this.caretPos-1]):e>0&&n.start===this.inputValue().length&&r.push(this.items[this.caretPos]));if(!r.length||"function"==typeof this.settings.onDelete&&!1===this.settings.onDelete.call(this,r,t))return!1;for(A(t,!0),void 0!==i&&this.setCaret(i);r.length;)this.removeItem(r.pop());return this.showInput(),this.positionDropdown(),this.refreshOptions(!1),!0}advanceSelection(t,e){var n,r,i;this.rtl&&(t*=-1),this.inputValue().length||(k(w,e)||k("shiftKey",e)?(i=(r=this.getLastActive(t))?r.classList.contains("active")?this.getAdjacent(r,t,"item"):r:t>0?this.control_input.nextElementSibling:this.control_input.previousElementSibling)&&(i.classList.contains("active")&&this.removeActiveItem(r),this.setActiveItemClass(i)):this.isFocused&&!this.activeItems.length?this.setCaret(this.caretPos+t):(r=this.getLastActive(t))&&(n=M(r),this.setCaret(t>0?n+1:n),this.setActiveItem()))}getLastActive(t){let e=this.control.querySelector(".last-active");if(e)return e;var n=this.control.querySelectorAll(".active");return n?D(n,t):void 0}setCaret(t){var e=this;"single"===e.settings.mode||e.settings.controlInput?t=e.items.length:(t=Math.max(0,Math.min(e.items.length,t)))==e.caretPos||e.isPending||e.controlChildren().forEach((n,r)=>{r<t?e.control_input.insertAdjacentElement("beforebegin",n):e.control.appendChild(n)}),e.caretPos=t}controlChildren(){return Array.from(this.control.getElementsByClassName(this.settings.itemClass))}lock(){this.close(),this.isLocked=!0,this.refreshState()}unlock(){this.isLocked=!1,this.refreshState()}disable(){this.input.disabled=!0,this.control_input.disabled=!0,this.control_input.tabIndex=-1,this.isDisabled=!0,this.lock()}enable(){this.input.disabled=!1,this.control_input.disabled=!1,this.control_input.tabIndex=this.tabIndex,this.isDisabled=!1,this.unlock()}destroy(){var t=this.revertSettings;this.trigger("destroy"),this.off(),this.wrapper.remove(),this.dropdown.remove(),this.input.innerHTML=t.innerHTML,this.input.tabIndex=t.tabIndex,q(this.input,"tomselected"),this.input.removeAttribute("hidden"),this.input.required=this.isRequired,this._destroy(),delete this.input.tomselect}render(t,e){var n,r;if(("option"===t||"item"===t)&&(n=x(e[this.settings.valueField]),this.renderCache[t].hasOwnProperty(n)))return this.renderCache[t][n];var i=this.settings.render[t];return"function"!=typeof i?null:(r=i.call(this,e,S))?(r=I(r),"option"===t||"option_create"===t?e[this.settings.disabledField]?j(r,{"aria-disabled":"true"}):j(r,{"data-selectable":""}):"optgroup"===t&&(j(r,{"data-group":e.group[this.settings.optgroupValueField]}),e.group[this.settings.disabledField]&&j(r,{"data-disabled":""})),"option"!==t&&"item"!==t||(j(r,{"data-value":n}),"item"===t?L(r,this.settings.itemClass):(L(r,this.settings.optionClass),j(r,{role:"option",id:e.$id})),this.renderCache[t][n]=r),r):r}clearCache(t){void 0===t?this.renderCache={item:{},option:{}}:this.renderCache[t]={}}canCreate(t){return this.settings.create&&t.length&&this.settings.createFilter.call(this,t)}hook(t,e,n){var r=this,i=r[e];r[e]=function(){var e,s;return"after"===t&&(e=i.apply(r,arguments)),s=n.apply(r,arguments),"instead"===t?s:("before"===t&&(e=i.apply(r,arguments)),e)}}}return H.define("change_listener",function(t){var e=this,n=!1;C(e.input,"change",()=>{if(n)n=!1;else{n=!0;var t=_(e.input,{});e.setupOptions(t.options,t.optgroups),e.setValue(t.items)}})}),H.define("checkbox_options",function(t){var e=this,n=e.onOptionSelect;e.settings.hideSelected=!1;var r=function(t){var e=t.querySelector("input");t.classList.contains("selected")?e.checked=!0:e.checked=!1};e.hook("after","setupTemplates",()=>{var t=e.settings.render.option;e.settings.render.option=function(n){var r=I(t.apply(e,arguments)),i=document.createElement("input");i.addEventListener("click",function(t){A(t)}),i.type="checkbox";var s=x(n[e.settings.valueField]);return e.items.indexOf(s)>-1&&(i.checked=!0),r.prepend(i),r}}),e.on("item_remove",t=>{var n=e.getOption(t);n&&(n.classList.remove("selected"),r(n))}),e.hook("instead","onOptionSelect",function(t,r){return r.classList.contains("selected")?(r.classList.remove("selected"),e.removeItem(r.dataset.value),e.refreshOptions(),void A(t,!0)):n.apply(e,arguments)}),e.hook("after","onOptionSelect",(t,e)=>{r(e)})}),H.define("clear_button",function(t){var e=this;t=Object.assign({className:"clear-button",title:"Clear All",html:t=>`<div class="${t.className}" title="${t.title}">&times;</div>`},t),e.hook("after","setup",()=>{var n=I(t.html(t));n.addEventListener("click",t=>{for(;e.items.length>0;)e.removeItem(e.items[0],!0);e.updateOriginalInput(),t.preventDefault(),t.stopPropagation()}),e.control.appendChild(n)})}),H.define("drag_drop",function(t){var e=this;if(!$.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===e.settings.mode){var n=e.lock,r=e.unlock;e.hook("instead","lock",function(){var t=e.control.dataset.sortable;return t&&t.disable(),n.apply(e,arguments)}),e.hook("instead","unlock",function(){var t=e.control.dataset.sortable;return t&&t.enable(),r.apply(e,arguments)}),e.hook("after","setup",()=>{var t=$(e.control).sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:e.isLocked,start:(e,n)=>{n.placeholder.css("width",n.helper.css("width")),t.css({overflow:"visible"})},stop:()=>{t.css({overflow:"hidden"});var n=[];t.children("[data-value]").each(function(){n.push($(this).attr("data-value"))}),e.setValue(n)}})})}}),H.define("dropdown_header",function(t){var e=this;t=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:t=>'<div class="'+t.headerClass+'"><div class="'+t.titleRowClass+'"><span class="'+t.labelClass+'">'+t.title+'</span><a class="'+t.closeClass+'">&times;</a></div></div>'},t),e.hook("after","setup",()=>{var n=I(t.html(t)),r=n.querySelector("."+t.closeClass);r&&r.addEventListener("click",t=>{A(t,!0),e.close()}),e.dropdown.insertBefore(n,e.dropdown.firstChild)})}),H.define("dropdown_input",function(){var t=this,e=t.settings.controlInput||'<input type="text" autocomplete="off" class="dropdown-input" />';e=I(e),t.settings.placeholder&&j(e,{placeholder:t.settings.placeholder}),t.settings.controlInput=e,t.settings.shouldOpen=!0,t.hook("after","setup",()=>{j(t.wrapper,{tabindex:t.input.disabled?"-1":t.tabIndex}),C(t.wrapper,"keypress",e=>{if(!t.control.contains(e.target)&&!t.dropdown.contains(e.target))switch(e.keyCode){case u:return void t.onClick(e)}});let n=I('<div class="dropdown-input-wrap">');n.appendChild(e),t.dropdown.insertBefore(n,t.dropdown.firstChild)})}),H.define("input_autogrow",function(){var t=this;t.hook("after","setup",()=>{var e=document.createElement("span"),n=t.control_input;e.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",t.wrapper.appendChild(e);for(const t of["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"])e.style[t]=n.style[t];var r=()=>{t.items.length>0?(e.textContent=n.value,n.style.width=e.clientWidth+"px"):n.style.width=""};r(),t.on("update item_add item_remove",r),C(n,"input",r),C(n,"keyup",r),C(n,"blur",r),C(n,"update",r)})}),H.define("no_backspace_delete",function(){var t=this,e=t.deleteSelection;this.hook("instead","deleteSelection",function(){return!!t.activeItems.length&&e.apply(t,arguments)})}),H.define("no_active_items",function(t){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}),H.define("optgroup_columns",function(){var t=this,e=t.onKeyDown;t.hook("instead","onKeyDown",function(n){var r,i,s,o;if(!t.isOpen||n.keyCode!==p&&n.keyCode!==f)return e.apply(t,arguments);o=V(t.activeOption,"[data-group]"),r=M(t.activeOption,"[data-selectable]"),(o=n.keyCode===p?o.previousSibling:o.nextSibling)&&(i=(s=o.querySelectorAll("[data-selectable]"))[Math.min(s.length-1,r)])&&t.setActiveOption(i)})}),H.define("remove_button",function(t){t=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},t);var e=this;if(t.append){var n='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+S(t.title)+'">'+t.label+"</a>";e.hook("after","setupTemplates",()=>{var t=e.settings.render.item;e.settings.render.item=function(){var r=I(t.apply(e,arguments)),i=I(n);return r.appendChild(i),C(i,"mousedown",t=>{A(t,!0)}),C(i,"click",t=>{if(A(t,!0),!e.isLocked){var n=r.dataset.value;e.removeItem(n),e.refreshOptions(!1)}}),r}})}}),H.define("restore_on_backspace",function(t){var e=this;t.text=t.text||function(t){return t[e.settings.labelField]},e.on("item_remove",function(n){if(""===e.control_input.value.trim()){var r=e.options[n];r&&e.setTextboxValue(t.text.call(e,r))}})}),H});var tomSelect=function(t,e){return new TomSelect(t,e)};const app={};if(app.compare=(async()=>{new TomSelect("#select-players",{maxItems:8,plugins:{remove_button:{title:"Remove"}},persist:!1}),document.addEventListener("click",function(t){t.target.matches(".player-comparison__group-title")&&(t.preventDefault(),t.target.parentElement.parentElement.classList.toggle("active"))},!1);const t=document.querySelector(".player-comparison__stats.name-area");new IntersectionObserver(([t])=>t.target.classList.toggle("isSticky",t.intersectionRatio<1),{threshold:[1]}).observe(t);let e=document.querySelector(".player-comparison__select-wrapper");e.querySelector("button").addEventListener("click",async t=>{t.preventDefault();let n=e.querySelector("select").selectedOptions,r=Array.from(n).map(({value:t})=>t),i=await fetch("/compare/data",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Cache-Control":"no-cache"},body:JSON.stringify(r)}),s=await i.json();s&&(await async function(t){document.querySelectorAll(".player-value").forEach(t=>t.remove());for(let e in t){t[e].player;for(let n in t[e]){let r=t[e][n];if(document.querySelector("."+n)){let t=document.createElement("div");t.classList.add("player-value"),t.innerText=r,util.insertAfter(t,document.querySelector("."+n+" .label"))}}}}(s),await async function(){document.querySelectorAll(".row:not(.player)").forEach(t=>{let e={},n=t.querySelector(".label").innerText;t.querySelectorAll(".player-value").forEach(r=>{let i=function(t){if(/^([0-9][0-9]):[0-5][0-9]$/.test(t)){let e=t.replace(":",".");return parseFloat(e)}if(t.match(/\d+:[0-5]\d/)){let e=t.split(":");return 60*+e[0]*60+60*+e[1]+ +e[2]}return parseFloat(t)}(r.innerText);e.hasOwnProperty(n)?i>=e[n]&&(i>e[n]&&t.querySelectorAll(".highlight").forEach(t=>t.classList.remove("highlight")),r.classList.add("highlight"),e[n]=i):(e[n]=i,r.classList.add("highlight"))})})}(),document.querySelector(".compare-results").style.display="block")})}),document.querySelector(".player-comparison__select")&&app.compare(),app.filters=(async()=>{function t(t){document.querySelector(".drop-down_list.active")&&document.querySelector(".drop-down_list.active").classList.remove("active"),t.querySelector(".drop-down_list").classList.add("active"),document.body.addEventListener("click",function e(n){util.findParentBySelector(n.target,".drop-down")||(t.querySelector(".drop-down_list").classList.remove("active"),document.body.removeEventListener("click",e))})}!function(){let t=document.querySelector(".drop-down.elo .value").innerText.split("-");const e=document.getElementById("slider");let n=new URLSearchParams(window.location.search),r=n.get("elo")?n.get("elo").split("-"):[t[0],t[1]];noUiSlider.create(e,{start:r,connect:!0,tooltips:!0,format:wNumb({decimals:0}),step:50,range:{min:0,max:3e3}}),e.noUiSlider.on("update",function(){let t=e.noUiSlider.get(),n=document.querySelector(".drop-down.elo");n.querySelector(".drop-down_current .value").innerText=t[0]+"-"+t[1]})}(),function(){const t=document.getElementById("slider-game");let e=new URLSearchParams(window.location.search),n=e.get("games")?e.get("games"):document.querySelector(".drop-down.game .value").innerText;noUiSlider.create(t,{start:n,connect:!0,tooltips:!0,format:wNumb({decimals:0}),step:1,range:{min:1,max:1e3}}),t.noUiSlider.on("update",function(){let e=document.querySelector(".drop-down.game");e.querySelector(".drop-down_current .value").innerText=t.noUiSlider.get()})}(),function(){document.querySelector(".season").addEventListener("change",t=>{let e=[],n=document.querySelectorAll(".season input:not(input[value=all])"),r=document.querySelector(".season .value"),i=document.querySelector('.season input[value="all"]');if(i.checked){r.innerText="All";for(const t of n)t.disabled=!0,t.checked=!1}else{r.innerText="-";for(const t of n)t.disabled=!1,t.checked&&e.push(t.parentNode.querySelector("label").innerText)}e.length>0&&(r.innerText=e.join(", "))});let t=new URLSearchParams(window.location.search),e=!!t.get("season")&&t.get("season").split(",");document.querySelector(".season .value");if(e){for(let t of e)document.querySelector(`.season input[value='${t}']`).checked=!0;document.querySelector('.season input[value="all"]').click()}}(),function(){document.querySelector(".map").addEventListener("change",t=>{let e=[],n=document.querySelectorAll(".map input:not(input[value=all])"),r=document.querySelector(".map .value"),i=document.querySelector('.map input[value="all"]');if(i.checked){r.innerText="All";for(const t of n)t.disabled=!0,t.checked=!1}else{r.innerText="-";for(const t of n)t.disabled=!1,t.checked&&e.push(t.parentNode.querySelector("label").innerText)}e.length>0&&(r.innerText=e.join(", "))});let t=new URLSearchParams(window.location.search),e=!!t.get("map")&&t.get("map").split(",");document.querySelector(".map .value");if(e){for(let t of e)document.querySelector(`.map input[value='${t}']`).checked=!0;document.querySelector('.map input[value="all"]').click()}}(),document.querySelector(".page-filter").addEventListener("click",e=>{let n=util.findParentBySelector(e.target,".season"),r=util.findParentBySelector(e.target,".elo"),i=util.findParentBySelector(e.target,".map"),s=util.findParentBySelector(e.target,".game"),o=util.findParentBySelector(e.target,".filter-submit button");if(n)t(n);else if(r)t(r);else if(i)t(i);else if(s)t(s);else if(o){let t=[],e=slider.noUiSlider.get();t.push(`elo=${e[0]}-${e[1]}`);let n=[];for(const t of document.querySelectorAll(".season input:checked"))n.push(t.value);"all"!=n[0]&&n.length>0&&t.push(`season=${n.join(",")}`);let r=[];for(const t of document.querySelectorAll(".map input:checked"))r.push(t.value);"all"!=r[0]&&r.length>0&&t.push(`map=${r.join(",")}`),t.push(`games=${document.querySelector(".drop-down.game .value").innerText}`);const i=window.location.origin+window.location.pathname;window.location.href=i+"?"+t.join("&")}})}),document.querySelector(".page-filter")&&app.filters(),app.radar=(async()=>{var t=d3.scale.ordinal().range(["#9eb36f","#cadd9e","#f2efbe","#e3bf6b","#c87572"]),e=[4,8,12,16,20],n=d3.select(".radar").append("svg").attr("width",360).attr("height",300).append("g").attr("transform","translate(180,150)"),r={data:[{skill:"Prevent",count:radar.prevent>20?20:radar.prevent},{skill:"Returns",count:radar.return>20?20:radar.return},{skill:"Tags",count:radar.tag},{skill:"Hold",count:radar.hold},{skill:"Caps",count:radar.cap},{skill:"Grabs",count:radar.grab},{skill:"MMR",count:radar.rank<0?0:radar.rank>20?20:radar.rank},{skill:"Pups",count:radar.pup}]},s=r.data.length,o=d3.scale.linear().domain([0,20]).range([0,110]),a=d3.svg.line.radial().interpolate("linear-closed").radius(function(t){return o(t.count)}).angle(function(t,e){return 2*e*Math.PI/s}),l=d3.svg.area.radial().interpolate(a.interpolate()).innerRadius(o(0)).outerRadius(a.radius()).angle(a.angle());e.sort(function(t,e){return e-t});n.selectAll(".tickPath").data(e).enter().append("path").attr("class","tickPath").attr("d",function(t){var e=[];for(i=0;i<s;i++)e.push({count:t});return l(e)}).style("fill",function(e){return t(e)});var c=n.selectAll("line").data(r.data).enter().append("g").attr("class","lines");c.append("line").attr("y2",-110).style("stroke","#00000029").style("stroke-width",".5px").attr("transform",function(t,e){return"rotate("+360*e/s+")"}),c.append("text").attr("class","names").attr("x",function(t,e){return 120*Math.sin(2*e*Math.PI/s)}).attr("y",function(t,e){return"Prevent"==t.skill?-118:-125*Math.cos(2*e*Math.PI/s)}).attr("text-anchor",function(t,e){return 0===e||e===s/2?"middle":e<=s/2?"begin":"end"}).text(function(t){return t.skill}),layer=n.selectAll(".season1").data([r]).enter().append("path").attr("class","season1").attr("d",function(t){return l(t.data)}).attr("fill","none").attr("stroke-width","2px")}),document.querySelector(".radar")&&app.radar(),app.chartMonth=(async()=>{!function(){let t=monthwonlost.map(function(t){return parseFloat(t.won)}),e=monthwonlost.map(function(t){return parseFloat(t.lost)}),n=monthwonlost.map(function(t){return t.monthyear});(function(t,e,n,r,i,s){var o=d3.range(11).map(function(t){return{x1:0,y1:0,x2:0,y2:45*i.length}}),a=d3.scale.linear().domain([0,100]).range([0,n]),l=d3.scale.linear().domain([0,11]).range([0,r]),c=(d3.scale.quantize().domain([0,i.length]).range(s),d3.select(".monthwrap").append("svg").attr({width:n+160,height:r+80})),u=(c.append("g").attr("id","grid_chartMonth").attr("transform","translate(80,80)").selectAll("line").data(o).enter().append("line").attr({x1:function(t,e){return a(10*e)},y1:function(t){return t.y1},x2:function(t,e){return a(10*e)},y2:function(t){return t.y2}}).style({stroke:"#dadada","stroke-width":"1px"}),d3.svg.axis());u.orient("bottom").scale(a).tickFormat(function(t,e){return t+"%"}).tickValues([0,10,20,30,40,50,60,70,80,90,100]);var d=d3.svg.axis();d.orient("left").scale(l).tickSize(0).tickFormat(function(t,e){return i[e]}).tickValues(d3.range(12));c.append("g").attr("transform","translate(70, 105)").attr("id","yaxis_chartMonth").call(d),c.append("g").attr("transform","translate(80, 55)").attr("id","xaxis_chartMonth").call(u),c.append("g").attr("transform","translate(80, 90)").attr("id","wonbars").selectAll("rect").data(e).enter().append("rect").attr("height",function(t){return 30}).attr({x:function(t){return 0},y:function(t,e){return l(e)}}).style("fill",function(t,e){return s[1]}).attr("width",function(t){return 0}),c.append("g").attr("transform","translate(80, 90)").attr("id","wonperc").selectAll("text").data(e).enter().append("text").text(function(t){return t>16?t.toFixed(2)+"%":""}).attr("x",function(t,e){return a(t)-55}).attr("y",function(t,e){return l(e)+20}),c.append("g").attr("transform","translate(80,90)").attr("id","lossbars").selectAll("rect").data(t).enter().append("rect").attr("height",function(t){return 30}).attr({x:function(t){return n-a(t)},y:function(t,e){return l(e)}}).style("fill",function(t,e){return s[0]}).attr("width",function(t){return 0}),c.append("g").attr("transform","translate(80, 90)").attr("id","lossperc").selectAll("text").data(t).enter().append("text").text(function(t){return t>16?t.toFixed(2)+"%":""}).attr("x",function(t,e){return n-a(t)+10}).attr("y",function(t,e){return l(e)+20}).attr("fill","#fff"),c.append("g").attr("transform","translate(10,10)").selectAll("rect").data(["Win","Loss"]).enter().append("rect").attr({width:50,height:15,x:function(t,e){return 60*e},y:0}).style("fill",function(t,e){return s[s.length-1-e]}),c.append("g").attr("transform","translate(20,10)").selectAll("text").data(["Win","Loss"]).enter().append("text").text(function(t){return t}).attr({x:function(t,e){return 60*e},y:32});d3.select(".monthwrap svg").selectAll("#wonbars rect").data(e).attr("width",function(t){return a(t)}),d3.select(".monthwrap svg").selectAll("#lossbars rect").data(t).attr("width",function(t){return a(t)})})(e,t,document.querySelector(".monthwrap").clientWidth-110,500,n,["#ff5454","#a9d645"])}()}),app.chartDay=(async()=>{!function(){let t=daywonlost.map(function(t){return parseFloat(t.won)}),e=daywonlost.map(function(t){return parseFloat(t.lost)}),n=daywonlost.map(function(t){return t.day});(function(t,e,n,r,i,s){var o=d3.range(11).map(function(t){return{x1:0,y1:0,x2:0,y2:44*i.length}}),a=d3.scale.linear().domain([0,100]).range([0,n]),l=d3.scale.linear().domain([0,11]).range([0,r]),c=(d3.scale.quantize().domain([0,i.length]).range(s),d3.select(".daywrap").append("svg").attr({width:n+160,height:440})),u=(c.append("g").attr("id","grid_chartHour").attr("transform","translate(80,80)").selectAll("line").data(o).enter().append("line").attr({x1:function(t,e){return a(10*e)},y1:function(t){return t.y1},x2:function(t,e){return a(10*e)},y2:function(t){return t.y2}}).style({stroke:"#dadada","stroke-width":"1px"}),d3.svg.axis());u.orient("bottom").scale(a).tickFormat(function(t,e){return t+"%"}).tickValues([0,10,20,30,40,50,60,70,80,90,100]);var d=d3.svg.axis();d.orient("left").scale(l).tickSize(0).tickFormat(function(t,e){return i[e]}).tickValues(d3.range(12));c.append("g").attr("transform","translate(70, 105)").attr("id","yaxis_chartHour").call(d),c.append("g").attr("transform","translate(80, 55)").attr("id","xaxis_chartHour").call(u),c.append("g").attr("transform","translate(80, 90)").attr("id","wonbars").selectAll("rect").data(e).enter().append("rect").attr("height",function(t){return 30}).attr({x:function(t){return 0},y:function(t,e){return l(e)}}).style("fill",function(t,e){return s[1]}).attr("width",function(t){return 0}),c.append("g").attr("transform","translate(80, 90)").attr("id","wonperc").selectAll("text").data(e).enter().append("text").text(function(t){return t>16?t.toFixed(2)+"%":""}).attr("x",function(t,e){return a(t)-55}).attr("y",function(t,e){return l(e)+20}),c.append("g").attr("transform","translate(80,90)").attr("id","lossbars").selectAll("rect").data(t).enter().append("rect").attr("height",function(t){return 30}).attr({x:function(t){return n-a(t)},y:function(t,e){return l(e)}}).style("fill",function(t,e){return s[0]}).attr("width",function(t){return 0}),c.append("g").attr("transform","translate(80, 90)").attr("id","lossperc").selectAll("text").data(t).enter().append("text").text(function(t){return t>16?t.toFixed(2)+"%":""}).attr("x",function(t,e){return n-a(t)+10}).attr("y",function(t,e){return l(e)+20}).attr("fill","#fff"),c.append("g").attr("transform","translate(10,10)").selectAll("rect").data(["Win","Loss"]).enter().append("rect").attr({width:50,height:15,x:function(t,e){return 60*e},y:0}).style("fill",function(t,e){return s[s.length-1-e]}),c.append("g").attr("transform","translate(20,10)").selectAll("text").data(["Win","Loss"]).enter().append("text").text(function(t){return t}).attr({x:function(t,e){return 60*e},y:32});d3.select(".daywrap svg").selectAll("#wonbars rect").data(e).attr("width",function(t){return a(t)}),d3.select(".daywrap svg").selectAll("#lossbars rect").data(t).attr("width",function(t){return a(t)})})(e,t,document.querySelector(".monthwrap").clientWidth-110,500,n,["#ff5454","#a9d645"])}()}),app.chartHour=(async()=>{!function(){let t=hourwonlost.map(function(t){return parseFloat(t.won)}),e=hourwonlost.map(function(t){return parseFloat(t.lost)}),n=hourwonlost.map(function(t){return t.hour});(function(t,e,n,r,i,s){var o=d3.range(11).map(function(t){return{x1:0,y1:0,x2:0,y2:44*i.length}}),a=d3.scale.linear().domain([0,100]).range([0,n]),l=d3.scale.linear().domain([0,11]).range([0,r]),c=(d3.scale.quantize().domain([0,i.length]).range(s),d3.select(".hourwrap").append("svg").attr({width:n+160,height:r+80})),u=(c.append("g").attr("id","grid_chartHour").attr("transform","translate(80,80)").selectAll("line").data(o).enter().append("line").attr({x1:function(t,e){return a(10*e)},y1:function(t){return t.y1},x2:function(t,e){return a(10*e)},y2:function(t){return t.y2}}).style({stroke:"#dadada","stroke-width":"1px"}),d3.svg.axis());u.orient("bottom").scale(a).tickFormat(function(t,e){return t+"%"}).tickValues([0,10,20,30,40,50,60,70,80,90,100]);var d=d3.svg.axis();d.orient("left").scale(l).tickSize(0).tickFormat(function(t,e){return i[e]}).tickValues(d3.range(12));c.append("g").attr("transform","translate(70, 105)").attr("id","yaxis_chartHour").call(d),c.append("g").attr("transform","translate(80, 55)").attr("id","xaxis_chartHour").call(u),c.append("g").attr("transform","translate(80, 90)").attr("id","wonbars").selectAll("rect").data(e).enter().append("rect").attr("height",function(t){return 30}).attr({x:function(t){return 0},y:function(t,e){return l(e)}}).style("fill",function(t,e){return s[1]}).attr("width",function(t){return 0}),c.append("g").attr("transform","translate(80, 90)").attr("id","wonperc").selectAll("text").data(e).enter().append("text").text(function(t){return t>16?t.toFixed(2)+"%":""}).attr("x",function(t,e){return a(t)-55}).attr("y",function(t,e){return l(e)+20}),c.append("g").attr("transform","translate(80,90)").attr("id","lossbars").selectAll("rect").data(t).enter().append("rect").attr("height",function(t){return 30}).attr({x:function(t){return n-a(t)},y:function(t,e){return l(e)}}).style("fill",function(t,e){return s[0]}).attr("width",function(t){return 0}),c.append("g").attr("transform","translate(80, 90)").attr("id","lossperc").selectAll("text").data(t).enter().append("text").text(function(t){return t>16?t.toFixed(2)+"%":""}).attr("x",function(t,e){return n-a(t)+10}).attr("y",function(t,e){return l(e)+20}).attr("fill","#fff"),c.append("g").attr("transform","translate(10,10)").selectAll("rect").data(["Win","Loss"]).enter().append("rect").attr({width:50,height:15,x:function(t,e){return 60*e},y:0}).style("fill",function(t,e){return s[s.length-1-e]}),c.append("g").attr("transform","translate(20,10)").selectAll("text").data(["Win","Loss"]).enter().append("text").text(function(t){return t}).attr({x:function(t,e){return 60*e},y:32});d3.select(".hourwrap svg").selectAll("#wonbars rect").data(e).attr("width",function(t){return a(t)}),d3.select(".hourwrap svg").selectAll("#lossbars rect").data(t).attr("width",function(t){return a(t)})})(e,t,document.querySelector(".monthwrap").clientWidth-110,500,n,["#ff5454","#a9d645"])}()}),app.chartElo=(async()=>{!function(){let t=elowonlost.map(function(t){return parseFloat(t.won)}),e=elowonlost.map(function(t){return parseFloat(t.lost)}),n=elowonlost.map(function(t){return t.eloband});(function(t,e,n,r,i,s){var o=d3.range(11).map(function(t){return{x1:0,y1:0,x2:0,y2:44*i.length}}),a=d3.scale.linear().domain([0,100]).range([0,n]),l=d3.scale.linear().domain([0,11]).range([0,r]),c=(d3.scale.quantize().domain([0,i.length]).range(s),d3.select(".elowrap").append("svg").attr({width:n+160,height:r+80})),u=(c.append("g").attr("id","grid_chartElo").attr("transform","translate(80,80)").selectAll("line").data(o).enter().append("line").attr({x1:function(t,e){return a(10*e)},y1:function(t){return t.y1},x2:function(t,e){return a(10*e)},y2:function(t){return t.y2}}).style({stroke:"#dadada","stroke-width":"1px"}),d3.svg.axis());u.orient("bottom").scale(a).tickFormat(function(t,e){return t+"%"}).tickValues([0,10,20,30,40,50,60,70,80,90,100]);var d=d3.svg.axis();d.orient("left").scale(l).tickSize(0).tickFormat(function(t,e){return i[e]}).tickValues(d3.range(12));c.append("g").attr("transform","translate(70, 105)").attr("id","yaxis_chartElo").call(d),c.append("g").attr("transform","translate(80, 55)").attr("id","xaxis_chartElo").call(u),c.append("g").attr("transform","translate(80, 90)").attr("id","wonbars").selectAll("rect").data(e).enter().append("rect").attr("height",function(t){return 30}).attr({x:function(t){return 0},y:function(t,e){return l(e)}}).style("fill",function(t,e){return s[1]}).attr("width",function(t){return 0}),c.append("g").attr("transform","translate(80, 90)").attr("id","wonperc").selectAll("text").data(e).enter().append("text").text(function(t){return t>16?t.toFixed(2)+"%":""}).attr("x",function(t,e){return a(t)-55}).attr("y",function(t,e){return l(e)+20}),c.append("g").attr("transform","translate(80,90)").attr("id","lossbars").selectAll("rect").data(t).enter().append("rect").attr("height",function(t){return 30}).attr({x:function(t){return n-a(t)},y:function(t,e){return l(e)}}).style("fill",function(t,e){return s[0]}).attr("width",function(t){return 0}),c.append("g").attr("transform","translate(80, 90)").attr("id","lossperc").selectAll("text").data(t).enter().append("text").text(function(t){return t>16?t.toFixed(2)+"%":""}).attr("x",function(t,e){return n-a(t)+10}).attr("y",function(t,e){return l(e)+20}).attr("fill","#fff"),c.append("g").attr("transform","translate(10,10)").selectAll("rect").data(["Win","Loss"]).enter().append("rect").attr({width:50,height:15,x:function(t,e){return 60*e},y:0}).style("fill",function(t,e){return s[s.length-1-e]}),c.append("g").attr("transform","translate(20,10)").selectAll("text").data(["Win","Loss"]).enter().append("text").text(function(t){return t}).attr({x:function(t,e){return 60*e},y:32});d3.select(".elowrap svg").selectAll("#wonbars rect").data(e).attr("width",function(t){return a(t)}),d3.select(".elowrap svg").selectAll("#lossbars rect").data(t).attr("width",function(t){return a(t)})})(e,t,document.querySelector(".monthwrap").clientWidth-110,500,n,["#ff5454","#a9d645"])}()}),document.querySelector(".monthwrap")&&(app.chartMonth(),app.chartDay(),app.chartHour(),app.chartElo()),document.querySelector(".stats-records")){document.querySelector(".tabs").addEventListener("click",t=>{t.preventDefault();let e=util.findParentBySelector(t.target,".left"),n=util.findParentBySelector(t.target,".right"),r=[],i=util.findParentBySelector(t.target,"a");e?("Low ELO"===document.querySelector(".tabs .right .active").innerText&&r.push("elo=low"),i.hasAttribute("data-param")&&r.push(i.dataset.param)):n&&("Season 3"===document.querySelector(".tabs .left .active").innerText?r.push("season=3"):"Season 2"===document.querySelector(".tabs .left .active").innerText?r.push("season=2"):"Season 1"===document.querySelector(".tabs .left .active").innerText&&r.push("season=1"),i.hasAttribute("data-param")&&r.push(i.dataset.param));let s=window.location.origin+window.location.pathname;r.length>0&&(s=s+"?"+r.join("&")),window.location.href=s})}app.tableSort=(async()=>{const t=[],e={};for(let n of document.getElementsByTagName("table"))if("table-sticky"===n.className){if(0===n.getElementsByTagName("thead").length){const t=document.createElement("thead");t.appendChild(n.rows[0]),n.insertBefore(t,n.firstChild)}const r=n.querySelector("thead"),i=n.querySelector("tbody"),s=r.querySelectorAll("th");for(let[n,o]of s.entries("table")){let s=0;o.addEventListener("click",()=>{if(0===n||1===n)return!1;s+=1,r.querySelector(".sort-desc")&&r.querySelector(".sort-desc").classList.remove("sort-desc"),r.querySelector(".sort-asc")&&r.querySelector("th.sort-asc").classList.remove("sort-asc"),function(){const r=i.querySelectorAll("tr");for(let[i,s]of r.entries())""!==s.querySelectorAll("td").item(n).innerHTML?(t.push(s.querySelectorAll("td").item(n).innerHTML+"#"+i),e[s.querySelectorAll("td").item(n).innerHTML+"#"+i]=s.innerHTML):(t.push("0#"+i),e["0#"+i]=s.innerHTML);function a(t,e){return t.localeCompare(e,navigator.languages[0]||navigator.language,{numeric:!0})}function l(t,e){return a(e,t)}void 0!==t[0]&&(o.classList.contains("order-desc")&&1===s?t.sort(l,{numeric:!0,ignorePunctuation:!0}):o.classList.contains("order-desc")&&2===s?(t.sort(a,{numeric:!0,ignorePunctuation:!0}),s=0):1===s?(o.classList.add("sort-asc"),t.sort(a)):2===s&&(o.classList.add("sort-desc"),t.sort(l),s=0))}(),function(){const n=i.querySelectorAll("tr");for(let[r,i]of n.entries())i.innerHTML=e[t[r]];t.length=0}()})}}}),document.querySelector(".table-sticky")&&app.tableSort(),util={indexInParent:function(t){var e=t.parentNode.childNodes;num=0;for(var n=0;n<e.length;n++){if(e[n]==t)return num;1==e[n].nodeType&&num++}return-1},findParentBySelector:function(t,e){for(;t&&t.parentNode;){var n=t.parentNode.querySelectorAll(e);if(Array.prototype.includes.call(n,t))return t;t=t.parentNode}return""|t},insertAfter:function(t,e){e.parentNode.insertBefore(t,e.nextSibling)}};