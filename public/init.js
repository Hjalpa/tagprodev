!function(t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():window.noUiSlider=t()}(function(){"use strict";var t="14.6.4";function e(t){t.parentElement.removeChild(t)}function i(t){return null!=t}function s(t){t.preventDefault()}function n(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function r(t,e,i){0<i&&(c(t,e),setTimeout(function(){u(t,e)},i))}function o(t){return Math.max(Math.min(t,100),0)}function a(t){return Array.isArray(t)?t:[t]}function l(t){var e=(t=String(t)).split(".");return 1<e.length?e[1].length:0}function c(t,e){t.classList&&!/\s/.test(e)?t.classList.add(e):t.className+=" "+e}function u(t,e){t.classList&&!/\s/.test(e)?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function d(t){var e=void 0!==window.pageXOffset,i="CSS1Compat"===(t.compatMode||"");return{x:e?window.pageXOffset:i?t.documentElement.scrollLeft:t.body.scrollLeft,y:e?window.pageYOffset:i?t.documentElement.scrollTop:t.body.scrollTop}}function p(t,e){return 100/(e-t)}function h(t,e,i){return 100*e/(t[i+1]-t[i])}function f(t,e){for(var i=1;t>=e[i];)i+=1;return i}function g(e,i,s){var r;if("number"==typeof i&&(i=[i]),!Array.isArray(i))throw new Error("noUiSlider ("+t+"): 'range' contains invalid value.");if(!n(r="min"===e?0:"max"===e?100:parseFloat(e))||!n(i[0]))throw new Error("noUiSlider ("+t+"): 'range' value isn't numeric.");s.xPct.push(r),s.xVal.push(i[0]),r?s.xSteps.push(!isNaN(i[1])&&i[1]):isNaN(i[1])||(s.xSteps[0]=i[1]),s.xHighestCompleteStep.push(0)}function m(t,e,i){if(e)if(i.xVal[t]!==i.xVal[t+1]){i.xSteps[t]=h([i.xVal[t],i.xVal[t+1]],e,0)/p(i.xPct[t],i.xPct[t+1]);var s=(i.xVal[t+1]-i.xVal[t])/i.xNumSteps[t],n=Math.ceil(Number(s.toFixed(3))-1),r=i.xVal[t]+i.xNumSteps[t]*n;i.xHighestCompleteStep[t]=r}else i.xSteps[t]=i.xHighestCompleteStep[t]=i.xVal[t]}function v(t,e,i){var s;this.xPct=[],this.xVal=[],this.xSteps=[i||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=e;var n=[];for(s in t)t.hasOwnProperty(s)&&n.push([t[s],s]);for(n.length&&"object"==typeof n[0][0]?n.sort(function(t,e){return t[0][0]-e[0][0]}):n.sort(function(t,e){return t[0]-e[0]}),s=0;s<n.length;s++)g(n[s][1],n[s][0],this);for(this.xNumSteps=this.xSteps.slice(0),s=0;s<this.xNumSteps.length;s++)m(s,this.xNumSteps[s],this)}v.prototype.getDistance=function(e){var i,s=[];for(i=0;i<this.xNumSteps.length-1;i++){var n=this.xNumSteps[i];if(n&&e/n%1!=0)throw new Error("noUiSlider ("+t+"): 'limit', 'margin' and 'padding' of "+this.xPct[i]+"% range must be divisible by step.");s[i]=h(this.xVal,e,i)}return s},v.prototype.getAbsoluteDistance=function(t,e,i){var s,n=0;if(t<this.xPct[this.xPct.length-1])for(;t>this.xPct[n+1];)n++;else t===this.xPct[this.xPct.length-1]&&(n=this.xPct.length-2);i||t!==this.xPct[n+1]||n++;var r=1,o=e[n],a=0,l=0,c=0,u=0;for(s=i?(t-this.xPct[n])/(this.xPct[n+1]-this.xPct[n]):(this.xPct[n+1]-t)/(this.xPct[n+1]-this.xPct[n]);0<o;)a=this.xPct[n+1+u]-this.xPct[n+u],100<e[n+u]*r+100-100*s?(l=a*s,r=(o-100*s)/e[n+u],s=1):(l=e[n+u]*a/100*r,r=0),i?(c-=l,1<=this.xPct.length+u&&u--):(c+=l,1<=this.xPct.length-u&&u++),o=e[n+u]*r;return t+c},v.prototype.toStepping=function(t){return function(t,e,i){if(i>=t.slice(-1)[0])return 100;var s,n,r=f(i,t),o=t[r-1],a=t[r],l=e[r-1],c=e[r];return l+(n=i,h(s=[o,a],s[0]<0?n+Math.abs(s[0]):n-s[0],0)/p(l,c))}(this.xVal,this.xPct,t)},v.prototype.fromStepping=function(t){return function(t,e,i){if(100<=i)return t.slice(-1)[0];var s,n=f(i,e),r=t[n-1],o=t[n],a=e[n-1];return s=[r,o],(i-a)*p(a,e[n])*(s[1]-s[0])/100+s[0]}(this.xVal,this.xPct,t)},v.prototype.getStep=function(t){return function(t,e,i,s){if(100===s)return s;var n,r,o=f(s,t),a=t[o-1],l=t[o];return i?(l-a)/2<s-a?l:a:e[o-1]?t[o-1]+(n=s-t[o-1],r=e[o-1],Math.round(n/r)*r):s}(this.xPct,this.xSteps,this.snap,t)},v.prototype.getDefaultStep=function(t,e,i){var s=f(t,this.xPct);return(100===t||e&&t===this.xPct[s-1])&&(s=Math.max(s-1,1)),(this.xVal[s]-this.xVal[s-1])/i},v.prototype.getNearbySteps=function(t){var e=f(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},v.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(l);return Math.max.apply(null,t)},v.prototype.convert=function(t){return this.getStep(this.toStepping(t))};var y={to:function(t){return void 0!==t&&t.toFixed(2)},from:Number},b={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},w={tooltips:".__tooltips",aria:".__aria"};function S(e){if("object"==typeof(i=e)&&"function"==typeof i.to&&"function"==typeof i.from)return!0;var i;throw new Error("noUiSlider ("+t+"): 'format' requires 'to' and 'from' methods.")}function x(e,i){if(!n(i))throw new Error("noUiSlider ("+t+"): 'step' is not numeric.");e.singleStep=i}function O(e,i){if(!n(i))throw new Error("noUiSlider ("+t+"): 'keyboardPageMultiplier' is not numeric.");e.keyboardPageMultiplier=i}function C(e,i){if(!n(i))throw new Error("noUiSlider ("+t+"): 'keyboardDefaultStep' is not numeric.");e.keyboardDefaultStep=i}function A(e,i){if("object"!=typeof i||Array.isArray(i))throw new Error("noUiSlider ("+t+"): 'range' is not an object.");if(void 0===i.min||void 0===i.max)throw new Error("noUiSlider ("+t+"): Missing 'min' or 'max' in 'range'.");if(i.min===i.max)throw new Error("noUiSlider ("+t+"): 'range' 'min' and 'max' cannot be equal.");e.spectrum=new v(i,e.snap,e.singleStep)}function k(e,i){if(i=a(i),!Array.isArray(i)||!i.length)throw new Error("noUiSlider ("+t+"): 'start' option is incorrect.");e.handles=i.length,e.start=i}function E(e,i){if("boolean"!=typeof(e.snap=i))throw new Error("noUiSlider ("+t+"): 'snap' option must be a boolean.")}function I(e,i){if("boolean"!=typeof(e.animate=i))throw new Error("noUiSlider ("+t+"): 'animate' option must be a boolean.")}function _(e,i){if("number"!=typeof(e.animationDuration=i))throw new Error("noUiSlider ("+t+"): 'animationDuration' option must be a number.")}function P(e,i){var s,n=[!1];if("lower"===i?i=[!0,!1]:"upper"===i&&(i=[!1,!0]),!0===i||!1===i){for(s=1;s<e.handles;s++)n.push(i);n.push(!1)}else{if(!Array.isArray(i)||!i.length||i.length!==e.handles+1)throw new Error("noUiSlider ("+t+"): 'connect' option doesn't match handle count.");n=i}e.connect=n}function L(e,i){switch(i){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider ("+t+"): 'orientation' option is invalid.")}}function F(e,i){if(!n(i))throw new Error("noUiSlider ("+t+"): 'margin' option must be numeric.");0!==i&&(e.margin=e.spectrum.getDistance(i))}function q(e,i){if(!n(i))throw new Error("noUiSlider ("+t+"): 'limit' option must be numeric.");if(e.limit=e.spectrum.getDistance(i),!e.limit||e.handles<2)throw new Error("noUiSlider ("+t+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}function N(e,i){var s;if(!n(i)&&!Array.isArray(i))throw new Error("noUiSlider ("+t+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(i)&&2!==i.length&&!n(i[0])&&!n(i[1]))throw new Error("noUiSlider ("+t+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==i){for(Array.isArray(i)||(i=[i,i]),e.padding=[e.spectrum.getDistance(i[0]),e.spectrum.getDistance(i[1])],s=0;s<e.spectrum.xNumSteps.length-1;s++)if(e.padding[0][s]<0||e.padding[1][s]<0)throw new Error("noUiSlider ("+t+"): 'padding' option must be a positive number(s).");var r=i[0]+i[1],o=e.spectrum.xVal[0];if(1<r/(e.spectrum.xVal[e.spectrum.xVal.length-1]-o))throw new Error("noUiSlider ("+t+"): 'padding' option must not exceed 100% of the range.")}}function T(e,i){switch(i){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider ("+t+"): 'direction' option was not recognized.")}}function V(e,i){if("string"!=typeof i)throw new Error("noUiSlider ("+t+"): 'behaviour' must be a string containing options.");var s=0<=i.indexOf("tap"),n=0<=i.indexOf("drag"),r=0<=i.indexOf("fixed"),o=0<=i.indexOf("snap"),a=0<=i.indexOf("hover"),l=0<=i.indexOf("unconstrained");if(r){if(2!==e.handles)throw new Error("noUiSlider ("+t+"): 'fixed' behaviour must be used with 2 handles");F(e,e.start[1]-e.start[0])}if(l&&(e.margin||e.limit))throw new Error("noUiSlider ("+t+"): 'unconstrained' behaviour cannot be used with margin or limit");e.events={tap:s||o,drag:n,fixed:r,snap:o,hover:a,unconstrained:l}}function D(e,i){if(!1!==i)if(!0===i){e.tooltips=[];for(var s=0;s<e.handles;s++)e.tooltips.push(!0)}else{if(e.tooltips=a(i),e.tooltips.length!==e.handles)throw new Error("noUiSlider ("+t+"): must pass a formatter for all handles.");e.tooltips.forEach(function(e){if("boolean"!=typeof e&&("object"!=typeof e||"function"!=typeof e.to))throw new Error("noUiSlider ("+t+"): 'tooltips' must be passed a formatter or 'false'.")})}}function j(t,e){S(t.ariaFormat=e)}function M(t,e){S(t.format=e)}function U(e,i){if("boolean"!=typeof(e.keyboardSupport=i))throw new Error("noUiSlider ("+t+"): 'keyboardSupport' option must be a boolean.")}function B(t,e){t.documentElement=e}function H(e,i){if("string"!=typeof i&&!1!==i)throw new Error("noUiSlider ("+t+"): 'cssPrefix' must be a string or `false`.");e.cssPrefix=i}function R(e,i){if("object"!=typeof i)throw new Error("noUiSlider ("+t+"): 'cssClasses' must be an object.");if("string"==typeof e.cssPrefix)for(var s in e.cssClasses={},i)i.hasOwnProperty(s)&&(e.cssClasses[s]=e.cssPrefix+i[s]);else e.cssClasses=i}function $(e){var s={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:y,format:y},n={step:{r:!1,t:x},keyboardPageMultiplier:{r:!1,t:O},keyboardDefaultStep:{r:!1,t:C},start:{r:!0,t:k},connect:{r:!0,t:P},direction:{r:!0,t:T},snap:{r:!1,t:E},animate:{r:!1,t:I},animationDuration:{r:!1,t:_},range:{r:!0,t:A},orientation:{r:!1,t:L},margin:{r:!1,t:F},limit:{r:!1,t:q},padding:{r:!1,t:N},behaviour:{r:!0,t:V},ariaFormat:{r:!1,t:j},format:{r:!1,t:M},tooltips:{r:!1,t:D},keyboardSupport:{r:!0,t:U},documentElement:{r:!1,t:B},cssPrefix:{r:!0,t:H},cssClasses:{r:!0,t:R}},r={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:b,keyboardPageMultiplier:5,keyboardDefaultStep:10};e.format&&!e.ariaFormat&&(e.ariaFormat=e.format),Object.keys(n).forEach(function(o){if(!i(e[o])&&void 0===r[o]){if(n[o].r)throw new Error("noUiSlider ("+t+"): '"+o+"' is required.");return!0}n[o].t(s,i(e[o])?e[o]:r[o])}),s.pips=e.pips;var o=document.createElement("div"),a=void 0!==o.style.msTransform,l=void 0!==o.style.transform;return s.transformRule=l?"transform":a?"msTransform":"webkitTransform",s.style=[["left","top"],["right","bottom"]][s.dir][s.ort],s}return{__spectrum:v,version:t,cssClasses:b,create:function(n,l){if(!n||!n.nodeName)throw new Error("noUiSlider ("+t+"): create requires a single element, got: "+n);if(n.noUiSlider)throw new Error("noUiSlider ("+t+"): Slider was already initialized.");var p=function(n,l,p){var h,f,g,m,v,y,b,S,x=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},O=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),C=n,A=l.spectrum,k=[],E=[],I=[],_=0,P={},L=n.ownerDocument,F=l.documentElement||L.documentElement,q=L.body,N=-1,T=0,V=1,D=2,j="rtl"===L.dir||1===l.ort?0:100;function M(t,e){var i=L.createElement("div");return e&&c(i,e),t.appendChild(i),i}function U(t,e){var i=M(t,l.cssClasses.origin),s=M(i,l.cssClasses.handle);return M(s,l.cssClasses.touchArea),s.setAttribute("data-handle",e),l.keyboardSupport&&(s.setAttribute("tabindex","0"),s.addEventListener("keydown",function(t){return function(t,e){if(R()||z(e))return!1;var i=["Left","Right"],s=["Down","Up"],n=["PageDown","PageUp"],r=["Home","End"];l.dir&&!l.ort?i.reverse():l.ort&&!l.dir&&(s.reverse(),n.reverse());var o,a=t.key.replace("Arrow",""),c=a===n[0],u=a===n[1],d=a===s[0]||a===i[0]||c,p=a===s[1]||a===i[1]||u,h=a===r[1];if(!(d||p||a===r[0]||h))return!0;if(t.preventDefault(),p||d){var f=l.keyboardPageMultiplier,g=d?0:1,m=vt(e)[g];if(null===m)return!1;!1===m&&(m=A.getDefaultStep(E[e],d,l.keyboardDefaultStep)),(u||c)&&(m*=f),m=Math.max(m,1e-7),m*=d?-1:1,o=k[e]+m}else o=h?l.spectrum.xVal[l.spectrum.xVal.length-1]:l.spectrum.xVal[0];return pt(e,A.toStepping(o),!0,!0),ot("slide",e),ot("update",e),ot("change",e),ot("set",e),!1}(t,e)})),s.setAttribute("role","slider"),s.setAttribute("aria-orientation",l.ort?"vertical":"horizontal"),0===e?c(s,l.cssClasses.handleLower):e===l.handles-1&&c(s,l.cssClasses.handleUpper),i}function B(t,e){return!!e&&M(t,l.cssClasses.connect)}function H(t,e){return!!l.tooltips[e]&&M(t.firstChild,l.cssClasses.tooltip)}function R(){return C.hasAttribute("disabled")}function z(t){return f[t].hasAttribute("disabled")}function K(){v&&(rt("update"+w.tooltips),v.forEach(function(t){t&&e(t)}),v=null)}function Q(){K(),v=f.map(H),nt("update"+w.tooltips,function(t,e,i){if(v[e]){var s=t[e];!0!==l.tooltips[e]&&(s=l.tooltips[e].to(i[e])),v[e].innerHTML=s}})}function G(t,e,i){var s=L.createElement("div"),n=[];n[T]=l.cssClasses.valueNormal,n[V]=l.cssClasses.valueLarge,n[D]=l.cssClasses.valueSub;var r=[];r[T]=l.cssClasses.markerNormal,r[V]=l.cssClasses.markerLarge,r[D]=l.cssClasses.markerSub;var o=[l.cssClasses.valueHorizontal,l.cssClasses.valueVertical],a=[l.cssClasses.markerHorizontal,l.cssClasses.markerVertical];function u(t,e){var i=e===l.cssClasses.value,s=i?n:r;return e+" "+(i?o:a)[l.ort]+" "+s[t]}return c(s,l.cssClasses.pips),c(s,0===l.ort?l.cssClasses.pipsHorizontal:l.cssClasses.pipsVertical),Object.keys(t).forEach(function(n){!function(t,n,r){if((r=e?e(n,r):r)!==N){var o=M(s,!1);o.className=u(r,l.cssClasses.marker),o.style[l.style]=t+"%",T<r&&((o=M(s,!1)).className=u(r,l.cssClasses.value),o.setAttribute("data-value",n),o.style[l.style]=t+"%",o.innerHTML=i.to(n))}}(n,t[n][0],t[n][1])}),s}function W(){m&&(e(m),m=null)}function X(e){W();var i,s,n,r,o,a,l,c,u,d=e.mode,p=e.density||1,h=e.filter||!1,f=function(e,i,s){if("range"===e||"steps"===e)return A.xVal;if("count"===e){if(i<2)throw new Error("noUiSlider ("+t+"): 'values' (>= 2) required for mode 'count'.");var n=i-1,r=100/n;for(i=[];n--;)i[n]=n*r;i.push(100),e="positions"}return"positions"===e?i.map(function(t){return A.fromStepping(s?A.getStep(t):t)}):"values"===e?s?i.map(function(t){return A.fromStepping(A.getStep(A.toStepping(t)))}):i:void 0}(d,e.values||!1,e.stepped||!1),g=(i=p,s=d,n=f,r={},o=A.xVal[0],a=A.xVal[A.xVal.length-1],c=l=!1,u=0,(n=n.slice().sort(function(t,e){return t-e}).filter(function(t){return!this[t]&&(this[t]=!0)},{}))[0]!==o&&(n.unshift(o),l=!0),n[n.length-1]!==a&&(n.push(a),c=!0),n.forEach(function(t,e){var o,a,d,p,h,f,g,m,v,y,b=t,w=n[e+1],S="steps"===s;if(S&&(o=A.xNumSteps[e]),o||(o=w-b),!1!==b)for(void 0===w&&(w=b),o=Math.max(o,1e-7),a=b;a<=w;a=(a+o).toFixed(7)/1){for(m=(h=(p=A.toStepping(a))-u)/i,y=h/(v=Math.round(m)),d=1;d<=v;d+=1)r[(f=u+d*y).toFixed(5)]=[A.fromStepping(f),0];g=-1<n.indexOf(a)?V:S?D:T,!e&&l&&a!==w&&(g=0),a===w&&c||(r[p.toFixed(5)]=[a,g]),u=p}}),r),v=e.format||{to:Math.round};return m=C.appendChild(G(g,h,v))}function Y(){var t=h.getBoundingClientRect(),e="offset"+["Width","Height"][l.ort];return 0===l.ort?t.width||h[e]:t.height||h[e]}function J(t,e,i,s){var n=function(n){return!!(n=function(t,e,i){var s,n,r=0===t.type.indexOf("touch"),o=0===t.type.indexOf("mouse"),a=0===t.type.indexOf("pointer");if(0===t.type.indexOf("MSPointer")&&(a=!0),"mousedown"===t.type&&!t.buttons&&!t.touches)return!1;if(r){var l=function(t){return t.target===i||i.contains(t.target)||t.target.shadowRoot&&t.target.shadowRoot.contains(i)};if("touchstart"===t.type){var c=Array.prototype.filter.call(t.touches,l);if(1<c.length)return!1;s=c[0].pageX,n=c[0].pageY}else{var u=Array.prototype.find.call(t.changedTouches,l);if(!u)return!1;s=u.pageX,n=u.pageY}}return e=e||d(L),(o||a)&&(s=t.clientX+e.x,n=t.clientY+e.y),t.pageOffset=e,t.points=[s,n],t.cursor=o||a,t}(n,s.pageOffset,s.target||e))&&!(R()&&!s.doNotReject)&&(r=C,o=l.cssClasses.tap,!((r.classList?r.classList.contains(o):new RegExp("\\b"+o+"\\b").test(r.className))&&!s.doNotReject)&&!(t===x.start&&void 0!==n.buttons&&1<n.buttons)&&(!s.hover||!n.buttons)&&(O||n.preventDefault(),n.calcPoint=n.points[l.ort],void i(n,s)));var r,o},r=[];return t.split(" ").forEach(function(t){e.addEventListener(t,n,!!O&&{passive:!0}),r.push([t,n])}),r}function Z(t){var e,i,s,n,r,a,c=100*(t-(e=h,i=l.ort,s=e.getBoundingClientRect(),r=(n=e.ownerDocument).documentElement,a=d(n),/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(a.x=0),i?s.top+a.y-r.clientTop:s.left+a.x-r.clientLeft))/Y();return c=o(c),l.dir?100-c:c}function tt(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&it(t,e)}function et(t,e){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===t.buttons&&0!==e.buttonsProperty)return it(t,e);var i=(l.dir?-1:1)*(t.calcPoint-e.startCalcPoint);ct(0<i,100*i/e.baseSize,e.locations,e.handleNumbers)}function it(t,e){e.handle&&(u(e.handle,l.cssClasses.active),_-=1),e.listeners.forEach(function(t){F.removeEventListener(t[0],t[1])}),0===_&&(u(C,l.cssClasses.drag),dt(),t.cursor&&(q.style.cursor="",q.removeEventListener("selectstart",s))),e.handleNumbers.forEach(function(t){ot("change",t),ot("set",t),ot("end",t)})}function st(t,e){if(e.handleNumbers.some(z))return!1;var i;1===e.handleNumbers.length&&(i=f[e.handleNumbers[0]].children[0],_+=1,c(i,l.cssClasses.active)),t.stopPropagation();var n=[],r=J(x.move,F,et,{target:t.target,handle:i,listeners:n,startCalcPoint:t.calcPoint,baseSize:Y(),pageOffset:t.pageOffset,handleNumbers:e.handleNumbers,buttonsProperty:t.buttons,locations:E.slice()}),o=J(x.end,F,it,{target:t.target,handle:i,listeners:n,doNotReject:!0,handleNumbers:e.handleNumbers}),a=J("mouseout",F,tt,{target:t.target,handle:i,listeners:n,doNotReject:!0,handleNumbers:e.handleNumbers});n.push.apply(n,r.concat(o,a)),t.cursor&&(q.style.cursor=getComputedStyle(t.target).cursor,1<f.length&&c(C,l.cssClasses.drag),q.addEventListener("selectstart",s,!1)),e.handleNumbers.forEach(function(t){ot("start",t)})}function nt(t,e){P[t]=P[t]||[],P[t].push(e),"update"===t.split(".")[0]&&f.forEach(function(t,e){ot("update",e)})}function rt(t){var e=t&&t.split(".")[0],i=e?t.substring(e.length):t;Object.keys(P).forEach(function(t){var s,n=t.split(".")[0],r=t.substring(n.length);e&&e!==n||i&&i!==r||((s=r)!==w.aria&&s!==w.tooltips||i===r)&&delete P[t]})}function ot(t,e,i){Object.keys(P).forEach(function(s){var n=s.split(".")[0];t===n&&P[s].forEach(function(t){t.call(y,k.map(l.format.to),e,k.slice(),i||!1,E.slice(),y)})})}function at(t,e,i,s,n,r){var a;return 1<f.length&&!l.events.unconstrained&&(s&&0<e&&(a=A.getAbsoluteDistance(t[e-1],l.margin,0),i=Math.max(i,a)),n&&e<f.length-1&&(a=A.getAbsoluteDistance(t[e+1],l.margin,1),i=Math.min(i,a))),1<f.length&&l.limit&&(s&&0<e&&(a=A.getAbsoluteDistance(t[e-1],l.limit,0),i=Math.min(i,a)),n&&e<f.length-1&&(a=A.getAbsoluteDistance(t[e+1],l.limit,1),i=Math.max(i,a))),l.padding&&(0===e&&(a=A.getAbsoluteDistance(0,l.padding[0],0),i=Math.max(i,a)),e===f.length-1&&(a=A.getAbsoluteDistance(100,l.padding[1],1),i=Math.min(i,a))),!((i=o(i=A.getStep(i)))===t[e]&&!r)&&i}function lt(t,e){var i=l.ort;return(i?e:t)+", "+(i?t:e)}function ct(t,e,i,s){var n=i.slice(),r=[!t,t],o=[t,!t];s=s.slice(),t&&s.reverse(),1<s.length?s.forEach(function(t,i){var s=at(n,t,n[t]+e,r[i],o[i],!1);!1===s?e=0:(e=s-n[t],n[t]=s)}):r=o=[!0];var a=!1;s.forEach(function(t,s){a=pt(t,i[t]+e,r[s],o[s])||a}),a&&s.forEach(function(t){ot("update",t),ot("slide",t)})}function ut(t,e){return l.dir?100-t-e:t}function dt(){I.forEach(function(t){var e=50<E[t]?-1:1,i=3+(f.length+e*t);f[t].style.zIndex=i})}function pt(t,e,i,s,n){return n||(e=at(E,t,e,i,s,!1)),!1!==e&&(function(t,e){E[t]=e,k[t]=A.fromStepping(e);var i="translate("+lt(10*(ut(e,0)-j)+"%","0")+")";f[t].style[l.transformRule]=i,ht(t),ht(t+1)}(t,e),!0)}function ht(t){if(g[t]){var e=0,i=100;0!==t&&(e=E[t-1]),t!==g.length-1&&(i=E[t]);var s=i-e,n="translate("+lt(ut(e,s)+"%","0")+")",r="scale("+lt(s/100,"1")+")";g[t].style[l.transformRule]=n+" "+r}}function ft(t,e){return null===t||!1===t||void 0===t?E[e]:("number"==typeof t&&(t=String(t)),t=l.format.from(t),!1===(t=A.toStepping(t))||isNaN(t)?E[e]:t)}function gt(t,e,i){var s=a(t),n=void 0===E[0];e=void 0===e||!!e,l.animate&&!n&&r(C,l.cssClasses.tap,l.animationDuration),I.forEach(function(t){pt(t,ft(s[t],t),!0,!1,i)});for(var o=1===I.length?0:1;o<I.length;++o)I.forEach(function(t){pt(t,E[t],!0,!0,i)});dt(),I.forEach(function(t){ot("update",t),null!==s[t]&&e&&ot("set",t)})}function mt(){var t=k.map(l.format.to);return 1===t.length?t[0]:t}function vt(t){var e=E[t],i=A.getNearbySteps(e),s=k[t],n=i.thisStep.step,r=null;if(l.snap)return[s-i.stepBefore.startValue||null,i.stepAfter.startValue-s||null];!1!==n&&s+n>i.stepAfter.startValue&&(n=i.stepAfter.startValue-s),r=s>i.thisStep.startValue?i.thisStep.step:!1!==i.stepBefore.step&&s-i.stepBefore.highestStep,100===e?n=null:0===e&&(r=null);var o=A.countStepDecimals();return null!==n&&!1!==n&&(n=Number(n.toFixed(o))),null!==r&&!1!==r&&(r=Number(r.toFixed(o))),[r,n]}return c(b=C,l.cssClasses.target),0===l.dir?c(b,l.cssClasses.ltr):c(b,l.cssClasses.rtl),0===l.ort?c(b,l.cssClasses.horizontal):c(b,l.cssClasses.vertical),c(b,"rtl"===getComputedStyle(b).direction?l.cssClasses.textDirectionRtl:l.cssClasses.textDirectionLtr),h=M(b,l.cssClasses.base),function(t,e){var i=M(e,l.cssClasses.connects);f=[],(g=[]).push(B(i,t[0]));for(var s=0;s<l.handles;s++)f.push(U(e,s)),I[s]=s,g.push(B(i,t[s+1]))}(l.connect,h),(S=l.events).fixed||f.forEach(function(t,e){J(x.start,t.children[0],st,{handleNumbers:[e]})}),S.tap&&J(x.start,h,function(t){t.stopPropagation();var e,i,s,n=Z(t.calcPoint),o=(e=n,s=!(i=100),f.forEach(function(t,n){if(!z(n)){var r=E[n],o=Math.abs(r-e);(o<i||o<=i&&r<e||100===o&&100===i)&&(s=n,i=o)}}),s);if(!1===o)return!1;l.events.snap||r(C,l.cssClasses.tap,l.animationDuration),pt(o,n,!0,!0),dt(),ot("slide",o,!0),ot("update",o,!0),ot("change",o,!0),ot("set",o,!0),l.events.snap&&st(t,{handleNumbers:[o]})},{}),S.hover&&J(x.move,h,function(t){var e=Z(t.calcPoint),i=A.getStep(e),s=A.fromStepping(i);Object.keys(P).forEach(function(t){"hover"===t.split(".")[0]&&P[t].forEach(function(t){t.call(y,s)})})},{hover:!0}),S.drag&&g.forEach(function(t,e){if(!1!==t&&0!==e&&e!==g.length-1){var i=f[e-1],s=f[e],n=[t];c(t,l.cssClasses.draggable),S.fixed&&(n.push(i.children[0]),n.push(s.children[0])),n.forEach(function(t){J(x.start,t,st,{handles:[i,s],handleNumbers:[e-1,e]})})}}),gt(l.start),l.pips&&X(l.pips),l.tooltips&&Q(),rt("update"+w.aria),nt("update"+w.aria,function(t,e,i,s,n){I.forEach(function(t){var e=f[t],s=at(E,t,0,!0,!0,!0),r=at(E,t,100,!0,!0,!0),o=n[t],a=l.ariaFormat.to(i[t]);s=A.fromStepping(s).toFixed(1),r=A.fromStepping(r).toFixed(1),o=A.fromStepping(o).toFixed(1),e.children[0].setAttribute("aria-valuemin",s),e.children[0].setAttribute("aria-valuemax",r),e.children[0].setAttribute("aria-valuenow",o),e.children[0].setAttribute("aria-valuetext",a)})}),y={destroy:function(){for(var t in rt(w.aria),rt(w.tooltips),l.cssClasses)l.cssClasses.hasOwnProperty(t)&&u(C,l.cssClasses[t]);for(;C.firstChild;)C.removeChild(C.firstChild);delete C.noUiSlider},steps:function(){return I.map(vt)},on:nt,off:rt,get:mt,set:gt,setHandle:function(e,i,s,n){if(!(0<=(e=Number(e))&&e<I.length))throw new Error("noUiSlider ("+t+"): invalid handle number, got: "+e);pt(e,ft(i,e),!0,!0,n),ot("update",e),s&&ot("set",e)},reset:function(t){gt(l.start,t)},__moveHandles:function(t,e,i){ct(t,e,E,i)},options:p,updateOptions:function(t,e){var s=mt(),n=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];n.forEach(function(e){void 0!==t[e]&&(p[e]=t[e])});var r=$(p);n.forEach(function(e){void 0!==t[e]&&(l[e]=r[e])}),A=r.spectrum,l.margin=r.margin,l.limit=r.limit,l.padding=r.padding,l.pips?X(l.pips):W(),l.tooltips?Q():K(),E=[],gt(i(t.start)?t.start:s,e)},target:C,removePips:W,removeTooltips:K,getTooltips:function(){return v},getOrigins:function(){return f},pips:X}}(n,$(l),l);return n.noUiSlider=p}}}),function(t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():window.wNumb=t()}(function(){"use strict";var t=["decimals","thousand","mark","prefix","suffix","encoder","decoder","negativeBefore","negative","edit","undo"];function e(t){return t.split("").reverse().join("")}function i(t,e){return t.substring(0,e.length)===e}function s(t,e,i){if((t[e]||t[i])&&t[e]===t[i])throw new Error(e)}function n(t){return"number"==typeof t&&isFinite(t)}function r(t,i,s,r,o,a,l,c,u,d,p,h){var f,g,m,v=h,y="",b="";return a&&(h=a(h)),!!n(h)&&(!1!==t&&0===parseFloat(h.toFixed(t))&&(h=0),h<0&&(f=!0,h=Math.abs(h)),!1!==t&&(h=function(t,e){return t=t.toString().split("e"),(+((t=(t=Math.round(+(t[0]+"e"+(t[1]?+t[1]+e:e)))).toString().split("e"))[0]+"e"+(t[1]?t[1]-e:-e))).toFixed(e)}(h,t)),-1!==(h=h.toString()).indexOf(".")?(m=(g=h.split("."))[0],s&&(y=s+g[1])):m=h,i&&(m=e((m=e(m).match(/.{1,3}/g)).join(e(i)))),f&&c&&(b+=c),r&&(b+=r),f&&u&&(b+=u),b+=m,b+=y,o&&(b+=o),d&&(b=d(b,v)),b)}function o(t,e,s,r,o,a,l,c,u,d,p,h){var f,g="";return p&&(h=p(h)),!(!h||"string"!=typeof h)&&(c&&i(h,c)&&(h=h.replace(c,""),f=!0),r&&i(h,r)&&(h=h.replace(r,"")),u&&i(h,u)&&(h=h.replace(u,""),f=!0),o&&function(t,e){return h.slice(-1*e.length)===e}(0,o)&&(h=h.slice(0,-1*o.length)),e&&(h=h.split(e).join("")),s&&(h=h.replace(s,".")),f&&(g+="-"),""!==(g=(g+=h).replace(/[^0-9\.\-.]/g,""))&&(g=Number(g),l&&(g=l(g)),!!n(g)&&g))}function a(e,i,s){var n,r=[];for(n=0;n<t.length;n+=1)r.push(e[t[n]]);return r.push(s),i.apply("",r)}return function e(i){if(!(this instanceof e))return new e(i);"object"==typeof i&&(i=function(e){var i,n,r,o={};for(void 0===e.suffix&&(e.suffix=e.postfix),i=0;i<t.length;i+=1)if(void 0===(r=e[n=t[i]]))"negative"!==n||o.negativeBefore?"mark"===n&&"."!==o.thousand?o[n]=".":o[n]=!1:o[n]="-";else if("decimals"===n){if(!(0<=r&&r<8))throw new Error(n);o[n]=r}else if("encoder"===n||"decoder"===n||"edit"===n||"undo"===n){if("function"!=typeof r)throw new Error(n);o[n]=r}else{if("string"!=typeof r)throw new Error(n);o[n]=r}return s(o,"mark","thousand"),s(o,"prefix","negative"),s(o,"prefix","negativeBefore"),o}(i),this.to=function(t){return a(i,r,t)},this.from=function(t){return a(i,o,t)})}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).TomSelect=e()}(this,function(){"use strict";function t(t,e){t.split(/\s+/).forEach(t=>{e(t)})}class e{constructor(){this._events={}}on(e,i){t(e,t=>{this._events[t]=this._events[t]||[],this._events[t].push(i)})}off(e,i){var s=arguments.length;0!==s?t(e,t=>{if(1===s)return delete this._events[t];t in this._events!=0&&this._events[t].splice(this._events[t].indexOf(i),1)}):this._events={}}trigger(e,...i){var s=this;t(e,t=>{if(t in s._events!=0)for(let e of s._events[t])e.apply(s,i)})}}var i=function(t,e){return"number"==typeof t&&"number"==typeof e?t>e?1:t<e?-1:0:(t=o(String(t||"")))>(e=o(String(e||"")))?1:e>t?-1:0},s=function(t,e,i){if(t&&e){if(!i)return t[e];for(var s=e.split(".");s.length&&(t=t[s.shift()]););return t}},n=function(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},r={a:"[aḀḁĂăÂâǍǎȺⱥȦȧẠạÄäÀàÁáĀāÃãÅåąĄÃąĄ]",b:"[b␢βΒB฿𐌁ᛒ]",c:"[cĆćĈĉČčĊċC̄c̄ÇçḈḉȻȼƇƈɕᴄＣｃ]",d:"[dĎďḊḋḐḑḌḍḒḓḎḏĐđD̦d̦ƉɖƊɗƋƌᵭᶁᶑȡᴅＤｄð]",e:"[eÉéÈèÊêḘḙĚěĔĕẼẽḚḛẺẻĖėËëĒēȨȩĘęᶒɆɇȄȅẾếỀềỄễỂểḜḝḖḗḔḕȆȇẸẹỆệⱸᴇＥｅɘǝƏƐε]",f:"[fƑƒḞḟ]",g:"[gɢ₲ǤǥĜĝĞğĢģƓɠĠġ]",h:"[hĤĥĦħḨḩẖẖḤḥḢḣɦʰǶƕ]",i:"[iÍíÌìĬĭÎîǏǐÏïḮḯĨĩĮįĪīỈỉȈȉȊȋỊịḬḭƗɨɨ̆ᵻᶖİiIıɪＩｉ]",j:"[jȷĴĵɈɉʝɟʲ]",k:"[kƘƙꝀꝁḰḱǨǩḲḳḴḵκϰ₭]",l:"[lŁłĽľĻļĹĺḶḷḸḹḼḽḺḻĿŀȽƚⱠⱡⱢɫɬᶅɭȴʟＬｌ]",n:"[nŃńǸǹŇňÑñṄṅŅņṆṇṊṋṈṉN̈n̈ƝɲȠƞᵰᶇɳȵɴＮｎŊŋ]",o:"[oØøÖöÓóÒòÔôǑǒŐőŎŏȮȯỌọƟɵƠơỎỏŌōÕõǪǫȌȍՕօ]",p:"[pṔṕṖṗⱣᵽƤƥᵱ]",q:"[qꝖꝗʠɊɋꝘꝙq̃]",r:"[rŔŕɌɍŘřŖŗṘṙȐȑȒȓṚṛⱤɽ]",s:"[sŚśṠṡṢṣꞨꞩŜŝŠšŞşȘșS̈s̈]",t:"[tŤťṪṫŢţṬṭƮʈȚțṰṱṮṯƬƭ]",u:"[uŬŭɄʉỤụÜüÚúÙùÛûǓǔŰűŬŭƯưỦủŪūŨũŲųȔȕ∪]",v:"[vṼṽṾṿƲʋꝞꝟⱱʋ]",w:"[wẂẃẀẁŴŵẄẅẆẇẈẉ]",x:"[xẌẍẊẋχ]",y:"[yÝýỲỳŶŷŸÿỸỹẎẏỴỵɎɏƳƴ]",z:"[zŹźẐẑŽžŻżẒẓẔẕƵƶ]"},o=function(){var t,e,i,s,n="",o={};for(i in r)if(r.hasOwnProperty(i))for(n+=s=r[i].substring(2,r[i].length-1),t=0,e=s.length;t<e;t++)o[s.charAt(t)]=i;var a=new RegExp("["+n+"]","g");return function(t){return t.replace(a,function(t){return o[t]}).toLowerCase()}}();class a{constructor(t,e){this.items=void 0,this.settings=void 0,this.items=t,this.settings=e||{diacritics:!0}}tokenize(t,e){if(!(t=String(t||"").toLowerCase().trim())||!t.length)return[];var i,s,o,a,l=[],c=t.split(/ +/);for(i=0,s=c.length;i<s;i++){if(o=n(c[i]),this.settings.diacritics)for(a in r)r.hasOwnProperty(a)&&(o=o.replace(new RegExp(a,"g"),r[a]));e&&(o="\\b"+o),l.push({string:c[i],regex:new RegExp(o,"i")})}return l}iterator(t,e){(Array.isArray(t)?Array.prototype.forEach||function(t){for(var e=0,i=this.length;e<i;e++)t(this[e],e,this)}:function(t){for(var e in this)this.hasOwnProperty(e)&&t(this[e],e,this)}).apply(t,[e])}getScoreFunction(t,e){var i,n,r,o,a;a=this.prepareSearch(t,e),n=a.tokens,i=a.options.fields,r=n.length,o=a.options.nesting;var l,c=function(t,e){var i,s;return t?-1===(s=(t=String(t||"")).search(e.regex))?0:(i=e.string.length/t.length,0===s&&(i+=.5),i):0},u=(l=i.length)?1===l?function(t,e){return c(s(e,i[0],o),t)}:function(t,e){for(var n=0,r=0;n<l;n++)r+=c(s(e,i[n],o),t);return r/l}:function(){return 0};return r?1===r?function(t){return u(n[0],t)}:"and"===a.options.conjunction?function(t){for(var e,i=0,s=0;i<r;i++){if((e=u(n[i],t))<=0)return 0;s+=e}return s/r}:function(t){for(var e=0,i=0;e<r;e++)i+=u(n[e],t);return i/r}:function(){return 0}}getSortFunction(t,e){var n,r,o,a,l,c,u,d,p,h,f;if(f=!(t=(o=this).prepareSearch(t,e)).query&&e.sort_empty||e.sort,p=function(t,i){return"$score"===t?i.score:s(o.items[i.id],t,e.nesting)},l=[],f)for(n=0,r=f.length;n<r;n++)(t.query||"$score"!==f[n].field)&&l.push(f[n]);if(t.query){for(h=!0,n=0,r=l.length;n<r;n++)if("$score"===l[n].field){h=!1;break}h&&l.unshift({field:"$score",direction:"desc"})}else for(n=0,r=l.length;n<r;n++)if("$score"===l[n].field){l.splice(n,1);break}for(d=[],n=0,r=l.length;n<r;n++)d.push("desc"===l[n].direction?-1:1);return(c=l.length)?1===c?(a=l[0].field,u=d[0],function(t,e){return u*i(p(a,t),p(a,e))}):function(t,e){var s,n,r;for(s=0;s<c;s++)if(r=l[s].field,n=d[s]*i(p(r,t),p(r,e)))return n;return 0}:null}prepareSearch(t,e){if("object"==typeof t)return t;var i=(e=Object.assign({},e)).fields,s=e.sort,n=e.sort_empty;return i&&!Array.isArray(i)&&(e.fields=[i]),s&&!Array.isArray(s)&&(e.sort=[s]),n&&!Array.isArray(n)&&(e.sort_empty=[n]),{options:e,query:String(t||"").toLowerCase(),tokens:this.tokenize(t,e.respect_word_boundaries),total:0,items:[]}}search(t,e){var i,s,n,r;return s=this.prepareSearch(t,e),e=s.options,t=s.query,r=e.score||this.getScoreFunction(s),t.length?this.iterator(this.items,function(t,n){i=r(t),(!1===e.filter||i>0)&&s.items.push({score:i,id:n})}):this.iterator(this.items,function(t,e){s.items.push({score:1,id:e})}),(n=this.getSortFunction(s,e))&&s.items.sort(n),s.total=s.items.length,"number"==typeof e.limit&&(s.items=s.items.slice(0,e.limit)),s}}function l(t,e){if("string"!=typeof e||e.length){var i="string"==typeof e?new RegExp(e,"i"):e;!function t(e){var s=0;if(3===e.nodeType){var n=e.data.search(i);if(n>=0&&e.data.length>0){var r=e.data.match(i),o=document.createElement("span");o.className="highlight";var a=e.splitText(n);a.splitText(r[0].length);var l=a.cloneNode(!0);o.appendChild(l),a.parentNode.replaceChild(o,a),s=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName)&&("highlight"!==e.className||"SPAN"!==e.tagName))for(var c=0;c<e.childNodes.length;++c)c+=t(e.childNodes[c]);return s}(t)}}const c=65,u=13,d=27,p=37,h=38,f=39,g=40,m=8,v=46,y=9,b="undefined"!=typeof navigator&&/Mac/.test(navigator.userAgent)?"metaKey":"ctrlKey";var w={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,closeAfterSelect:!1,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-control",inputClass:"ts-input",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:null,copyClassesToDropdown:!0,placeholder:null,hidePlaceholder:null,shouldLoad:function(t){return t.length>0},render:{}};function S(t){return null==t?null:"boolean"==typeof t?t?"1":"0":t+""}function x(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function O(t,e,i){var s,n=t.trigger,r={};for(s in t.trigger=function(){var i=arguments[0];if(-1===e.indexOf(i))return n.apply(t,arguments);r[i]=arguments},i.apply(t,[]),t.trigger=n,r)n.apply(t,r[s])}function C(t,e=!1){t&&(t.preventDefault(),e&&t.stopPropagation())}function A(t,e,i,s){t.addEventListener(e,i,s)}function k(t,e){return!!e&&!!e[t]&&1==(e.altKey?1:0)+(e.ctrlKey?1:0)+(e.shiftKey?1:0)+(e.metaKey?1:0)}function E(t,e){return t.getAttribute("id")||(t.setAttribute("id",e),e)}function I(t,e){var i=Object.assign({},w,e),s=i.dataAttr,n=i.labelField,r=i.valueField,o=i.disabledField,a=i.optgroupField,l=i.optgroupLabelField,c=i.optgroupValueField,u=t.tagName.toLowerCase(),d=t.getAttribute("placeholder")||t.getAttribute("data-placeholder");if(!d&&!i.allowEmptyOption){let e=t.querySelector('option[value=""]');e&&(d=e.textContent)}var p={placeholder:d,options:[],optgroups:[],items:[],maxItems:null};return"select"===u?(()=>{var e,u=p.options,d={},h=1,f=t=>{var e=Object.assign({},t.dataset),i=s&&e[s];return"string"==typeof i&&i.length&&(e=Object.assign(e,JSON.parse(i))),e},g=(t,e)=>{var s=S(t.value);if(s||i.allowEmptyOption)if(d.hasOwnProperty(s)){if(e){var l=d[s][a];l?Array.isArray(l)?l.push(e):d[s][a]=[l,e]:d[s][a]=e}}else{var c=f(t);c[n]=c[n]||t.textContent,c[r]=c[r]||s,c[o]=c[o]||t.disabled,c[a]=c[a]||e,c.$option=t,d[s]=c,u.push(c),t.selected&&p.items.push(s)}},m=t=>{var e,i;(i=f(t))[l]=i[l]||t.getAttribute("label")||"",i[c]=i[c]||h++,i[o]=i[o]||t.disabled,p.optgroups.push(i),e=i[c];for(const i of t.children)g(i,e)};p.maxItems=t.hasAttribute("multiple")?null:1;for(const i of t.children)"optgroup"===(e=i.tagName.toLowerCase())?m(i):"option"===e&&g(i)})():(()=>{var e,o,a=t.getAttribute(s);if(a){p.options=JSON.parse(a);for(const t of p.options)p.items.push(t[r])}else{var l=t.value.trim()||"";if(!i.allowEmptyOption&&!l.length)return;e=l.split(i.delimiter);for(const t of e)(o={})[n]=t,o[r]=t,p.options.push(o);p.items=e}})(),Object.assign({},w,p,e)}function _(t){if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(t.indexOf("<")>-1){let e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild}return document.querySelector(t)}function P(t,e){var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!1),t.dispatchEvent(i)}function L(t,e){Object.assign(t.style,e)}function F(t,...e){var i=N(e);(t=T(t)).map(t=>{i.map(e=>{t.classList.add(e)})})}function q(t,...e){var i=N(e);(t=T(t)).map(t=>{i.map(e=>{t.classList.remove(e)})})}function N(t){var e=[];for(let i of t)"string"==typeof i&&(i=i.trim().split(/[\11\12\14\15\40]/)),Array.isArray(i)&&(e=e.concat(i));return e.filter(Boolean)}function T(t){return Array.isArray(t)||(t=[t]),t}function V(t,e,i){if(!i||i.contains(t))for(;t&&t.matches;){if(t.matches(e))return t;t=t.parentNode}}function D(t,e){return e>0?t[t.length-1]:t[0]}function j(t,e){if(!t)return-1;e=e||t.nodeName;for(var i=0;t=t.previousElementSibling;)t.matches(e)&&i++;return i}function M(t,e){for(const i in e)t.setAttribute(i,e[i])}var U=0;class B extends(function(t){return t.plugins={},class extends t{static define(e,i){t.plugins[e]={name:e,fn:i}}initializePlugins(t){var e,i,s,n=[];if(this.plugins={names:[],settings:{},requested:{},loaded:{}},Array.isArray(t))for(e=0,i=t.length;e<i;e++)"string"==typeof t[e]?n.push(t[e]):(this.plugins.settings[t[e].name]=t[e].options,n.push(t[e].name));else if(t)for(s in t)t.hasOwnProperty(s)&&(this.plugins.settings[s]=t[s],n.push(s));for(;n.length;)this.require(n.shift())}loadPlugin(e){var i=this.plugins,s=t.plugins[e];if(!t.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');i.requested[e]=!0,i.loaded[e]=s.fn.apply(this,[this.plugins.settings[e]||{}]),i.names.push(e)}require(t){var e=this.plugins;if(!this.plugins.loaded.hasOwnProperty(t)){if(e.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');this.loadPlugin(t)}return e.loaded[t]}}}(e)){constructor(t,e){var i;super(),this.control_input=void 0,this.wrapper=void 0,this.dropdown=void 0,this.control=void 0,this.dropdown_content=void 0,this.order=0,this.settings=void 0,this.input=void 0,this.tabIndex=void 0,this.is_select_tag=void 0,this.rtl=void 0,this.inputId=void 0,this._destroy=void 0,this.sifter=void 0,this.tab_key=!1,this.isOpen=!1,this.isDisabled=!1,this.isRequired=void 0,this.isInvalid=!1,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreBlur=!1,this.hasOptions=!1,this.currentResults=null,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.options_i=0,this.userOptions={},this.items=[],this.renderCache={item:{},option:{}},U++;var s,n,r,o=_(t);if(o.tomselect)throw new Error("Tom Select already initialized on this element");o.tomselect=this,i=(window.getComputedStyle&&window.getComputedStyle(o,null)).getPropertyValue("direction"),this.settings=I(o,e),this.input=o,this.tabIndex=o.tabIndex||0,this.is_select_tag="select"===o.tagName.toLowerCase(),this.rtl=/rtl/i.test(i),this.inputId=E(o,"tomselect-"+U),this.isRequired=o.required,this.settings.load&&this.settings.loadThrottle&&(this.settings.load=(s=this.settings.load,n=this.settings.loadThrottle,function(t,e){var i=this;r&&(i.loading=Math.max(i.loading-1,0)),clearTimeout(r),r=setTimeout(function(){r=null,i.loadedSearches[t]=!0,s.call(i,t,e)},n)})),this.sifter=new a(this.options,{diacritics:this.settings.diacritics}),this.setupOptions(this.settings.options,this.settings.optgroups),delete this.settings.optgroups,delete this.settings.options,this.settings.mode=this.settings.mode||(1===this.settings.maxItems?"single":"multi"),"boolean"!=typeof this.settings.hideSelected&&(this.settings.hideSelected="multi"===this.settings.mode),"boolean"!=typeof this.settings.hidePlaceholder&&(this.settings.hidePlaceholder="multi"!==this.settings.mode);var l=this.settings.createFilter;"function"!=typeof l&&("string"==typeof l&&(l=new RegExp(l)),l instanceof RegExp?this.settings.createFilter=(t=>l.test(t)):this.settings.createFilter=(()=>!0)),this.initializePlugins(this.settings.plugins),this.setupCallbacks(),this.setupTemplates(),this.setup()}setup(){var t,e,i,s,n,r,o,a,l,c=this,u=c.settings,d=c.input;const p={passive:!0},h=c.inputId+"-ts-dropdown";if(r=c.settings.mode,o=d.getAttribute("class")||"",F(t=_("<div>"),u.wrapperClass,o,r),F(e=_('<div class="items">'),u.inputClass),t.append(e),F(s=c.render("dropdown"),u.dropdownClass,r),F(n=_(`<div role="listbox" id="${h}" tabindex="-1">`),u.dropdownContentClass),s.append(n),_(u.dropdownParent||t).appendChild(s),u.controlInput)i=_(u.controlInput);else{i=_('<input type="text" autocomplete="off" size="1" />');for(const t of["autocorrect","autocapitalize","autocomplete"])d.getAttribute(t)&&M(i,{[t]:d.getAttribute(t)})}u.controlInput||(i.tabIndex=d.disabled?-1:c.tabIndex,e.appendChild(i)),M(i,{role:"combobox",haspopup:"listbox","aria-expanded":"false","aria-controls":h}),l=E(i,c.inputId+"-tomselected");let f="label[for='"+c.inputId.replace(/['"\\]/g,"\\$&")+"']",g=document.querySelector(f);if(g&&(M(g,{for:l}),M(n,{"aria-labelledby":E(g,c.inputId+"-ts-label")})),c.settings.copyClassesToDropdown&&F(s,o),t.style.width=d.style.width,c.plugins.names.length&&(a="plugin-"+c.plugins.names.join(" plugin-"),F([t,s],a)),(null===u.maxItems||u.maxItems>1)&&c.is_select_tag&&M(d,{multiple:"multiple"}),c.settings.placeholder&&M(i,{placeholder:u.placeholder}),!c.settings.splitOn&&c.settings.delimiter){var m=c.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");c.settings.splitOn=new RegExp("\\s*"+m+"+\\s*")}c.control=e,c.control_input=i,c.wrapper=t,c.dropdown=s,c.dropdown_content=n,c.control_input.type=d.type,A(s,"mouseenter",t=>{var e=V(t.target,"[data-selectable]",s);if(e)return c.onOptionHover(t,e)},{capture:!0}),A(e,"mousedown",t=>{if(t.target==i)return c.clearActiveItems(),t.stopPropagation(),void c.inputState();var s=V(t.target,"."+c.settings.itemClass,e);return s?c.onItemSelect(t,s):c.onMouseDown(t)}),A(e,"click",t=>c.onClick(t)),A(i,"keydown",t=>c.onKeyDown(t)),A(i,"keyup",t=>c.onKeyUp(t)),A(i,"keypress",t=>c.onKeyPress(t)),A(i,"resize",()=>c.positionDropdown(),p),A(i,"blur",t=>c.onBlur(t)),A(i,"focus",t=>{c.ignoreBlur=!1,c.onFocus(t)}),A(i,"paste",t=>c.onPaste(t));var v=t=>{var e=V(t.target,"[data-selectable]",c.dropdown);if(!e&&!c.wrapper.contains(t.target))return c.isFocused&&c.blur(),void c.inputState();C(t,!0),e&&c.onOptionSelect(t,e)},y=()=>{c.isOpen&&c.positionDropdown()};A(document,"mousedown",v),A(window,"sroll",y,p),A(window,"resize",y,p),c._destroy=(()=>{document.removeEventListener("mousedown",v),window.removeEventListener("sroll",y),window.removeEventListener("resize",y)}),this.revertSettings={innerHTML:d.innerHTML,tabIndex:d.tabIndex},d.tabIndex=-1,M(d,{hidden:"hidden"}),d.insertAdjacentElement("afterend",c.wrapper),c.setValue(u.items),delete u.items,A(d,"invalid",t=>{C(t),c.isInvalid||(c.isInvalid=!0,c.refreshState())}),c.updateOriginalInput(),c.refreshItems(),c.refreshState(),c.inputState(),c.isSetup=!0,d.disabled&&c.disable(),c.on("change",this.onChange),F(d,"tomselected"),c.trigger("initialize"),!0===u.preload&&c.load("")}setupOptions(t=[],e=[]){for(const e of t)this.registerOption(e);for(const t of e)this.registerOptionGroup(t)}setupTemplates(){var t=this.settings.labelField,e=this.settings.optgroupLabelField,i={optgroup:(t,e)=>{let i=document.createElement("div");return i.className="optgroup",i.appendChild(t.options),i},optgroup_header:(t,i)=>'<div class="optgroup-header">'+i(t[e])+"</div>",option:(e,i)=>"<div>"+i(e[t])+"</div>",item:(e,i)=>"<div>"+i(e[t])+"</div>",option_create:(t,e)=>'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>",no_results:(t,e)=>'<div class="no-results">No results found</div>',loading:(t,e)=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};this.settings.render=Object.assign({},i,this.settings.render)}setupCallbacks(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in i)(e=this.settings[i[t]])&&this.on(t,e)}onClick(t){this.isFocused&&this.isOpen||(this.focus(),C(t))}onMouseDown(t){var e=this;if(e.isFocused)return"single"!==e.settings.mode&&e.setActiveItem(),e.open(),!1;setTimeout(()=>e.focus(),0)}onChange(){P(this.input,"input"),P(this.input,"change")}onPaste(t){var e=this;e.isFull()||e.isInputHidden||e.isLocked?C(t):e.settings.splitOn&&setTimeout(()=>{var t=e.inputValue();if(t.match(e.settings.splitOn)){var i=t.trim().split(e.settings.splitOn);for(const t of i)e.createItem(t)}},0)}onKeyPress(t){if(!this.isLocked){var e=String.fromCharCode(t.keyCode||t.which);return this.settings.create&&"multi"===this.settings.mode&&e===this.settings.delimiter?(this.createItem(),void C(t)):void 0}C(t)}onKeyDown(t){if(this.isLocked)t.keyCode!==y&&C(t);else{switch(t.keyCode){case c:if(k(b,t))return void this.selectAll();break;case d:return this.isOpen&&(C(t,!0),this.close()),void this.clearActiveItems();case g:if(!this.isOpen&&this.hasOptions)this.open();else if(this.activeOption){let t=this.getAdjacent(this.activeOption,1);t&&this.setActiveOption(t)}return void C(t);case h:if(this.activeOption){let t=this.getAdjacent(this.activeOption,-1);t&&this.setActiveOption(t)}return void C(t);case u:return void(this.isOpen&&this.activeOption&&(this.onOptionSelect(t,this.activeOption),C(t)));case p:return void this.advanceSelection(-1,t);case f:return void this.advanceSelection(1,t);case y:return this.settings.selectOnTab&&this.isOpen&&this.activeOption&&(this.tab_key=!0,this.onOptionSelect(t,this.activeOption),C(t),this.tab_key=!1),void(this.settings.create&&this.createItem()&&C(t));case m:case v:return void this.deleteSelection(t)}this.isInputHidden&&!k(b,t)&&C(t)}}onKeyUp(t){if(this.isLocked)C(t);else{var e=this.inputValue();this.lastValue!==e&&(this.lastValue=e,this.settings.shouldLoad.call(this,e)&&this.load(e),this.refreshOptions(),this.trigger("type",e))}}onFocus(t){var e=this.isFocused;if(this.isDisabled)return this.blur(),void C(t);this.ignoreFocus||(this.isFocused=!0,"focus"===this.settings.preload&&this.load(""),e||this.trigger("focus"),this.activeItems.length||(this.showInput(),this.setActiveItem(),this.refreshOptions(!!this.settings.openOnFocus)),this.refreshState())}onBlur(t){var e=this;if(e.isFocused){if(e.isFocused=!1,e.ignoreFocus=!1,!e.ignoreBlur&&document.activeElement===e.dropdown_content)return e.ignoreBlur=!0,void e.onFocus(t);var i=()=>{e.close(),e.setActiveItem(),e.setCaret(e.items.length),e.trigger("blur")};e.settings.create&&e.settings.createOnBlur?e.createItem(null,!1,i):i()}}onOptionHover(t,e){}onOptionSelect(t,e){var i,s=this;e&&(e.parentElement&&e.parentElement.matches("[data-disabled]")||(e.classList.contains("create")?s.createItem(null,!0,()=>{s.settings.closeAfterSelect&&s.close()}):void 0!==(i=e.dataset.value)&&(s.lastQuery=null,s.addItem(i),s.settings.closeAfterSelect?s.close():!s.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&s.setActiveOption(s.getOption(i)))))}onItemSelect(t,e){this.isLocked||"multi"===this.settings.mode&&(C(t),this.setActiveItem(e,t))}load(t){var e=this,i=e.settings.load;i&&(e.loadedSearches.hasOwnProperty(t)||(F(e.wrapper,e.settings.loadingClass),e.loading++,i.call(e,t,function(t,i){e.loading=Math.max(e.loading-1,0),e.lastQuery=null,e.clearActiveOption(),e.setupOptions(t,i),e.refreshOptions(e.isFocused&&!e.isInputHidden),e.loading||q(e.wrapper,e.settings.loadingClass),e.trigger("load",t,i)})))}onSearchChange(t){this.load(t)}setTextboxValue(t=""){var e=this.control_input;e.value!==t&&(e.value=t,P(e,"update"),this.lastValue=t)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(t,e){O(this,e?[]:["change"],()=>{this.clear(e),this.addItems(t,e)})}setMaxItems(t){0===t&&(t=null),this.settings.maxItems=t,this.refreshState()}setActiveItem(t,e){var i,s,n,r,o,a;if("single"!==this.settings.mode){if(!t)return this.clearActiveItems(),void(this.isFocused&&this.showInput());if("mousedown"===(i=e&&e.type.toLowerCase())&&k("shiftKey",e)&&this.activeItems.length){for(a=this.getLastActive(),(n=Array.prototype.indexOf.call(this.control.children,a))>(r=Array.prototype.indexOf.call(this.control.children,t))&&(o=n,n=r,r=o),s=n;s<=r;s++)t=this.control.children[s],-1===this.activeItems.indexOf(t)&&this.setActiveItemClass(t);C(e)}else"mousedown"===i&&k(b,e)||"keydown"===i&&k("shiftKey",e)?t.classList.contains("active")?this.removeActiveItem(t):this.setActiveItemClass(t):(this.clearActiveItems(),this.setActiveItemClass(t));this.hideInput(),this.isFocused||this.focus()}}setActiveItemClass(t){var e=this.control.querySelector(".last-active");e&&q(e,"last-active"),F(t,"active last-active"),-1==this.activeItems.indexOf(t)&&this.activeItems.push(t)}removeActiveItem(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),q(t,"active")}clearActiveItems(){q(this.activeItems,"active"),this.activeItems=[]}setActiveOption(t){var e,i,s;if(t===this.activeOption)return;if(this.clearActiveOption(),!t)return;this.activeOption=t,M(this.control_input,{"aria-activedescendant":t.getAttribute("id")}),M(t,{"aria-selected":"true"}),F(t,"active"),e=this.dropdown_content.clientHeight;let n=this.dropdown_content.scrollTop||0;i=this.activeOption.offsetHeight,(s=this.activeOption.getBoundingClientRect().top-this.dropdown_content.getBoundingClientRect().top+n)+i>e+n?this.dropdown_content.scrollTop=s-e+i:s<n&&(this.dropdown_content.scrollTop=s)}clearActiveOption(){this.activeOption&&(q(this.activeOption,"active"),this.activeOption.removeAttribute("aria-selected")),this.activeOption=null,this.control_input.removeAttribute("aria-activedescendant")}selectAll(){"single"!==this.settings.mode&&(this.activeItems=this.controlChildren(),this.activeItems.length&&(F(this.activeItems,"active"),this.hideInput(),this.close()),this.focus())}inputState(){this.settings.controlInput||(this.activeItems.length>0||!this.isFocused&&this.settings.hidePlaceholder&&this.items.length>0?(this.setTextboxValue(),this.isInputHidden=!0,F(this.wrapper,"input-hidden")):(this.isInputHidden=!1,q(this.wrapper,"input-hidden")))}hideInput(){this.inputState()}showInput(){this.inputState()}inputValue(){return this.control_input.value.trim()}focus(){var t=this;t.isDisabled||(t.ignoreFocus=!0,t.control_input.focus(),setTimeout(()=>{t.ignoreFocus=!1,t.onFocus()},0))}blur(){this.control_input.blur(),this.onBlur(null)}getScoreFunction(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}getSearchOptions(){var t,e=this.settings;return"string"==typeof e.sortField&&(t=[{field:e.sortField}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting}}search(t){var e,i,s,n=this.settings,r=this.getSearchOptions();if(n.score&&"function"!=typeof(s=this.settings.score.call(this,t)))throw new Error('Tom Select "score" setting must be a function that returns a function');if(t!==this.lastQuery?(this.lastQuery=t,i=this.sifter.search(t,Object.assign(r,{score:s})),this.currentResults=i):i=Object.assign({},this.currentResults),n.hideSelected)for(e=i.items.length-1;e>=0;e--)-1!==this.items.indexOf(S(i.items[e].id))&&i.items.splice(e,1);return i}refreshOptions(t=!0){var e,i,s,n,r,o,a,c,u,d,p,h,f,g=this,m=g.inputValue(),v=g.search(m),y=g.activeOption&&S(g.activeOption.dataset.value),b=g.settings.shouldOpen||!1;for(n=v.items.length,"number"==typeof g.settings.maxOptions&&(n=Math.min(n,g.settings.maxOptions)),n>0&&(b=!0),h={},r=[],e=0;e<n;e++){let t=g.options[v.items[e].id],n=S(t[g.settings.valueField]),l=g.getOption(n);for(l||(l=g.render("option",t)),g.settings.hideSelected||l.classList.toggle("selected",g.items.includes(n)),o=t[g.settings.optgroupField]||"",i=0,s=(a=Array.isArray(o)?o:[o])&&a.length;i<s;i++)o=a[i],g.optgroups.hasOwnProperty(o)||(o=""),h.hasOwnProperty(o)||(h[o]=document.createDocumentFragment(),r.push(o)),i>0&&(q(l=l.cloneNode(!0),"active"),l.removeAttribute("aria-selected")),h[o].appendChild(l)}for(o of(this.settings.lockOptgroupOrder&&r.sort((t,e)=>(g.optgroups[t]&&g.optgroups[t].$order||0)-(g.optgroups[e]&&g.optgroups[e].$order||0)),c=document.createDocumentFragment(),r))if(g.optgroups.hasOwnProperty(o)&&h[o].children.length){let t=document.createDocumentFragment();t.appendChild(g.render("optgroup_header",g.optgroups[o])),t.appendChild(h[o]);let e=g.render("optgroup",{group:g.optgroups[o],options:t});c.appendChild(e)}else c.appendChild(h[o]);if(g.dropdown_content.innerHTML="",g.dropdown_content.appendChild(c),g.settings.highlight&&(g.dropdown_content,f=document.querySelectorAll("span.highlight"),Array.prototype.forEach.call(f,function(t,e){var i=t.parentNode;i.replaceChild(t.firstChild,t),i.normalize()}),v.query.length&&v.tokens.length))for(const t of v.tokens)l(g.dropdown_content,t.regex);var w=t=>{let e=g.render(t,{input:m});return e&&(b=!0,g.dropdown_content.insertBefore(e,g.dropdown_content.firstChild)),e};if(g.settings.shouldLoad.call(g,m)?g.loading?w("loading"):0===v.items.length&&w("no_results"):w("not_loading"),(u=g.canCreate(m))&&(p=w("option_create")),g.hasOptions=v.items.length>0||u,b){if(v.items.length>0){if(!(d=y&&g.getOption(y))||!g.dropdown_content.contains(d)){let t=0;p&&!g.settings.addPrecedence&&(t=1),d=g.selectable()[t]}}else d=p;g.setActiveOption(d),t&&!g.isOpen&&g.open()}else g.clearActiveOption(),t&&g.isOpen&&g.close()}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(t){var e;if(Array.isArray(t))for(const e of t)this.addOption(e);else(e=this.registerOption(t))&&(this.userOptions[e]=!0,this.lastQuery=null,this.trigger("option_add",e,t))}registerOption(t){var e=S(t[this.settings.valueField]);return null!==e&&!this.options.hasOwnProperty(e)&&(t.$order=t.$order||++this.order,t.$id=this.inputId+"-opt-"+this.options_i++,this.options[e]=t,e)}registerOptionGroup(t){var e=S(t[this.settings.optgroupValueField]);return null!==e&&(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)}addOptionGroup(t,e){var i;e[this.settings.optgroupValueField]=t,(i=this.registerOptionGroup(e))&&this.trigger("optgroup_add",i,e)}removeOptionGroup(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(t,e){var i,s,n,r,o,a,l;if(t=S(t),n=S(e[this.settings.valueField]),null!==t&&this.options.hasOwnProperty(t)){if("string"!=typeof n)throw new Error("Value must be set in option data");l=this.options[t].$order,n!==t&&(delete this.options[t],-1!==(r=this.items.indexOf(t))&&this.items.splice(r,1,n)),e.$order=e.$order||l,this.options[n]=e,o=this.renderCache.item,a=this.renderCache.option,o&&(delete o[t],delete o[n]),a&&(delete a[t],delete a[n]),-1!==this.items.indexOf(n)&&(i=this.getItem(t),s=this.render("item",e),i.classList.contains("active")&&F(s,"active"),i.parentNode.insertBefore(s,i),i.remove()),this.lastQuery=null,this.isOpen&&this.refreshOptions(!1)}}removeOption(t,e){t=S(t);var i=this.renderCache.item,s=this.renderCache.option;i&&delete i[t],s&&delete s[t],delete this.userOptions[t],delete this.options[t],this.lastQuery=null,this.trigger("option_remove",t),this.removeItem(t,e)}clearOptions(){this.loadedSearches={},this.userOptions={},this.clearCache();var t={};for(let e in this.options)this.options.hasOwnProperty(e)&&this.items.indexOf(e)>=0&&(t[e]=this.options[e]);this.options=this.sifter.items=t,this.lastQuery=null,this.trigger("option_clear")}getOption(t){return this.renderCache.option.hasOwnProperty(t)?this.renderCache.option[t]:this.getElementWithValue(t,this.selectable())}getAdjacent(t,e,i="option"){var s;if(t){s="item"==i?this.controlChildren():this.dropdown_content.querySelectorAll("[data-selectable]");for(let i=0;i<s.length;i++)if(s[i]==t)return e>0?s[i+1]:s[i-1]}}getElementWithValue(t,e){if(null!==(t=S(t)))for(const i of e){let e=i;if(e.getAttribute("data-value")===t)return e}}getItem(t){return this.getElementWithValue(t,this.control.children)}addItems(t,e){var i=this;i.buffer=document.createDocumentFragment();for(const t of i.control.children)i.buffer.appendChild(t);var s=Array.isArray(t)?t:[t];for(let t=0,n=(s=s.filter(t=>-1===i.items.indexOf(t))).length;t<n;t++)i.isPending=t<n-1,i.addItem(s[t],e);var n=i.control;n.insertBefore(i.buffer,n.firstChild),i.buffer=null}addItem(t,e){O(this,e?[]:["change"],()=>{var i,s,n=this.settings.mode;if(t=S(t),(-1===this.items.indexOf(t)||("single"===n&&this.close(),"single"!==n&&this.settings.duplicates))&&this.options.hasOwnProperty(t)&&("single"===n&&this.clear(e),"multi"!==n||!this.isFull())){if(i=this.render("item",this.options[t]),this.control.contains(i)&&(i=i.cloneNode(!0)),s=this.isFull(),this.items.splice(this.caretPos,0,t),this.insertAtCaret(i),this.isSetup){let s=this.selectable();if(!this.isPending){let e=this.getOption(t),i=this.getAdjacent(e,1);this.refreshOptions(this.isFocused&&"single"!==n),i&&this.setActiveOption(i)}!s.length||this.isFull()?this.close():this.isPending||this.positionDropdown(),this.trigger("item_add",t,i),this.isPending||this.updateOriginalInput({silent:e})}(!this.isPending||!s&&this.isFull())&&this.refreshState()}})}removeItem(t,e){var i,s,n=this.getItem(t);n&&(t=S(n.dataset.value),-1!==(i=this.items.indexOf(t))&&(n.remove(),n.classList.contains("active")&&(s=this.activeItems.indexOf(n),this.activeItems.splice(s,1),q(n,"active")),this.items.splice(i,1),this.lastQuery=null,!this.settings.persist&&this.userOptions.hasOwnProperty(t)&&this.removeOption(t,e),i<this.caretPos&&this.setCaret(this.caretPos-1),this.updateOriginalInput({silent:e}),this.refreshState(),this.positionDropdown(),this.trigger("item_remove",t,n)))}createItem(t,e=!0,i){var s,n=this,r=n.caretPos;if(t=t||n.inputValue(),"function"!=typeof i&&(i=(()=>{})),!n.canCreate(t))return i(),!1;n.lock();var o=!1,a=t=>{if(n.unlock(),!t||"object"!=typeof t)return i();var s=S(t[n.settings.valueField]);if("string"!=typeof s)return i();n.setTextboxValue(),n.addOption(t),n.setCaret(r),n.addItem(s),n.refreshOptions(e&&"single"!==n.settings.mode),i(t),o=!0};return s="function"==typeof n.settings.create?n.settings.create.call(this,t,a):{[n.settings.labelField]:t,[n.settings.valueField]:t},o||a(s),!0}refreshItems(){this.lastQuery=null,this.isSetup&&this.addItems(this.items),this.updateOriginalInput(),this.refreshState()}refreshState(){this.refreshValidityState();var t=this.isFull(),e=this.isLocked;this.wrapper.classList.toggle("rtl",this.rtl);var i,s=this.control.classList;s.toggle("focus",this.isFocused),s.toggle("disabled",this.isDisabled),s.toggle("required",this.isRequired),s.toggle("invalid",this.isInvalid),s.toggle("locked",e),s.toggle("full",t),s.toggle("not-full",!t),s.toggle("input-active",this.isFocused&&!this.isInputHidden),s.toggle("dropdown-active",this.isOpen),s.toggle("has-options",(i=this.options,0===Object.keys(i).length)),s.toggle("has-items",this.items.length>0)}refreshValidityState(){if(this.input.checkValidity){this.isRequired&&(this.input.required=!0);var t=!this.input.checkValidity();this.isInvalid=t,this.control_input.required=t,this.isRequired&&(this.input.required=!t)}}isFull(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems}updateOriginalInput(t={}){var e,i,s=this;if(s.is_select_tag)for(s.input.querySelectorAll("option[selected]").forEach(t=>{-1==s.items.indexOf(t.value)&&(t.selected=!1,t.removeAttribute("selected"))}),e=s.items.length-1;e>=0;e--){var n;if(i=s.items[e],!(n=s.options[i].$option)){const t=s.options[i][s.settings.labelField]||"";n=_('<option value="'+x(i)+'">'+x(t)+"</option>"),s.options[i].$option=n}n.selected=!0,M(n,{selected:"true"}),s.input.prepend(n)}else s.input.value=s.getValue();s.isSetup&&(t.silent||s.trigger("change",s.getValue()))}open(){this.isLocked||this.isOpen||"multi"===this.settings.mode&&this.isFull()||(this.isOpen=!0,M(this.control_input,{"aria-expanded":"true"}),this.refreshState(),L(this.dropdown,{visibility:"hidden",display:"block"}),this.positionDropdown(),L(this.dropdown,{visibility:"visible",display:"block"}),this.focus(),this.trigger("dropdown_open",this.dropdown))}close(){var t=this.isOpen;this.setTextboxValue(),"single"===this.settings.mode&&this.items.length&&(this.hideInput(),this.tab_key||this.blur()),this.isOpen=!1,M(this.control_input,{"aria-expanded":"false"}),L(this.dropdown,{display:"none"}),this.clearActiveOption(),this.refreshState(),t&&this.trigger("dropdown_close",this.dropdown)}positionDropdown(){if("body"===this.settings.dropdownParent){var t=this.control,e=t.getBoundingClientRect(),i=t.offsetHeight+e.top+window.scrollY,s=e.left+window.scrollX;L(this.dropdown,{width:e.width+"px",top:i+"px",left:s+"px"})}}clear(t){if(this.items.length){var e=this.controlChildren();for(const t of e)t.remove();this.items=[],this.lastQuery=null,this.setCaret(0),this.setActiveItem(),this.updateOriginalInput({silent:t}),this.refreshState(),this.showInput(),this.trigger("clear")}}insertAtCaret(t){var e=Math.min(this.caretPos,this.items.length),i=this.buffer||this.control;0===e?i.insertBefore(t,i.firstChild):i.insertBefore(t,i.children[e]),this.setCaret(e+1)}deleteSelection(t){var e,i,s,n,r;if(e=t&&t.keyCode===m?-1:1,i={start:(r=this.control_input).selectionStart,length:r.selectionEnd-r.selectionStart},s=[],this.activeItems.length){n=j(D(this.activeItems,e)),e>0&&n++;for(const t of this.activeItems)s.push(t.dataset.value)}else(this.isFocused||"single"===this.settings.mode)&&this.items.length&&(e<0&&0===i.start&&0===i.length?s.push(this.items[this.caretPos-1]):e>0&&i.start===this.inputValue().length&&s.push(this.items[this.caretPos]));if(!s.length||"function"==typeof this.settings.onDelete&&!1===this.settings.onDelete.call(this,s,t))return!1;for(C(t,!0),void 0!==n&&this.setCaret(n);s.length;)this.removeItem(s.pop());return this.showInput(),this.positionDropdown(),this.refreshOptions(!1),!0}advanceSelection(t,e){var i,s,n;this.rtl&&(t*=-1),this.inputValue().length||(k(b,e)||k("shiftKey",e)?(n=(s=this.getLastActive(t))?s.classList.contains("active")?this.getAdjacent(s,t,"item"):s:t>0?this.control_input.nextElementSibling:this.control_input.previousElementSibling)&&(n.classList.contains("active")&&this.removeActiveItem(s),this.setActiveItemClass(n)):this.isFocused&&!this.activeItems.length?this.setCaret(this.caretPos+t):(s=this.getLastActive(t))&&(i=j(s),this.setCaret(t>0?i+1:i),this.setActiveItem()))}getLastActive(t){let e=this.control.querySelector(".last-active");if(e)return e;var i=this.control.querySelectorAll(".active");return i?D(i,t):void 0}setCaret(t){var e=this;"single"===e.settings.mode||e.settings.controlInput?t=e.items.length:(t=Math.max(0,Math.min(e.items.length,t)))==e.caretPos||e.isPending||e.controlChildren().forEach((i,s)=>{s<t?e.control_input.insertAdjacentElement("beforebegin",i):e.control.appendChild(i)}),e.caretPos=t}controlChildren(){return Array.from(this.control.getElementsByClassName(this.settings.itemClass))}lock(){this.close(),this.isLocked=!0,this.refreshState()}unlock(){this.isLocked=!1,this.refreshState()}disable(){this.input.disabled=!0,this.control_input.disabled=!0,this.control_input.tabIndex=-1,this.isDisabled=!0,this.lock()}enable(){this.input.disabled=!1,this.control_input.disabled=!1,this.control_input.tabIndex=this.tabIndex,this.isDisabled=!1,this.unlock()}destroy(){var t=this.revertSettings;this.trigger("destroy"),this.off(),this.wrapper.remove(),this.dropdown.remove(),this.input.innerHTML=t.innerHTML,this.input.tabIndex=t.tabIndex,q(this.input,"tomselected"),this.input.removeAttribute("hidden"),this.input.required=this.isRequired,this._destroy(),delete this.input.tomselect}render(t,e){var i,s;if(("option"===t||"item"===t)&&(i=S(e[this.settings.valueField]),this.renderCache[t].hasOwnProperty(i)))return this.renderCache[t][i];var n=this.settings.render[t];return"function"!=typeof n?null:(s=n.call(this,e,x))?(s=_(s),"option"===t||"option_create"===t?e[this.settings.disabledField]?M(s,{"aria-disabled":"true"}):M(s,{"data-selectable":""}):"optgroup"===t&&(M(s,{"data-group":e.group[this.settings.optgroupValueField]}),e.group[this.settings.disabledField]&&M(s,{"data-disabled":""})),"option"!==t&&"item"!==t||(M(s,{"data-value":i}),"item"===t?F(s,this.settings.itemClass):(F(s,this.settings.optionClass),M(s,{role:"option",id:e.$id})),this.renderCache[t][i]=s),s):s}clearCache(t){void 0===t?this.renderCache={item:{},option:{}}:this.renderCache[t]={}}canCreate(t){return this.settings.create&&t.length&&this.settings.createFilter.call(this,t)}hook(t,e,i){var s=this,n=s[e];s[e]=function(){var e,r;return"after"===t&&(e=n.apply(s,arguments)),r=i.apply(s,arguments),"instead"===t?r:("before"===t&&(e=n.apply(s,arguments)),e)}}}return B.define("change_listener",function(t){var e=this,i=!1;A(e.input,"change",()=>{if(i)i=!1;else{i=!0;var t=I(e.input,{});e.setupOptions(t.options,t.optgroups),e.setValue(t.items)}})}),B.define("checkbox_options",function(t){var e=this,i=e.onOptionSelect;e.settings.hideSelected=!1;var s=function(t){var e=t.querySelector("input");t.classList.contains("selected")?e.checked=!0:e.checked=!1};e.hook("after","setupTemplates",()=>{var t=e.settings.render.option;e.settings.render.option=function(i){var s=_(t.apply(e,arguments)),n=document.createElement("input");n.addEventListener("click",function(t){C(t)}),n.type="checkbox";var r=S(i[e.settings.valueField]);return e.items.indexOf(r)>-1&&(n.checked=!0),s.prepend(n),s}}),e.on("item_remove",t=>{var i=e.getOption(t);i&&(i.classList.remove("selected"),s(i))}),e.hook("instead","onOptionSelect",function(t,s){return s.classList.contains("selected")?(s.classList.remove("selected"),e.removeItem(s.dataset.value),e.refreshOptions(),void C(t,!0)):i.apply(e,arguments)}),e.hook("after","onOptionSelect",(t,e)=>{s(e)})}),B.define("clear_button",function(t){var e=this;t=Object.assign({className:"clear-button",title:"Clear All",html:t=>`<div class="${t.className}" title="${t.title}">&times;</div>`},t),e.hook("after","setup",()=>{var i=_(t.html(t));i.addEventListener("click",t=>{for(;e.items.length>0;)e.removeItem(e.items[0],!0);e.updateOriginalInput(),t.preventDefault(),t.stopPropagation()}),e.control.appendChild(i)})}),B.define("drag_drop",function(t){var e=this;if(!$.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===e.settings.mode){var i=e.lock,s=e.unlock;e.hook("instead","lock",function(){var t=e.control.dataset.sortable;return t&&t.disable(),i.apply(e,arguments)}),e.hook("instead","unlock",function(){var t=e.control.dataset.sortable;return t&&t.enable(),s.apply(e,arguments)}),e.hook("after","setup",()=>{var t=$(e.control).sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:e.isLocked,start:(e,i)=>{i.placeholder.css("width",i.helper.css("width")),t.css({overflow:"visible"})},stop:()=>{t.css({overflow:"hidden"});var i=[];t.children("[data-value]").each(function(){i.push($(this).attr("data-value"))}),e.setValue(i)}})})}}),B.define("dropdown_header",function(t){var e=this;t=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:t=>'<div class="'+t.headerClass+'"><div class="'+t.titleRowClass+'"><span class="'+t.labelClass+'">'+t.title+'</span><a class="'+t.closeClass+'">&times;</a></div></div>'},t),e.hook("after","setup",()=>{var i=_(t.html(t)),s=i.querySelector("."+t.closeClass);s&&s.addEventListener("click",t=>{C(t,!0),e.close()}),e.dropdown.insertBefore(i,e.dropdown.firstChild)})}),B.define("dropdown_input",function(){var t=this,e=t.settings.controlInput||'<input type="text" autocomplete="off" class="dropdown-input" />';e=_(e),t.settings.placeholder&&M(e,{placeholder:t.settings.placeholder}),t.settings.controlInput=e,t.settings.shouldOpen=!0,t.hook("after","setup",()=>{M(t.wrapper,{tabindex:t.input.disabled?"-1":t.tabIndex}),A(t.wrapper,"keypress",e=>{if(!t.control.contains(e.target)&&!t.dropdown.contains(e.target))switch(e.keyCode){case u:return void t.onClick(e)}});let i=_('<div class="dropdown-input-wrap">');i.appendChild(e),t.dropdown.insertBefore(i,t.dropdown.firstChild)})}),B.define("input_autogrow",function(){var t=this;t.hook("after","setup",()=>{var e=document.createElement("span"),i=t.control_input;e.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",t.wrapper.appendChild(e);for(const t of["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"])e.style[t]=i.style[t];var s=()=>{t.items.length>0?(e.textContent=i.value,i.style.width=e.clientWidth+"px"):i.style.width=""};s(),t.on("update item_add item_remove",s),A(i,"input",s),A(i,"keyup",s),A(i,"blur",s),A(i,"update",s)})}),B.define("no_backspace_delete",function(){var t=this,e=t.deleteSelection;this.hook("instead","deleteSelection",function(){return!!t.activeItems.length&&e.apply(t,arguments)})}),B.define("no_active_items",function(t){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}),B.define("optgroup_columns",function(){var t=this,e=t.onKeyDown;t.hook("instead","onKeyDown",function(i){var s,n,r,o;if(!t.isOpen||i.keyCode!==p&&i.keyCode!==f)return e.apply(t,arguments);o=V(t.activeOption,"[data-group]"),s=j(t.activeOption,"[data-selectable]"),(o=i.keyCode===p?o.previousSibling:o.nextSibling)&&(n=(r=o.querySelectorAll("[data-selectable]"))[Math.min(r.length-1,s)])&&t.setActiveOption(n)})}),B.define("remove_button",function(t){t=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},t);var e=this;if(t.append){var i='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+x(t.title)+'">'+t.label+"</a>";e.hook("after","setupTemplates",()=>{var t=e.settings.render.item;e.settings.render.item=function(){var s=_(t.apply(e,arguments)),n=_(i);return s.appendChild(n),A(n,"mousedown",t=>{C(t,!0)}),A(n,"click",t=>{if(C(t,!0),!e.isLocked){var i=s.dataset.value;e.removeItem(i),e.refreshOptions(!1)}}),s}})}}),B.define("restore_on_backspace",function(t){var e=this;t.text=t.text||function(t){return t[e.settings.labelField]},e.on("item_remove",function(i){if(""===e.control_input.value.trim()){var s=e.options[i];s&&e.setTextboxValue(t.text.call(e,s))}})}),B});var tomSelect=function(t,e){return new TomSelect(t,e)};const app={};if(app.compare=(async()=>{new TomSelect("#select-players",{maxItems:8,plugins:{remove_button:{title:"Remove"}},persist:!1}),document.addEventListener("click",function(t){t.target.matches(".player-comparison__group-title")&&(t.preventDefault(),t.target.parentElement.parentElement.classList.toggle("active"))},!1);const t=document.querySelector(".player-comparison__stats.name-area");new IntersectionObserver(([t])=>t.target.classList.toggle("isSticky",t.intersectionRatio<1),{threshold:[1]}).observe(t);let e=document.querySelector(".player-comparison__select-wrapper");e.querySelector("button").addEventListener("click",async t=>{t.preventDefault();let i=e.querySelector("select").selectedOptions,s=Array.from(i).map(({value:t})=>t),n=await fetch("/compare/data",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Cache-Control":"no-cache"},body:JSON.stringify(s)}),r=await n.json();r&&(await async function(t){document.querySelectorAll(".player-value").forEach(t=>t.remove());for(let e in t){t[e].player;for(let i in t[e]){let s=t[e][i];if(document.querySelector("."+i)){let t=document.createElement("div");t.classList.add("player-value"),t.innerText=s,util.insertAfter(t,document.querySelector("."+i+" .label"))}}}}(r),await async function(){document.querySelectorAll(".row:not(.player)").forEach(t=>{let e={},i=t.querySelector(".label").innerText;t.querySelectorAll(".player-value").forEach(s=>{let n=function(t){if(/^([0-9][0-9]):[0-5][0-9]$/.test(t)){let e=t.replace(":",".");return parseFloat(e)}if(t.match(/\d+:[0-5]\d/)){let e=t.split(":");return 60*+e[0]*60+60*+e[1]+ +e[2]}return parseFloat(t)}(s.innerText);e.hasOwnProperty(i)?n>=e[i]&&(n>e[i]&&t.querySelectorAll(".highlight").forEach(t=>t.classList.remove("highlight")),s.classList.add("highlight"),e[i]=n):(e[i]=n,s.classList.add("highlight"))})})}(),document.querySelector(".compare-results").style.display="block")})}),document.querySelector(".player-comparison__select")&&app.compare(),app.filters=(async()=>{function t(t){document.querySelector(".drop-down_list.active")&&document.querySelector(".drop-down_list.active").classList.remove("active"),t.querySelector(".drop-down_list").classList.add("active"),document.body.addEventListener("click",function e(i){util.findParentBySelector(i.target,".drop-down")||(t.querySelector(".drop-down_list").classList.remove("active"),document.body.removeEventListener("click",e))})}!function(){const t=document.getElementById("slider");let e=new URLSearchParams(window.location.search),i=e.get("elo")?e.get("elo").split("-"):[2e3,3e3];noUiSlider.create(t,{start:i,connect:!0,tooltips:!0,format:wNumb({decimals:0}),step:50,range:{min:0,max:3e3}}),t.noUiSlider.on("update",function(){let e=t.noUiSlider.get(),i=document.querySelector(".drop-down.elo");i.querySelector(".drop-down_current .value").innerText=e[0]+"-"+e[1]})}(),function(){document.querySelector(".season").addEventListener("change",t=>{let e=[],i=document.querySelectorAll(".season input:not(input[value=all])"),s=document.querySelector(".season .value"),n=document.querySelector('.season input[value="all"]');if(n.checked){s.innerText="All";for(const t of i)t.disabled=!0,t.checked=!1}else{s.innerText="-";for(const t of i)t.disabled=!1,t.checked&&e.push(t.parentNode.querySelector("label").innerText)}e.length>0&&(s.innerText=e.join(", "))});let t=new URLSearchParams(window.location.search),e=!!t.get("season")&&t.get("season").split(",");document.querySelector(".season .value");if(e){for(let t of e)document.querySelector(`.season input[value='${t}']`).checked=!0;document.querySelector('.season input[value="all"]').click()}}(),function(){document.querySelector(".map").addEventListener("change",t=>{let e=[],i=document.querySelectorAll(".map input:not(input[value=all])"),s=document.querySelector(".map .value"),n=document.querySelector('.map input[value="all"]');if(n.checked){s.innerText="All";for(const t of i)t.disabled=!0,t.checked=!1}else{s.innerText="-";for(const t of i)t.disabled=!1,t.checked&&e.push(t.parentNode.querySelector("label").innerText)}e.length>0&&(s.innerText=e.join(", "))});let t=new URLSearchParams(window.location.search),e=!!t.get("map")&&t.get("map").split(",");document.querySelector(".map .value");if(e){for(let t of e)document.querySelector(`.map input[value='${t}']`).checked=!0;document.querySelector('.map input[value="all"]').click()}}(),document.querySelector(".page-filter").addEventListener("click",e=>{let i=util.findParentBySelector(e.target,".season"),s=util.findParentBySelector(e.target,".elo"),n=util.findParentBySelector(e.target,".map"),r=util.findParentBySelector(e.target,".filter-submit button");if(i)t(i);else if(s)t(s);else if(n)t(n);else if(r){let t=[],e=slider.noUiSlider.get();t.push(`elo=${e[0]}-${e[1]}`);let i=[];for(const t of document.querySelectorAll(".season input:checked"))i.push(t.value);"all"!=i[0]&&i.length>0&&t.push(`season=${i.join(",")}`);let s=[];for(const t of document.querySelectorAll(".map input:checked"))s.push(t.value);"all"!=s[0]&&s.length>0&&t.push(`map=${s.join(",")}`);const n=window.location.origin+window.location.pathname;window.location.href=n+"?"+t.join("&")}})}),document.querySelector(".page-filter")&&app.filters(),document.querySelector(".stats-records")){document.querySelector(".tabs").addEventListener("click",t=>{t.preventDefault();let e=util.findParentBySelector(t.target,".left"),i=util.findParentBySelector(t.target,".right"),s=[],n=util.findParentBySelector(t.target,"a");e?("Low ELO"===document.querySelector(".tabs .right .active").innerText&&s.push("elo=low"),n.hasAttribute("data-param")&&s.push(n.dataset.param)):i&&("Season 2"===document.querySelector(".tabs .left .active").innerText?s.push("season=2"):"Season 1"===document.querySelector(".tabs .left .active").innerText&&s.push("season=1"),n.hasAttribute("data-param")&&s.push(n.dataset.param));let r=window.location.origin+window.location.pathname;s.length>0&&(r=r+"?"+s.join("&")),window.location.href=r})}app.tableSort=(async()=>{const t=[],e={};for(let i of document.getElementsByTagName("table"))if("table-sticky"===i.className){if(0===i.getElementsByTagName("thead").length){const t=document.createElement("thead");t.appendChild(i.rows[0]),i.insertBefore(t,i.firstChild)}const s=i.querySelector("thead"),n=i.querySelector("tbody"),r=s.querySelectorAll("th");for(let[i,o]of r.entries("table")){let r=0;o.addEventListener("click",()=>{if(0===i||1===i)return!1;r+=1,s.querySelector(".sort-desc")&&s.querySelector(".sort-desc").classList.remove("sort-desc"),s.querySelector(".sort-asc")&&s.querySelector("th.sort-asc").classList.remove("sort-asc"),function(){const s=n.querySelectorAll("tr");for(let[n,r]of s.entries())""!==r.querySelectorAll("td").item(i).innerHTML?(t.push(r.querySelectorAll("td").item(i).innerHTML+"#"+n),e[r.querySelectorAll("td").item(i).innerHTML+"#"+n]=r.innerHTML):(t.push("0#"+n),e["0#"+n]=r.innerHTML);function a(t,e){return t.localeCompare(e,navigator.languages[0]||navigator.language,{numeric:!0})}function l(t,e){return a(e,t)}void 0!==t[0]&&(o.classList.contains("order-desc")&&1===r?t.sort(l,{numeric:!0,ignorePunctuation:!0}):o.classList.contains("order-desc")&&2===r?(t.sort(a,{numeric:!0,ignorePunctuation:!0}),r=0):1===r?(o.classList.add("sort-asc"),t.sort(a)):2===r&&(o.classList.add("sort-desc"),t.sort(l),r=0))}(),function(){const i=n.querySelectorAll("tr");for(let[s,n]of i.entries())n.innerHTML=e[t[s]];t.length=0}()})}}}),document.querySelector(".table-sticky")&&app.tableSort(),util={indexInParent:function(t){var e=t.parentNode.childNodes;num=0;for(var i=0;i<e.length;i++){if(e[i]==t)return num;1==e[i].nodeType&&num++}return-1},findParentBySelector:function(t,e){for(;t&&t.parentNode;){var i=t.parentNode.querySelectorAll(e);if(Array.prototype.includes.call(i,t))return t;t=t.parentNode}return""|t},insertAfter:function(t,e){e.parentNode.insertBefore(t,e.nextSibling)}};