extends layouts/_layout.pug

block title
	title= title

block content

	main#main
		header
			h2= title

		.tabs
			.left
				a(
					href= '/player/' + user
					class=(navtab == 'summary' ? 'active' : '')
				) Summary
				a(
					href= '/player/' + user + '/allies'
					class=(navtab === 'allies' ? 'active' : '')
				) Allies
				a(
					href= '/player/' + user + '/opponents'
					class=(navtab === 'opponents' ? 'active' : '')
				) Opponents
				a(
					href= '/player/' + user + '/maps'
					class=(navtab === 'maps' ? 'active' : '')
				) Maps
				a(
					href= '/player/' + user + '/breakdown'
					class=(navtab === 'breakdown' ? 'active' : '')
				) Breakdown
				a(
					href= '/player/' + user + '/seasons'
					class=(navtab === 'seasons' ? 'active' : '')
				) Seasons

		section.stats-card-wrapper.stars

			.stats-card
				header
					h3 Godly Maps

				table
					tbody
						each n, key in maps
							tr
								td.map= n.map
								td.text-r
									if(n.winrate <= 52.5)
										include ../src/svg/star-half.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate <= 55)
										include ../src/svg/star.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate <= 57.5)
										include ../src/svg/star.svg
										include ../src/svg/star-half.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate <= 60)
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate <= 62.5)
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star-half.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate <= 65)
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate <= 67.5)
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star-half.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate <= 70)
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate <= 72.5)
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star-half.svg
									else
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star.svg






			.stats-card
				header
					h3 Godly Teammates

				table
					tbody
						each n, key in godteam
							tr
								td.map
									a(
										href= '/player/' + n.player
									)= n.player

								td.text-r
									if(n.winrate <= 52.5)
										include ../src/svg/star-half.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate <= 55)
										include ../src/svg/star.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate <= 57.5)
										include ../src/svg/star.svg
										include ../src/svg/star-half.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate <= 60)
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate <= 62.5)
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star-half.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate <= 65)
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate <= 67.5)
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star-half.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate <= 70)
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate <= 72.5)
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star-half.svg
									else
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star.svg
										include ../src/svg/star.svg

			.stats-card
				header
					h3 Shit Teammates

				table
					tbody
						each n, key in shitteam
							tr
								td.map
									a(
										href= '/player/' + n.player
									)= n.player

								td.text-r
									if(n.winrate >= 47.5)
										include ../src/svg/shit-half.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate >= 45)
										include ../src/svg/shit.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate >= 42.5)
										include ../src/svg/shit.svg
										include ../src/svg/shit-half.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate >= 40)
										include ../src/svg/shit.svg
										include ../src/svg/shit.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate >= 37.5)
										include ../src/svg/shit.svg
										include ../src/svg/shit.svg
										include ../src/svg/shit-half.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate >= 35)
										include ../src/svg/shit.svg
										include ../src/svg/shit.svg
										include ../src/svg/shit.svg
										include ../src/svg/star-blank.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate >= 32.5)
										include ../src/svg/shit.svg
										include ../src/svg/shit.svg
										include ../src/svg/shit.svg
										include ../src/svg/shit-half.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate >= 30)
										include ../src/svg/shit.svg
										include ../src/svg/shit.svg
										include ../src/svg/shit.svg
										include ../src/svg/shit.svg
										include ../src/svg/star-blank.svg
									else if(n.winrate >= 27.5)
										include ../src/svg/shit.svg
										include ../src/svg/shit.svg
										include ../src/svg/shit.svg
										include ../src/svg/shit.svg
										include ../src/svg/shit-half.svg
									else
										include ../src/svg/shit.svg
										include ../src/svg/shit.svg
										include ../src/svg/shit.svg
										include ../src/svg/shit.svg
										include ../src/svg/shit.svg


		br

		section.summary
			table.table-sticky
				thead
					each raw in monthly
						- function th(string){ return string.replace(/(?:_| |\b)(\w)/g, function($1){return $1.toUpperCase().replace('_',' ')})}

						tr
							- let n = 0
							- let last = Object.keys(raw).length
							each v, k in raw
								-- ++n
								if(k === 'dates')
									- continue
								else if(k === 'monthyear')
									th.text-c.sort(style="width:100px")

								else
									if(last === n)
										th.text-c.sort.sort-desc
											span= th(k)
									else
										th.text-c.sort
											span= th(k)
							- break

				tbody
					each raw in monthly
						tr
							each v, k in raw
								if(k === 'dates')
									- continue
								else if(k === 'monthyear')
									td.text-l= v
								else
									td.text-c= v
