extends layouts/_layout.pug

block title
	title= title

block content
	| <script src="https://d3js.org/d3.v3.min.js"></script>

	main#main
		header
			h2= title

		.tabs
			.left
				a(
					href= '/player/' + user
					class=(navtab == 'summary' ? 'active' : '')
				) Summary
				a(
					href= '/player/' + user + '/allies'
					class=(navtab === 'allies' ? 'active' : '')
				) Allies
				a(
					href= '/player/' + user + '/opponents'
					class=(navtab === 'opponents' ? 'active' : '')
				) Opponents
				a(
					href= '/player/' + user + '/maps'
					class=(navtab === 'maps' ? 'active' : '')
				) Maps
				a(
					href= '/player/' + user + '/breakdown'
					class=(navtab === 'breakdown' ? 'active' : '')
				) Breakdown
				a(
					href= '/player/' + user + '/seasons'
					class=(navtab === 'seasons' ? 'active' : '')
				) Seasons

		script.
			const seasons = !{JSON.stringify(seasons)}


		.byseason

			.filter(style='display:none')
				label
					input(type="checkbox", checked)
					span Exclude low ELO games

			each n, key in seasons
				.season(data-seasonid= n.seasonid)

					.block_right
						.radar

					.block_left
						h1= n.seasonname
						ul.stats
							li
								.lab Games
								.val= n.real.total

							// li
							// 	.lab Avg Game ELO
							// 	.val= n.real.elo

							li
								.lab MMR
								.val= n.real.mmr

						ul.stats
							li
								.lab Win %
								.val= n.real.rank
								.pos= n.radar.rank

							li
								.lab Pups
								.val= n.real.pup
								.pos= n.radar.pup

							li
								.lab Prevent
								.val= n.real.prevent
								.pos= n.radar.prevent

							li
								.lab Returns
								.val= n.real.return
								.pos= n.radar.return

							li
								.lab Tags
								.val= n.real.tag
								.pos= n.radar.tag

							li
								.lab Hold
								.val= n.real.hold
								.pos= n.radar.hold

							li
								.lab Caps
								.val= n.real.cap
								.pos= n.radar.cap

							li
								.lab Grabs
								.val= n.real.grab
								.pos= n.radar.grab
