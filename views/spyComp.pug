include template/head.pug

.contain.players-list.spy
	.wrap

		.player-stats
			.row.head
				each n, key in players
					each v, k in n
						if(k === 'tpid' || k === 'online')
							- continue

						else if(k === 'rank')
							.item(data-column="rank")

						else if(k === 'country')
							.item.country

						else if(k === 'flair')
							.item.flair

						else if(k === 'name')
							.item.player Player

						else if(k === 'tier')
							.item.tier Plays

						else if(k === 'lastseen')
							.item.lastseen Last Seen

						else
							.item(
								data-column= k
							)= k

					- break

			each n, key in players
				.row.entry
					each v, k in n
						if(k === 'tpid' || k === 'online')
							- continue

						else if(k === 'country')
							.item.country
								img(
									src="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/4.1.5/flags/4x3/" + v.toLowerCase() + ".svg"
								)

						else if(k === 'flair')
							.item.flair
								// - let flair = v.replace(',', '')
								span(data-flair= flair)

						else if(k === 'name')
							.item.player
								a(
									href='https://tagpro.gg/profile/' + n.tpid
								)= v

						else if(k === 'lastseen')
							.item.lastseen(
								data-online=n.online ? 'true' : undefined
							)= v

						else if (k === 'tier')
							.item.tier
								span(
									class= v
								)= v

						else if(k === 'r300')
							.item(data-column="r300")
								.item.flair.winrate
									if v === 3
										span(data-flair="Insane Win Rate") 3
									else if v === 2
										span(data-flair="Awesome Win Rate") 2
									else if v === 1
										span(data-flair="Good Win Rate") 1
									else
										span 0

						else
							.item(
								data-column= k
							)= v

include template/foot.pug
