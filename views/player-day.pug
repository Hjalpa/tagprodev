extends layouts/_layout.pug

block title
	title= title

block content

	main#main
		header
			h2= title

		.tabs
			.left
				a(
					href= '/player/' + user
					class=(navtab == 'summary' ? 'active' : '')
				) Summary
				a(
					href= '/player/' + user + '/allies'
					class=(navtab === 'allies' ? 'active' : '')
				) Allies
				a(
					href= '/player/' + user + '/opponents'
					class=(navtab === 'opponents' ? 'active' : '')
				) Opponents
				a(
					href= '/player/' + user + '/maps'
					class=(navtab === 'maps' ? 'active' : '')
				) Maps
				a(
					href= '/player/' + user + '/breakdown'
					class=(navtab === 'breakdown' ? 'active' : '')
				) Breakdown
				a(
					href= '/player/' + user + '/seasons'
					class=(navtab === 'seasons' ? 'active' : '')
				) Seasons


		section
			table.table-sticky
				thead
					each raw in results
						- function th(string){ return string.replace(/(?:_| |\b)(\w)/g, function($1){return $1.toUpperCase().replace('_',' ')})}

						tr
							- let n = 0
							- let last = Object.keys(raw).length
							each v, k in raw
								-- ++n
								if(k === 'dates')
									- continue
								else if(k === 'monthyear')
									th.text-c.sort(style="width:100px")

								else
									if(last === n)
										th.text-c.sort.sort-desc
											span= th(k)
									else
										th.text-c.sort
											span= th(k)
							- break

				tbody
					each raw in results
						tr
							each v, k in raw
								if(k === 'dates')
									- continue
								else if(k === 'monthyear')
									td.text-l= v
								else
									td.text-c= v
